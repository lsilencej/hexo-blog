<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="Hexo Theme Redefine"><meta name="author" content="lsilencej"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://npm.elemecdn.com" crossorigin><link rel="canonical" href="https://hexo.blog.lsilencej.top/2021/11/15/java 集合框架源码解析-java-collections-framework/"><meta name="robots" content="index,follow"><meta name="googlebot" content="index,follow"><meta name="revisit-after" content="1 days"><meta name="description" content="Java 集合框架"><meta property="og:type" content="article"><meta property="og:title" content="Java 集合框架源码解析"><meta property="og:url" content="https://hexo.blog.lsilencej.top/2021/11/15/Java%20%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90-java-collections-framework/index.html"><meta property="og:site_name" content="lsilencej の Blog"><meta property="og:description" content="Java 集合框架"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318d0ed9a77.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318d3fe0d54.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318d465bb8c.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318d4d791fc.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318d547f76b.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318d5dbfdec.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318d8a20deb.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318d91d31af.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318d95975be.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318d9e1b1ff.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318e2beb2b7.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318e34bee5d.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318e397cfde.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318e3e77e39.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318e4401db9.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318e48eb39c.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318e5381772.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318e58e4eaa.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318e600c864.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318e66341c0.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318e6e5c431.png"><meta property="og:image" content="https://image.lsilencej.top/i/2022/03/16/62318e7ca4ae8.png"><meta property="article:published_time" content="2021-11-15T12:52:59.000Z"><meta property="article:modified_time" content="2022-05-02T07:53:41.466Z"><meta property="article:author" content="lsilencej"><meta property="article:tag" content="Java"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://image.lsilencej.top/i/2022/03/16/62318d0ed9a77.png"><link rel="icon" type="image/png" href="https://image.lsilencej.top/i/2022/03/16/6230bd06a571d.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="https://image.lsilencej.top/i/2022/03/16/6230bd06a571d.png"><meta name="theme-color" content="#A31F34"><link rel="shortcut icon" href="https://image.lsilencej.top/i/2022/03/16/6230bd06a571d.png"><title>Java 集合框架源码解析 - lsilencej の Blog</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/fonts/fonts.css"><link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/fonts/Satoshi/satoshi.css"><link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/fonts/Chillax/chillax.css"><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital@1&display=swap" rel="stylesheet"><script id="hexo-configurations">let Global=window.Global||{};Global.hexo_config={hostname:"hexo.blog.lsilencej.top",root:"/",language:"en",path:"search.xml"},Global.theme_config={articles:{style:{font_size:"16px",line_height:1.5,image_border_radius:"14px",image_alignment:"center",image_caption:!1,link_icon:!0},word_count:{enable:!0,count:!0,min2read:!0},author_label:{enable:!0,auto:!1,list:["LUCK++"]},code_block:{copy:!0,style:"mac",font:{enable:!0,family:"JetBrains Mono",url:"https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital@1&display=swap"}},toc:{enable:!0,max_depth:6,number:!1,expand:!0,init_open:!0},copyright:!0,lazyload:!0,recommendation:{enable:!0,title:"推荐阅读",limit:3,mobile_limit:2,placeholder:"/images/wallhaven-wqery6-light.webp",skip_dirs:[]}},colors:{primary:"#A31F34",secondary:null},global:{fonts:{chinese:{enable:!1,family:null,url:null},english:{enable:!1,family:null,url:null}},content_max_width:"1000px",sidebar_width:"210px",hover:{shadow:!0,scale:!1},scroll_progress:{bar:!0,percentage:!0},busuanzi_counter:{enable:!0,site_pv:!0,site_uv:!0,post_pv:!0},pjax:!0,open_graph:!0,google_analytics:{enable:!1,id:null}},home_banner:{enable:!0,style:"fixed",image:{light:"https://image.lsilencej.top/i/2022/05/07/627644aea4c0d.jpg",dark:"https://image.lsilencej.top/i/2022/05/07/627644a503f12.jpg"},title:"修身养性，少欲随缘",subtitle:{text:["Loading..."],hitokoto:{enable:!1,api:"https://v1.hitokoto.cn"},typing_speed:100,backing_speed:80,starting_delay:500,backing_delay:1500,loop:!0,smart_backspace:!0,rainbow:{enable:!0,api:"https://api.eatrice.top"}},text_color:{light:"#fff",dark:"#d1d1b6"},text_style:{title_size:"2.8rem",subtitle_size:"1.5rem",line_height:1.2},custom_font:{enable:!1,family:null,url:null},social_links:{enable:!0,links:{github:"https://github.com/lsilencej",instagram:null,zhihu:null,twitter:null,email:"a2310019764@gmail.com",qq:"//wpa.qq.com/msgrd?v=3&uin=2310019764&site=qq&menu=yes","fa-solid fa-music":"https://music.163.com/#/user/home?id=345987815",steam:"https://steamcommunity.com/id/lsilencej","fa-solid fa-rss":"/atom.xml"}}},plugins:{feed:{enable:!0},aplayer:{enable:!0,type:"mini",audios:[{name:"宙でおやすみ",artist:"Aiobahn,長瀬有花",url:"https://lsilencej.top/music/Aiobahn,%E9%95%B7%E7%80%AC%E6%9C%89%E8%8A%B1%20-%20%E5%AE%99%E3%81%A7%E3%81%8A%E3%82%84%E3%81%99%E3%81%BF.flac",cover:"https://lsilencej.top/music/covers/Aiobahn,%E9%95%B7%E7%80%AC%E6%9C%89%E8%8A%B1%20-%20%E5%AE%99%E3%81%A7%E3%81%8A%E3%82%84%E3%81%99%E3%81%BF.jpg"}]},mermaid:{enable:!0,version:"9.3.0"},mathjax:{tags:"none",single_dollars:!0,cjk_width:.9,normal_width:.6,append_css:!0,every_page:!1}},version:"2.2.1",navbar:{auto_hide:!1,color:{left:"#f78736",right:"#367df7",transparency:35},links:{Home:{path:"/",icon:"fa-regular fa-house"},Status:{path:"https://status.lsilencej.top/",icon:"fa-regular fa-chart-bar"},Links:{icon:"fa-regular fa-link",submenus:{Blog:"https://blog.lsilencej.top",Konwledge:"https://knowledge.lsilencej.top",Password:"https://password.lsilencej.top",Image:"https://image.lsilencej.top",Pan:"https://pan.lsilencej.top"}},About:{icon:"fa-regular fa-user",submenus:{Me:"/about",Friends:"/friends"}},Travel:{path:"https://www.travellings.cn/go.html",icon:"fa-regular fa-train"}},search:{enable:!0,preload:!0}},page_templates:{friends_column:2,tags_style:"blur"},home:{sidebar:{enable:!0,position:"left",first_item:"menu",announcement:"这里是 lsilencej の Blog",links:{Archives:{path:"/archives",icon:"fa-regular fa-archive"},Tags:{path:"/tags",icon:"fa-regular fa-tags"},Categories:{path:"/categories",icon:"fa-regular fa-folder"}}},article_date_format:"auto",categories:{enable:!0,limit:3},tags:{enable:!0,limit:3}},footerStart:"2018/10/6 23:39:04"},Global.language_ago={second:"%s seconds ago",minute:"%s minutes ago",hour:"%s hours ago",day:"%s days ago",week:"%s weeks ago",month:"%s months ago",year:"%s years ago"},Global.data_config={masonry:!1}</script><link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/fontawesome/fontawesome.min.css"><link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/fontawesome/brands.min.css"><link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/fontawesome/solid.min.css"><link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/fontawesome/regular.min.css"><meta name="generator" content="Hexo 6.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style><link rel="alternate" href="/atom.xml" title="lsilencej の Blog" type="application/atom+xml">
</head><body><div class="progress-bar-container"><span class="scroll-progress-bar"></span> <span class="pjax-progress-bar"></span> <span class="pjax-progress-icon"><i class="fa-solid fa-circle-notch fa-spin"></i></span></div><main class="page-container"><div class="main-content-container"><div class="main-content-header"><header class="navbar-container"><div class="navbar-content"><div class="left"><a class="logo-title" href="/">lsilencej の Blog</a></div><div class="right"><div class="desktop"><ul class="navbar-list"><li class="navbar-item"><a href="/"><i class="fa-regular fa-house"></i> HOME</a></li><li class="navbar-item"><a target="_blank" rel="noopener" href="https://status.lsilencej.top/"><i class="fa-regular fa-chart-bar"></i> STATUS</a></li><li class="navbar-item"><a class="has-dropdown" href="#" onclick="return!1"><i class="fa-regular fa-link"></i> LINKS&nbsp;<i class="fa-solid fa-chevron-down"></i></a><ul class="sub-menu"><li><a target="_blank" rel="noopener" href="https://blog.lsilencej.top">BLOG</a></li><li><a target="_blank" rel="noopener" href="https://knowledge.lsilencej.top">KONWLEDGE</a></li><li><a target="_blank" rel="noopener" href="https://password.lsilencej.top">PASSWORD</a></li><li><a target="_blank" rel="noopener" href="https://image.lsilencej.top">IMAGE</a></li><li><a target="_blank" rel="noopener" href="https://pan.lsilencej.top">PAN</a></li></ul></li><li class="navbar-item"><a class="has-dropdown" href="#" onclick="return!1"><i class="fa-regular fa-user"></i> ABOUT&nbsp;<i class="fa-solid fa-chevron-down"></i></a><ul class="sub-menu"><li><a href="/about">ME</a></li><li><a href="/friends">FRIENDS</a></li></ul></li><li class="navbar-item"><a target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-regular fa-train"></i> TRAVEL</a></li><li class="navbar-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></li></ul></div><div class="mobile"><div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div><div class="icon-item navbar-bar"><div class="navbar-bar-middle"></div></div></div></div></div><div class="navbar-drawer"><ul class="drawer-navbar-list"><li class="drawer-navbar-item flex-center"><a href="/"><i class="fa-regular fa-house"></i> HOME</a></li><li class="drawer-navbar-item flex-center"><a target="_blank" rel="noopener" href="https://status.lsilencej.top/"><i class="fa-regular fa-chart-bar"></i> STATUS</a></li><li class="drawer-navbar-item flex-center"><a class="has-dropdown" href="#" onclick="return!1"><i class="fa-regular fa-link"></i> LINKS&nbsp;<i class="fa-solid fa-chevron-down"></i></a></li><li class="dropdown-item flex-center"><a class="dropdown-item" target="_blank" rel="noopener" href="https://blog.lsilencej.top">BLOG</a></li><li class="dropdown-item flex-center"><a class="dropdown-item" target="_blank" rel="noopener" href="https://knowledge.lsilencej.top">KONWLEDGE</a></li><li class="dropdown-item flex-center"><a class="dropdown-item" target="_blank" rel="noopener" href="https://password.lsilencej.top">PASSWORD</a></li><li class="dropdown-item flex-center"><a class="dropdown-item" target="_blank" rel="noopener" href="https://image.lsilencej.top">IMAGE</a></li><li class="dropdown-item flex-center"><a class="dropdown-item" target="_blank" rel="noopener" href="https://pan.lsilencej.top">PAN</a></li><li class="drawer-navbar-item flex-center"><a class="has-dropdown" href="#" onclick="return!1"><i class="fa-regular fa-user"></i> ABOUT&nbsp;<i class="fa-solid fa-chevron-down"></i></a></li><li class="dropdown-item flex-center"><a class="dropdown-item" href="/about">ME</a></li><li class="dropdown-item flex-center"><a class="dropdown-item" href="/friends">FRIENDS</a></li><li class="drawer-navbar-item flex-center"><a target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-regular fa-train"></i> TRAVEL</a></li></ul></div><div class="window-mask"></div></header></div><div class="main-content-body"><div class="main-content"><div class="fade-in-down-animation"><div class="post-page-container"><div class="article-content-container"><div class="article-title"><img src="https://image.lsilencej.top/i/2022/03/17/6232198fd86ff.png" alt="Java 集合框架源码解析"><h1 class="article-title-cover">Java 集合框架源码解析</h1></div><div class="article-header"><div class="avatar"><img src="https://image.lsilencej.top/i/2022/03/15/62303e2b6427d.jpg"></div><div class="info"><div class="author"><span class="name">lsilencej</span> <span class="author-label">LUCK++</span></div><div class="meta-info"><div class="article-meta-info"><span class="article-date article-meta-item"><i class="fa-regular fa-pen-fancy"></i>&nbsp; <span class="desktop">2021-11-15 20:52:59</span> <span class="mobile">2021-11-15 20:52</span> <span class="hover-info">Created</span> </span><span class="article-date article-meta-item"><i class="fa-regular fa-wrench"></i>&nbsp; <span class="desktop">2022-05-02 15:53:41</span> <span class="mobile">2022-05-02 15:53</span> <span class="hover-info">Updated</span> </span><span class="article-categories article-meta-item"><i class="fa-regular fa-folders"></i>&nbsp;<ul><li><a href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/">技术学习</a>&nbsp;</li></ul></span><span class="article-tags article-meta-item"><i class="fa-regular fa-tags"></i>&nbsp;<ul><li><a href="/tags/Java/">Java</a>&nbsp;</li></ul></span><span class="article-wordcount article-meta-item"><i class="fa-regular fa-typewriter"></i>&nbsp;<span>18.7k Words</span> </span><span class="article-min2read article-meta-item"><i class="fa-regular fa-clock"></i>&nbsp;<span>90 Mins</span> </span><span class="article-pv article-meta-item"><i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span></div></div></div></div><div class="article-content markdown-body"><h2 id="知识体系结构"><a href="#知识体系结构" class="headerlink" title="知识体系结构"></a>知识体系结构</h2><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318d0ed9a77.png" alt="知识体系结构"></p><p>容器包括 <em>Collection</em> 和 <em>Map</em> 两种，<em>Collection</em> 存储着对象的集合，而 <em>Map</em> 存储着键值对(两个对象)的映射表。</p><h2 id="Collection-容器"><a href="#Collection-容器" class="headerlink" title="Collection 容器"></a><em>Collection</em> 容器</h2><h3 id="结构图"><a href="#结构图" class="headerlink" title="结构图"></a>结构图</h3><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318d3fe0d54.png" alt="结构图"></p><h3 id="List"><a href="#List" class="headerlink" title="List"></a><em>List</em></h3><h4 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a><em>ArrayList</em></h4><p><em>ArrayList</em> 继承了 <em>AbstractList</em> 抽象基类，实现了 <em>List</em> 接口</p><p>底层通过数组实现，顺序存储结构，基于动态数组实现，支持随机访问</p><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318d465bb8c.png" alt="ArrayList"></p><h5 id="底层数据结构"><a href="#底层数据结构" class="headerlink" title="底层数据结构"></a>底层数据结构</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">transient Object[] elementData; // 用于存储的数组</span><br><span class="line"></span><br><span class="line">private int size; // ArrayList 的初始容量</span><br></pre></td></tr></table></figure></div><h5 id="构造器"><a href="#构造器" class="headerlink" title="构造器"></a>构造器</h5><table><thead><tr><th align="center"><strong>构造器</strong></th><th align="center"><strong>描述</strong></th></tr></thead><tbody><tr><td align="center"><strong>ArrayList</strong>()</td><td align="center">构造一个初始容量为10的空列表。</td></tr><tr><td align="center"><strong>ArrayList</strong>(int initialCapacity)</td><td align="center">构造具有指定初始容量的空列表。</td></tr><tr><td align="center"><strong>ArrayList</strong>(Collection&lt;? extends E&gt; c)</td><td align="center">按照集合的迭代器返回的顺序构造一个包含指定集合元素的列表。</td></tr></tbody></table><pre><code>public ArrayList(int initialCapacity) {
    if (initialCapacity &gt; 0) {
        this.elementData = new Object[initialCapacity];
    } else if (initialCapacity == 0) {
        this.elementData = EMPTY_ELEMENTDATA;
    } else {
        throw new IllegalArgumentException("Illegal Capacity: "+
                                           initialCapacity);
    }
}

public ArrayList() {
    this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;
}

public ArrayList(Collection&lt;? extends E&gt; c) {
    Object[] a = c.toArray();
    if ((size = a.length) != 0) {
        if (c.getClass() == ArrayList.class) {
            elementData = a;
        } else {
            elementData = Arrays.copyOf(a, size, Object[].class);
        }
    } else {
        // replace with empty array.
        elementData = EMPTY_ELEMENTDATA;
    }
}
</code></pre><h5 id="方法概要"><a href="#方法概要" class="headerlink" title="方法概要"></a>方法概要</h5><table><thead><tr><th align="center"><strong>变量和类型</strong></th><th align="center">方法</th><th align="center"><strong>描述</strong></th></tr></thead><tbody><tr><td align="center">void</td><td align="center"><strong>add</strong>(int index, E element)</td><td align="center">将指定元素插入此列表中的指定位置。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>add</strong>(E e)</td><td align="center">将指定的元素追加到此列表的末尾。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>addAll</strong>(int index, Collection&lt;? extends E&gt; c)</td><td align="center">从指定位置开始，将指定集合中的所有元素插入此列表。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>addAll</strong>(Collection&lt;? extends E&gt; c)</td><td align="center">将指定集合中的所有元素按指定集合的Iterator返回的顺序附加到此列表的末尾。</td></tr><tr><td align="center">void</td><td align="center"><strong>clear</strong>()</td><td align="center">从此列表中删除所有元素。</td></tr><tr><td align="center">Object</td><td align="center"><strong>clone</strong>()</td><td align="center">返回此 <code>ArrayList</code>实例的浅表副本。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>contains</strong>(Object o)</td><td align="center">如果此列表包含指定的元素，则返回 <code>true</code> 。</td></tr><tr><td align="center">void</td><td align="center"><strong>ensureCapacity</strong>(int minCapacity)</td><td align="center">如有必要，增加此 <code>ArrayList</code>实例的容量，以确保它至少可以容纳由minimum capacity参数指定的元素数。</td></tr><tr><td align="center">void</td><td align="center"><strong>forEach</strong>(Consumer&lt;? super E&gt; action)</td><td align="center">对 <code>Iterable</code>每个元素执行给定操作，直到处理 <code>Iterable</code>所有元素或操作引发异常。</td></tr><tr><td align="center">E</td><td align="center"><strong>get</strong>(int index)</td><td align="center">返回此列表中指定位置的元素。</td></tr><tr><td align="center">int</td><td align="center"><strong>indexOf</strong>(Object o)</td><td align="center">返回此列表中第一次出现的指定元素的索引，如果此列表不包含该元素，则返回-1。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>isEmpty</strong>()</td><td align="center">如果此列表不包含任何元素，则返回 <code>true</code> 。</td></tr><tr><td align="center">Iterator<e></e></td><td align="center"><strong>iterator</strong>()</td><td align="center">以适当的顺序返回此列表中元素的迭代器。</td></tr><tr><td align="center">int</td><td align="center"><strong>lastIndexOf</strong>(Object o)</td><td align="center">返回此列表中指定元素最后一次出现的索引，如果此列表不包含该元素，则返回-1。</td></tr><tr><td align="center">ListIterator<e></e></td><td align="center"><strong>listIterator</strong>()</td><td align="center">返回此列表中元素的列表迭代器（按适当顺序）。</td></tr><tr><td align="center">ListIterator<e></e></td><td align="center"><strong>listIterator</strong>(int index)</td><td align="center">从列表中的指定位置开始，返回列表中元素的列表迭代器（按正确顺序）。</td></tr><tr><td align="center">E</td><td align="center"><strong>remove</strong>(int index)</td><td align="center">删除此列表中指定位置的元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>remove</strong>(Object o)</td><td align="center">从该列表中删除指定元素的第一个匹配项（如果存在）。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>removeAll</strong>(Collection&lt;?&gt; c)</td><td align="center">从此列表中删除指定集合中包含的所有元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>removeIf</strong>(Predicate&lt;? super E&gt; filter)</td><td align="center">删除此集合中满足给定谓词的所有元素。</td></tr><tr><td align="center">protected void</td><td align="center"><strong>removeRange</strong>(int fromIndex, int toIndex)</td><td align="center">从此列表中删除索引介于 <code>fromIndex</code> （含）和 <code>toIndex</code> （独占）之间的所有元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>retainAll</strong>(Collection&lt;?&gt; c)</td><td align="center">仅保留此列表中包含在指定集合中的元素。</td></tr><tr><td align="center">E</td><td align="center"><strong>set</strong>(int index, E element)</td><td align="center">用指定的元素替换此列表中指定位置的元素。</td></tr><tr><td align="center">int</td><td align="center"><strong>size</strong>()</td><td align="center">返回此列表中的元素数。</td></tr><tr><td align="center">Spliterator<e></e></td><td align="center"><strong>spliterator</strong>()</td><td align="center">在此列表中的元素上创建<em>late-binding</em>和<em>故障快速 Spliterator</em>。</td></tr><tr><td align="center">List<e></e></td><td align="center"><strong>subList</strong>(int fromIndex, int toIndex)</td><td align="center">返回指定的 <code>fromIndex</code> （包含）和 <code>toIndex</code> （不包括）之间的此列表部分的视图。</td></tr><tr><td align="center">Object[]</td><td align="center"><strong>toArray</strong>()</td><td align="center">以适当的顺序（从第一个元素到最后一个元素）返回包含此列表中所有元素的数组。</td></tr><tr><td align="center"><t>T[]</t></td><td align="center"><strong>toArray</strong>(T[] a)</td><td align="center">以适当的顺序返回包含此列表中所有元素的数组（从第一个元素到最后一个元素）; 返回数组的运行时类型是指定数组的运行时类型。</td></tr><tr><td align="center">void</td><td align="center"><strong>trimToSize</strong>()</td><td align="center">将此 <code>ArrayList</code>实例的容量调整为列表的当前大小。</td></tr></tbody></table><h5 id="自动扩容"><a href="#自动扩容" class="headerlink" title="自动扩容"></a>自动扩容</h5><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318d4d791fc.png" alt="扩容"></p><p>向数组添加元素时，会对当前剩余空间进行检查，如果新添加的元素个数超过剩余空间，数组将自我进行扩容，通过 ensureCapacity(int minCapacity) 方法实现</p><p>数组扩容时，会将老数组中的元素重新拷贝至一份新数组中，<strong>int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);</strong> 这行语句使用位运算，将原数组的 oldCapacity 二进制位向右移动一位，即原数的一半与 oldCapacity 求和作为 newCapacity 的值，每次扩容 newCapacity 大约是 oldCapacity 的 1.5 倍</p><pre><code>public void ensureCapacity(int minCapacity) {
    if (minCapacity &gt; elementData.length
        &amp;&amp; !(elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA
             &amp;&amp; minCapacity &lt;= DEFAULT_CAPACITY)) {
        modCount++;
        grow(minCapacity);
    }
}

private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;

private Object[] grow(int minCapacity) {
    return elementData = Arrays.copyOf(elementData,
                                       newCapacity(minCapacity));
}

private Object[] grow() {
    return grow(size + 1);
}

private int newCapacity(int minCapacity) {
    // overflow-conscious code
    int oldCapacity = elementData.length;
    int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); // 扩大为大约 1.5 倍
    if (newCapacity - minCapacity &lt;= 0) {
        if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA)
            return Math.max(DEFAULT_CAPACITY, minCapacity);
        if (minCapacity &lt; 0) // overflow
            throw new OutOfMemoryError();
        return minCapacity;
    }
    return (newCapacity - MAX_ARRAY_SIZE &lt;= 0)
        ? newCapacity
        : hugeCapacity(minCapacity);
}

private static int hugeCapacity(int minCapacity) {
    if (minCapacity &lt; 0) // overflow
        throw new OutOfMemoryError();
    return (minCapacity &gt; MAX_ARRAY_SIZE)
        ? Integer.MAX_VALUE
        : MAX_ARRAY_SIZE;
}
</code></pre><h5 id="trimToSize"><a href="#trimToSize" class="headerlink" title="trimToSize"></a>trimToSize</h5><p>创建一个刚好能包括所有元素的数组并拷贝过去</p><pre><code>public void trimToSize() {
    modCount++;
    if (size &lt; elementData.length) {
        elementData = (size == 0)
          ? EMPTY_ELEMENTDATA
          : Arrays.copyOf(elementData, size);
    }
}
</code></pre><h5 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf"></a>indexOf</h5><pre><code>// 正向查找返回第一个与之相等的索引
public int indexOf(Object o) {
    return indexOfRange(o, 0, size);
}

int indexOfRange(Object o, int start, int end) {
    Object[] es = elementData;
    if (o == null) {
        for (int i = start; i &lt; end; i++) {
            if (es[i] == null) {
                return i;
            }
        }
    } else {
        for (int i = start; i &lt; end; i++) {
            if (o.equals(es[i])) {
                return i;
            }
        }
    }
    return -1;
}
</code></pre><h5 id="lastIndexOf"><a href="#lastIndexOf" class="headerlink" title="lastIndexOf"></a>lastIndexOf</h5><pre><code>// 逆向查找返回第一个与之相等的索引
public int lastIndexOf(Object o) {
    return lastIndexOfRange(o, 0, size);
}

int lastIndexOfRange(Object o, int start, int end) {
    Object[] es = elementData;
    if (o == null) {
        for (int i = end - 1; i &gt;= start; i--) {
            if (es[i] == null) {
                return i;
            }
        }
    } else {
        for (int i = end - 1; i &gt;= start; i--) {
            if (o.equals(es[i])) {
                return i;
            }
        }
    }
    return -1;
}
</code></pre><h5 id="elementData"><a href="#elementData" class="headerlink" title="elementData"></a>elementData</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@SuppressWarnings("unchecked")</span><br><span class="line">E elementData(int index) {</span><br><span class="line">    return (E) elementData[index];</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="get"><a href="#get" class="headerlink" title="get"></a>get</h5><pre><code>// 根据索引查找元素
public E get(int index) {
    Objects.checkIndex(index, size);
    return elementData(index);
}
</code></pre><h5 id="set"><a href="#set" class="headerlink" title="set"></a>set</h5><pre><code>// 根据索引直接赋值
public E set(int index, E element) {
    Objects.checkIndex(index, size);
    E oldValue = elementData(index);
    elementData[index] = element;
    return oldValue;
}
</code></pre><h5 id="add"><a href="#add" class="headerlink" title="add"></a>add</h5><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318d547f76b.png" alt="add"></p><pre><code>// 直接在末尾添加
public boolean add(E e) {
    modCount++;
    add(e, elementData, size);
    return true;
}

private void add(E e, Object[] elementData, int s) {
    if (s == elementData.length)
        elementData = grow();
    elementData[s] = e;
    size = s + 1;
}

// 在相应索引处添加
public void add(int index, E element) {
    rangeCheckForAdd(index);
    modCount++;
    final int s;
    Object[] elementData;
    if ((s = size) == (elementData = this.elementData).length)
        elementData = grow();
    System.arraycopy(elementData, index,
                     elementData, index + 1,
                     s - index);
    elementData[index] = element;
    size = s + 1;
}
</code></pre><h5 id="fastRemove"><a href="#fastRemove" class="headerlink" title="fastRemove"></a>fastRemove</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">private void fastRemove(Object[] es, int i) {</span><br><span class="line">    modCount++;</span><br><span class="line">    final int newSize;</span><br><span class="line">    if ((newSize = size - 1) &gt; i)</span><br><span class="line">        System.arraycopy(es, i + 1, es, i, newSize - i);</span><br><span class="line">    es[size = newSize] = null;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h5><pre><code>// 调用 fastRemove() 根据索引删除
public E remove(int index) {
    Objects.checkIndex(index, size);
    final Object[] es = elementData;

    @SuppressWarnings("unchecked") E oldValue = (E) es[index];
    fastRemove(es, index);

    return oldValue;
}

// 同样调用 fastRemove() 删除指定元素的第一个匹配项
public boolean remove(Object o) {
    final Object[] es = elementData;
    final int size = this.size;
    int i = 0;
    found: {
        if (o == null) {
            for (; i &lt; size; i++)
                if (es[i] == null)
                    break found;
        } else {
            for (; i &lt; size; i++)
                if (o.equals(es[i]))
                    break found;
        }
        return false;
    }
    fastRemove(es, i);
    return true;
}
</code></pre><h5 id="addAll"><a href="#addAll" class="headerlink" title="addAll"></a>addAll</h5><pre><code>// 直接在末尾添加添加集合中所有元素
public boolean addAll(Collection&lt;? extends E&gt; c) {
    Object[] a = c.toArray();
    modCount++;
    int numNew = a.length;
    if (numNew == 0)
        return false;
    Object[] elementData;
    final int s;
    if (numNew &gt; (elementData = this.elementData).length - (s = size))
        elementData = grow(s + numNew);
    System.arraycopy(a, 0, elementData, s, numNew);
    size = s + numNew;
    return true;
}

// 在相应索引处添加集合中所有元素
public boolean addAll(int index, Collection&lt;? extends E&gt; c) {
    rangeCheckForAdd(index);

    Object[] a = c.toArray();
    modCount++;
    int numNew = a.length;
    if (numNew == 0)
        return false;
    Object[] elementData;
    final int s;
    if (numNew &gt; (elementData = this.elementData).length - (s = size))
        elementData = grow(s + numNew);

    int numMoved = s - index;
    if (numMoved &gt; 0)
        System.arraycopy(elementData, index,
                         elementData, index + numNew,
                         numMoved);
    System.arraycopy(a, 0, elementData, index, numNew);
    size = s + numNew;
    return true;
}
</code></pre><h5 id="removeAll"><a href="#removeAll" class="headerlink" title="removeAll"></a>removeAll</h5><pre><code>// 移除所有元素
public boolean removeAll(Collection&lt;?&gt; c) {
    return batchRemove(c, false, 0, size);
}

boolean batchRemove(Collection&lt;?&gt; c, boolean complement,
                    final int from, final int end) {
    Objects.requireNonNull(c);
    final Object[] es = elementData;
    int r;
    // Optimize for initial run of survivors
    for (r = from;; r++) {
        if (r == end)
            return false;
        if (c.contains(es[r]) != complement)
            break;
    }
    int w = r++;
    try {
        for (Object e; r &lt; end; r++)
            if (c.contains(e = es[r]) == complement)
                es[w++] = e;
    } catch (Throwable ex) {
        // Preserve behavioral compatibility with AbstractCollection,
        // even if c.contains() throws.
        System.arraycopy(es, r, es, w, end - r);
        w += end - r;
        throw ex;
    } finally {
        modCount += end - w;
        shiftTailOverGap(es, w, end);
    }
    return true;
}
</code></pre><h4 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a><em>Vector</em></h4><p><em>Vector</em> 继承了 <em>AbstractList</em> 抽象基类，实现了 List 接口</p><p>类似于 <em>ArrayList</em>，但其是同步的，线程安全，如果不需要线程安全，建议使用 <em>ArrayList</em> 代替 <em>Vector</em></p><p>但也不是绝对的线程安全：</p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">private static Vector&lt;Integer&gt; vector = new Vector&lt;&gt;();</span><br><span class="line"> </span><br><span class="line">public static void main(String args[]) throws Excption{</span><br><span class="line">    while(true){</span><br><span class="line">        for(int i=0; i&lt;10; i++){</span><br><span class="line">            vector.add(i);</span><br><span class="line">        }</span><br><span class="line">        Thread removeT = new Thread(new Runnable() {</span><br><span class="line">            @Override</span><br><span class="line">            public void run() {</span><br><span class="line">                for(int i=0; i&lt;vector.size(); i++){</span><br><span class="line">                    vector.remove(i); // 移除 i 位置的元素</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">        Thread getT = new Thread(new Runnable() {</span><br><span class="line">            @Override</span><br><span class="line">            public void run() {</span><br><span class="line">                for(int i=0; i&lt;vector.size(); i++){</span><br><span class="line">                    System.out.println(vector.get(i)); // 获取 i 位置的元素</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">        getT.start();</span><br><span class="line">        removeT.start();</span><br><span class="line">        while(Thread.activeCount()&gt;20);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><p>如上代码，如果第一个线程在第二个线程之前把 i 位置上的元素移除了，由于第二个线程的 i 已经确定，如果此时的 i 正好是数组的最后一位， get() 方法二次获取就会发生数组下标越界的异常</p><h5 id="构造器-1"><a href="#构造器-1" class="headerlink" title="构造器"></a>构造器</h5><table><thead><tr><th align="center"><strong>构造器</strong></th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><strong>Vector</strong>()</td><td align="center">构造一个空向量，使其内部数据数组的大小为 <code>10</code> ，其标准容量增量为零。</td></tr><tr><td align="center"><strong>Vector</strong>(int initialCapacity)</td><td align="center">构造一个具有指定初始容量且容量增量等于零的空向量。</td></tr><tr><td align="center"><strong>Vector</strong>(int initialCapacity, int capacityIncrement)</td><td align="center">构造具有指定初始容量和容量增量的空向量。</td></tr><tr><td align="center"><strong>Vector</strong>(Collection&lt;? extends E&gt; c)</td><td align="center">按照集合的迭代器返回的顺序构造一个包含指定集合元素的向量。</td></tr></tbody></table><pre><code>public Vector(int initialCapacity, int capacityIncrement) {
    super();
    if (initialCapacity &lt; 0)
        throw new IllegalArgumentException("Illegal Capacity: "+
                                           initialCapacity);
    this.elementData = new Object[initialCapacity];
    this.capacityIncrement = capacityIncrement;
}

public Vector(int initialCapacity) {
    this(initialCapacity, 0);
}

public Vector() {
    this(10);
}

public Vector(Collection&lt;? extends E&gt; c) {
    Object[] a = c.toArray();
    elementCount = a.length;
    if (c.getClass() == ArrayList.class) {
        elementData = a;
    } else {
        elementData = Arrays.copyOf(a, elementCount, Object[].class);
    }
}
</code></pre><h5 id="方法概要-1"><a href="#方法概要-1" class="headerlink" title="方法概要"></a>方法概要</h5><table><thead><tr><th align="center"><strong>变量和类型</strong></th><th align="center"><strong>方法</strong></th><th align="center"><strong>描述</strong></th></tr></thead><tbody><tr><td align="center">void</td><td align="center"><strong>add</strong>(int index, E element)</td><td align="center">将指定元素插入此Vector中的指定位置。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>add</strong>(E e)</td><td align="center">将指定的元素追加到此Vector的末尾。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>addAll</strong>(int index, Collection&lt;? extends E&gt; c)</td><td align="center">将指定Collection中的所有元素插入到此Vector中的指定位置。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>addAll</strong>(Collection&lt;? extends E&gt; c)</td><td align="center">将指定Collection中的所有元素追加到此Vector的末尾，按照指定Collection的Iterator返回的顺序。</td></tr><tr><td align="center">void</td><td align="center"><strong>addElement</strong>(E obj)</td><td align="center">将指定的组件添加到此向量的末尾，将其大小增加1。</td></tr><tr><td align="center">int</td><td align="center"><strong>capacity</strong>()</td><td align="center">返回此向量的当前容量。</td></tr><tr><td align="center">void</td><td align="center"><strong>clear</strong>()</td><td align="center">从此Vector中删除所有元素。</td></tr><tr><td align="center">Object</td><td align="center"><strong>clone</strong>()</td><td align="center">返回此向量的副本。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>contains</strong>(Object o)</td><td align="center">如果此向量包含指定的元素，则返回 <code>true</code> 。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>containsAll</strong>(Collection&lt;?&gt; c)</td><td align="center">如果此Vector包含指定Collection中的所有元素，则返回true。</td></tr><tr><td align="center">void</td><td align="center"><strong>copyInto</strong>(Object[] anArray)</td><td align="center">将此向量的组件复制到指定的数组中。</td></tr><tr><td align="center">E</td><td align="center"><strong>elementAt</strong>(int index)</td><td align="center">返回指定索引处的组件。</td></tr><tr><td align="center">Enumeration<e></e></td><td align="center"><strong>elements</strong>()</td><td align="center">返回此向量的组件的枚举。</td></tr><tr><td align="center">void</td><td align="center"><strong>ensureCapacity</strong>(int minCapacity)</td><td align="center">如有必要，增加此向量的容量，以确保它至少可以容纳由minimum capacity参数指定的组件数。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>equals</strong>(Object o)</td><td align="center">将指定的Object与此Vector进行比较以获得相等性。</td></tr><tr><td align="center">E</td><td align="center"><strong>firstElement</strong>()</td><td align="center">返回此向量的第一个组件（索引 <code>0</code>处的项）。</td></tr><tr><td align="center">void</td><td align="center"><strong>forEach</strong>(Consumer&lt;? super E&gt; action)</td><td align="center">对 <code>Iterable</code>每个元素执行给定操作，直到处理 <code>Iterable</code>所有元素或操作引发异常。</td></tr><tr><td align="center">E</td><td align="center"><strong>get</strong>(int index)</td><td align="center">返回此Vector中指定位置的元素。</td></tr><tr><td align="center">int</td><td align="center"><strong>hashCode</strong>()</td><td align="center">返回此Vector的哈希码值。</td></tr><tr><td align="center">int</td><td align="center"><strong>indexOf</strong>(Object o)</td><td align="center">返回此向量中第一次出现的指定元素的索引，如果此向量不包含该元素，则返回-1。</td></tr><tr><td align="center">int</td><td align="center"><strong>indexOf</strong>(Object o, int index)</td><td align="center">返回此向量中第一次出现的指定元素的索引，从 <code>index</code>向前搜索，如果找不到该元素，则返回-1。</td></tr><tr><td align="center">void</td><td align="center"><strong>insertElementAt</strong>(E obj, int index)</td><td align="center">将指定对象作为此向量中的组件插入指定的 <code>index</code> 。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>isEmpty</strong>()</td><td align="center">测试此向量是否没有组件。</td></tr><tr><td align="center">Iterator<e></e></td><td align="center"><strong>iterator</strong>()</td><td align="center">以适当的顺序返回此列表中元素的迭代器。</td></tr><tr><td align="center">E</td><td align="center"><strong>lastElement</strong>()</td><td align="center">返回向量的最后一个组件。</td></tr><tr><td align="center">int</td><td align="center"><strong>lastIndexOf</strong>(Object o)</td><td align="center">返回此向量中指定元素最后一次出现的索引，如果此向量不包含该元素，则返回-1。</td></tr><tr><td align="center">int</td><td align="center"><strong>lastIndexOf</strong>(Object o, int index)</td><td align="center">返回此向量中最后一次出现的指定元素的索引，从 <code>index</code>向后搜索，如果找不到该元素，则返回-1。</td></tr><tr><td align="center">ListIterator<e></e></td><td align="center"><strong>listIterator</strong>()</td><td align="center">返回此列表中元素的列表迭代器（按适当顺序）。</td></tr><tr><td align="center">ListIterator<e></e></td><td align="center"><strong>listIterator</strong>(int index)</td><td align="center">从列表中的指定位置开始，返回列表中元素的列表迭代器（按正确顺序）。</td></tr><tr><td align="center">E</td><td align="center"><strong>remove</strong>(int index)</td><td align="center">删除此Vector中指定位置的元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>remove</strong>(Object o)</td><td align="center">删除此向量中第一次出现的指定元素如果向量不包含该元素，则不会更改。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>removeAll</strong>(Collection&lt;?&gt; c)</td><td align="center">从此Vector中删除指定Collection中包含的所有元素。</td></tr><tr><td align="center">void</td><td align="center"><strong>removeAllElements</strong>()</td><td align="center">从此向量中移除所有组件并将其大小设置为零。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>removeElement</strong>(Object obj)</td><td align="center">从此向量中移除参数的第一个（索引最低）事件。</td></tr><tr><td align="center">void</td><td align="center"><strong>removeElementAt</strong>(int index)</td><td align="center">删除指定索引处的组件。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>removeIf</strong>(Predicate&lt;? super E&gt; filter)</td><td align="center">删除此集合中满足给定谓词的所有元素。</td></tr><tr><td align="center">protected void</td><td align="center"><strong>removeRange</strong>(int fromIndex, int toIndex)</td><td align="center">从此列表中删除索引介于 <code>fromIndex</code> （含）和 <code>toIndex</code> （独占）之间的所有元素。</td></tr><tr><td align="center">void</td><td align="center"><strong>replaceAll</strong>(UnaryOperator<e>operator)</e></td><td align="center">将该列表的每个元素替换为将运算符应用于该元素的结果。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>retainAll</strong>(Collection&lt;?&gt; c)</td><td align="center">仅保留此Vector中包含在指定Collection中的元素。</td></tr><tr><td align="center">E</td><td align="center"><strong>set</strong>(int index, E element)</td><td align="center">用指定的元素替换此Vector中指定位置的元素。</td></tr><tr><td align="center">void</td><td align="center"><strong>setElementAt</strong>(E obj, int index)</td><td align="center">将此向量的指定 <code>index</code>处的组件设置为指定对象。</td></tr><tr><td align="center">void</td><td align="center"><strong>setSize</strong>(int newSize)</td><td align="center">设置此向量的大小。</td></tr><tr><td align="center">int</td><td align="center"><strong>size</strong>()</td><td align="center">返回此向量中的组件数。</td></tr><tr><td align="center">Spliterator<e></e></td><td align="center"><strong>spliterator</strong>()</td><td align="center">在此列表中的元素上创建 <em>late-binding</em> 和<em>失败快速</em> <em>Spliterator</em> 。</td></tr><tr><td align="center">List<e></e></td><td align="center"><strong>subList</strong>(int fromIndex, int toIndex)</td><td align="center">返回此List的部分在fromIndex（包含）和toIndex（独占）之间的视图。</td></tr><tr><td align="center">Object[]</td><td align="center"><strong>toArray</strong>()</td><td align="center">以正确的顺序返回包含此Vector中所有元素的数组。</td></tr><tr><td align="center"><t>T[]</t></td><td align="center"><strong>toArray</strong>(T[] a)</td><td align="center">以正确的顺序返回包含此Vector中所有元素的数组; 返回数组的运行时类型是指定数组的运行时类型。</td></tr><tr><td align="center">String</td><td align="center"><strong>toString</strong>()</td><td align="center">返回此Vector的字符串表示形式，包含每个元素的String表示形式。</td></tr><tr><td align="center">void</td><td align="center"><strong>trimToSize</strong>()</td><td align="center">修剪此向量的容量为向量的当前大小。</td></tr></tbody></table><h4 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a><em>LinkedList</em></h4><p><em>LinkedList</em> 继承了 <em>AbstractSequentialList</em> 抽象基类，实现了 <em>List</em> 和 <em>Deque</em> 接口</p><p>基于双向链表实现，只能通过顺序访问，可以快速地在链表中间插入和删除元素</p><p>对 <em>List</em> 和 <em>Deque</em> 接口的实现使得 <em>LinkedList</em> 可以看作一个顺序容器，也可以看作一个栈或者队列，如果需要用到栈或者队列可以考虑 <em>LinkedList</em>，不过一般优先考虑的是 <em>ArrayDeque</em>，它比 <em>LinkedList</em> 作为栈或队列使用时具有更好的性能</p><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318d5dbfdec.png" alt="LinkedList"></p><h5 id="底层数据结构-1"><a href="#底层数据结构-1" class="headerlink" title="底层数据结构"></a>底层数据结构</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">transient int size = 0; // 长度</span><br><span class="line"></span><br><span class="line">transient Node&lt;E&gt; first; // 头指针</span><br><span class="line"></span><br><span class="line">transient Node&lt;E&gt; last; // 尾指针</span><br></pre></td></tr></table></figure></div><p><em>Node</em> 作为内部私有类：</p><pre><code>private static class Node&lt;E&gt; { // 双向链表节点
    E item;
    Node&lt;E&gt; next;
    Node&lt;E&gt; prev;

    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) {
        this.item = element;
        this.next = next;
        this.prev = prev;
    }
}
</code></pre><h5 id="构造器-2"><a href="#构造器-2" class="headerlink" title="构造器"></a>构造器</h5><table><thead><tr><th align="center"><strong>构造器</strong></th><th align="center"><strong>描述</strong></th></tr></thead><tbody><tr><td align="center"><strong>LinkedList</strong>()</td><td align="center">构造一个空列表。</td></tr><tr><td align="center"><strong>LinkedList</strong>(Collection&lt;? extends E&gt; c)</td><td align="center">按照集合的迭代器返回的顺序构造一个包含指定集合元素的列表。</td></tr></tbody></table><pre><code>// 空 list
public LinkedList() {
}

// 通过一个 Collection 集合进行赋值
public LinkedList(Collection&lt;? extends E&gt; c) {
    this();
    addAll(c);
}
</code></pre><h5 id="方法概要-2"><a href="#方法概要-2" class="headerlink" title="方法概要"></a>方法概要</h5><table><thead><tr><th align="center"><strong>变量和类型</strong></th><th align="center"><strong>方法</strong></th><th align="center"><strong>描述</strong></th></tr></thead><tbody><tr><td align="center">void</td><td align="center"><strong>add</strong>(int index, E element)</td><td align="center">将指定元素插入此列表中的指定位置。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>add</strong>(E e)</td><td align="center">将指定的元素追加到此列表的末尾。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>addAll</strong>(int index, Collection&lt;? extends E&gt; c)</td><td align="center">从指定位置开始，将指定集合中的所有元素插入此列表。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>addAll</strong>(Collection&lt;? extends E&gt; c)</td><td align="center">将指定集合中的所有元素按指定集合的迭代器返回的顺序附加到此列表的末尾。</td></tr><tr><td align="center">void</td><td align="center"><strong>addFirst</strong>(E e)</td><td align="center">在此列表的开头插入指定的元素。</td></tr><tr><td align="center">void</td><td align="center"><strong>addLast</strong>(E e)</td><td align="center">将指定的元素追加到此列表的末尾。</td></tr><tr><td align="center">void</td><td align="center"><strong>clear</strong>()</td><td align="center">从此列表中删除所有元素。</td></tr><tr><td align="center">Object</td><td align="center"><strong>clone</strong>()</td><td align="center">返回此 <code>LinkedList</code>的浅表副本。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>contains</strong>(Object o)</td><td align="center">如果此列表包含指定的元素，则返回 <code>true</code> 。</td></tr><tr><td align="center">Iterator<e></e></td><td align="center"><strong>descendingIterator</strong>()</td><td align="center">以相反的顺序返回此双端队列中元素的迭代器。</td></tr><tr><td align="center">E</td><td align="center"><strong>element</strong>()</td><td align="center">检索但不删除此列表的头部（第一个元素）。</td></tr><tr><td align="center">E</td><td align="center"><strong>get</strong>(int index)</td><td align="center">返回此列表中指定位置的元素。</td></tr><tr><td align="center">E</td><td align="center"><strong>getFirst</strong>()</td><td align="center">返回此列表中的第一个元素。</td></tr><tr><td align="center">E</td><td align="center"><strong>getLast</strong>()</td><td align="center">返回此列表中的最后一个元素。</td></tr><tr><td align="center">int</td><td align="center"><strong>indexOf</strong>(Object o)</td><td align="center">返回此列表中第一次出现的指定元素的索引，如果此列表不包含该元素，则返回-1。</td></tr><tr><td align="center">int</td><td align="center"><strong>lastIndexOf</strong>(Object o)</td><td align="center">返回此列表中指定元素最后一次出现的索引，如果此列表不包含该元素，则返回-1。</td></tr><tr><td align="center">ListIterator<e></e></td><td align="center"><strong>listIterator</strong>(int index)</td><td align="center">从列表中的指定位置开始，返回此列表中元素的列表迭代器（按正确顺序）。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>offer</strong>(E e)</td><td align="center">将指定的元素添加为此列表的尾部（最后一个元素）。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>offerFirst</strong>(E e)</td><td align="center">在此列表的前面插入指定的元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>offerLast</strong>(E e)</td><td align="center">在此列表的末尾插入指定的元素。</td></tr><tr><td align="center">E</td><td align="center"><strong>peek</strong>()</td><td align="center">检索但不删除此列表的头部（第一个元素）。</td></tr><tr><td align="center">E</td><td align="center"><strong>peekFirst</strong>()</td><td align="center">检索但不删除此列表的第一个元素，如果此列表为空，则返回 <code>null</code> 。</td></tr><tr><td align="center">E</td><td align="center"><strong>peekLast</strong>()</td><td align="center">检索但不删除此列表的最后一个元素，如果此列表为空，则返回 <code>null</code> 。</td></tr><tr><td align="center">E</td><td align="center"><strong>poll</strong>()</td><td align="center">检索并删除此列表的头部（第一个元素）。</td></tr><tr><td align="center">E</td><td align="center"><strong>pollFirst</strong>()</td><td align="center">检索并删除此列表的第一个元素，如果此列表为空，则返回 <code>null</code> 。</td></tr><tr><td align="center">E</td><td align="center"><strong>pollLast</strong>()</td><td align="center">检索并删除此列表的最后一个元素，如果此列表为空，则返回 <code>null</code> 。</td></tr><tr><td align="center">E</td><td align="center"><strong>pop</strong>()</td><td align="center">弹出此列表所代表的堆栈中的元素。</td></tr><tr><td align="center">void</td><td align="center"><strong>push</strong>(E e)</td><td align="center">将元素推送到此列表所表示的堆栈上。</td></tr><tr><td align="center">E</td><td align="center"><strong>remove</strong>()</td><td align="center">检索并删除此列表的头部（第一个元素）。</td></tr><tr><td align="center">E</td><td align="center"><strong>remove</strong>(int index)</td><td align="center">删除此列表中指定位置的元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>remove</strong>(Object o)</td><td align="center">从该列表中删除指定元素的第一个匹配项（如果存在）。</td></tr><tr><td align="center">E</td><td align="center"><strong>removeFirst</strong>()</td><td align="center">从此列表中删除并返回第一个元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>removeFirstOccurrence</strong>(Object o)</td><td align="center">删除此列表中第一次出现的指定元素（从头到尾遍历列表时）。</td></tr><tr><td align="center">E</td><td align="center"><strong>removeLast</strong>()</td><td align="center">从此列表中删除并返回最后一个元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>removeLastOccurrence</strong>(Object o)</td><td align="center">删除此列表中最后一次出现的指定元素（从头到尾遍历列表时）。</td></tr><tr><td align="center">E</td><td align="center"><strong>set</strong>(int index, E element)</td><td align="center">用指定的元素替换此列表中指定位置的元素。</td></tr><tr><td align="center">int</td><td align="center"><strong>size</strong>()</td><td align="center">返回此列表中的元素数。</td></tr><tr><td align="center">Spliterator<e></e></td><td align="center"><strong>spliterator</strong>()</td><td align="center">在此列表中的元素上创建 <em>late-binding</em> <em>和故障快速 Spliterator</em> 。</td></tr><tr><td align="center">Object[]</td><td align="center"><strong>toArray</strong>()</td><td align="center">以适当的顺序（从第一个元素到最后一个元素）返回包含此列表中所有元素的数组。</td></tr><tr><td align="center"><t>T[]</t></td><td align="center"><strong>toArray</strong>(T[] a)</td><td align="center">以适当的顺序返回包含此列表中所有元素的数组（从第一个元素到最后一个元素）; 返回数组的运行时类型是指定数组的运行时类型。</td></tr></tbody></table><h5 id="getFirst"><a href="#getFirst" class="headerlink" title="getFirst"></a>getFirst</h5><pre><code>// 取链表头部的元素
public E getFirst() {
    final Node&lt;E&gt; f = first;
    if (f == null)
        throw new NoSuchElementException();
    return f.item;
}
</code></pre><h5 id="getLast"><a href="#getLast" class="headerlink" title="getLast"></a>getLast</h5><pre><code>// 取链表尾部的元素
public E getLast() {
    final Node&lt;E&gt; l = last;
    if (l == null)
        throw new NoSuchElementException();
    return l.item;
}
</code></pre><h5 id="unlinkFirst"><a href="#unlinkFirst" class="headerlink" title="unlinkFirst"></a>unlinkFirst</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 首元素断链</span><br><span class="line">private E unlinkFirst(Node&lt;E&gt; f) {</span><br><span class="line">    // assert f == first &amp;&amp; f != null;</span><br><span class="line">    final E element = f.item;</span><br><span class="line">    final Node&lt;E&gt; next = f.next;</span><br><span class="line">    f.item = null;</span><br><span class="line">    f.next = null; // help GC</span><br><span class="line">    first = next;</span><br><span class="line">    if (next == null)</span><br><span class="line">        last = null;</span><br><span class="line">    else</span><br><span class="line">        next.prev = null;</span><br><span class="line">    size--;</span><br><span class="line">    modCount++;</span><br><span class="line">    return element;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="unlinkLast"><a href="#unlinkLast" class="headerlink" title="unlinkLast"></a>unlinkLast</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 尾元素断链</span><br><span class="line">private E unlinkLast(Node&lt;E&gt; l) {</span><br><span class="line">    // assert l == last &amp;&amp; l != null;</span><br><span class="line">    final E element = l.item;</span><br><span class="line">    final Node&lt;E&gt; prev = l.prev;</span><br><span class="line">    l.item = null;</span><br><span class="line">    l.prev = null; // help GC</span><br><span class="line">    last = prev;</span><br><span class="line">    if (prev == null)</span><br><span class="line">        first = null;</span><br><span class="line">    else</span><br><span class="line">        prev.next = null;</span><br><span class="line">    size--;</span><br><span class="line">    modCount++;</span><br><span class="line">    return element;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="unlink"><a href="#unlink" class="headerlink" title="unlink"></a>unlink</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 断链</span><br><span class="line">E unlink(Node&lt;E&gt; x) {</span><br><span class="line">    // assert x != null;</span><br><span class="line">    final E element = x.item;</span><br><span class="line">    final Node&lt;E&gt; next = x.next;</span><br><span class="line">    final Node&lt;E&gt; prev = x.prev;</span><br><span class="line"></span><br><span class="line">    if (prev == null) { // 如果是头节点</span><br><span class="line">        first = next;</span><br><span class="line">    } else {</span><br><span class="line">        prev.next = next;</span><br><span class="line">        x.prev = null;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    if (next == null) { // 如果是尾节点</span><br><span class="line">        last = prev;</span><br><span class="line">    } else {</span><br><span class="line">        next.prev = prev;</span><br><span class="line">        x.next = null;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    x.item = null;</span><br><span class="line">    size--;</span><br><span class="line">    modCount++;</span><br><span class="line">    return element;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="removeFirst"><a href="#removeFirst" class="headerlink" title="removeFirst"></a>removeFirst</h5><pre><code>public E removeFirst() {
    final Node&lt;E&gt; f = first;
    if (f == null)
        throw new NoSuchElementException();
    return unlinkFirst(f);
}
</code></pre><h5 id="removeLast"><a href="#removeLast" class="headerlink" title="removeLast"></a>removeLast</h5><pre><code>public E removeLast() {
    final Node&lt;E&gt; l = last;
    if (l == null)
        throw new NoSuchElementException();
    return unlinkLast(l);
}
</code></pre><h5 id="linkFirst"><a href="#linkFirst" class="headerlink" title="linkFirst"></a>linkFirst</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 首元素建立连接</span><br><span class="line">private void linkFirst(E e) {</span><br><span class="line">    final Node&lt;E&gt; f = first;</span><br><span class="line">    final Node&lt;E&gt; newNode = new Node&lt;&gt;(null, e, f);</span><br><span class="line">    first = newNode;</span><br><span class="line">    if (f == null)</span><br><span class="line">        last = newNode;</span><br><span class="line">    else</span><br><span class="line">        f.prev = newNode;</span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="linkLast"><a href="#linkLast" class="headerlink" title="linkLast"></a>linkLast</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 尾元素建立连接</span><br><span class="line">void linkLast(E e) {</span><br><span class="line">    final Node&lt;E&gt; l = last;</span><br><span class="line">    final Node&lt;E&gt; newNode = new Node&lt;&gt;(l, e, null);</span><br><span class="line">    last = newNode;</span><br><span class="line">    if (l == null)</span><br><span class="line">        first = newNode;</span><br><span class="line">    else</span><br><span class="line">        l.next = newNode;</span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="linkBefore"><a href="#linkBefore" class="headerlink" title="linkBefore"></a>linkBefore</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 插入在某节点前面</span><br><span class="line">void linkBefore(E e, Node&lt;E&gt; succ) {</span><br><span class="line">    // assert succ != null;</span><br><span class="line">    final Node&lt;E&gt; pred = succ.prev; // 保存插入位置的前驱</span><br><span class="line">    final Node&lt;E&gt; newNode = new Node&lt;&gt;(pred, e, succ);</span><br><span class="line">    succ.prev = newNode; // 插入位置的前驱改为新节点</span><br><span class="line">    if (pred == null)</span><br><span class="line">        first = newNode; // 插入位置为 0 </span><br><span class="line">    else</span><br><span class="line">        pred.next = newNode; 插入位置前驱的后继赋值</span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="node"><a href="#node" class="headerlink" title="node"></a>node</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 查找相应索引的节点</span><br><span class="line">Node&lt;E&gt; node(int index) {</span><br><span class="line">    // assert isElementIndex(index);</span><br><span class="line"></span><br><span class="line">    if (index &lt; (size &gt;&gt; 1)) { // 根据索引大小决定从头还是尾进行查找</span><br><span class="line">        Node&lt;E&gt; x = first;</span><br><span class="line">        for (int i = 0; i &lt; index; i++)</span><br><span class="line">            x = x.next;</span><br><span class="line">        return x;</span><br><span class="line">    } else {</span><br><span class="line">        Node&lt;E&gt; x = last;</span><br><span class="line">        for (int i = size - 1; i &gt; index; i--)</span><br><span class="line">            x = x.prev;</span><br><span class="line">        return x;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="addFirst"><a href="#addFirst" class="headerlink" title="addFirst"></a>addFirst</h5><pre><code>public void addFirst(E e) {
    linkFirst(e);
}
</code></pre><h5 id="addLast"><a href="#addLast" class="headerlink" title="addLast"></a>addLast</h5><pre><code>public void addLast(E e) {
    linkLast(e);
}
</code></pre><h5 id="add-1"><a href="#add-1" class="headerlink" title="add"></a>add</h5><p>有两个方法，一个是直接在末尾插入元素，还一个是在指定索引下插入元素</p><pre><code>// 直接在末尾插入元素
public boolean add(E e) {
    linkLast(e);
    return true;
}

// 在指定索引下插入元素
public void add(int index, E element) {
    checkPositionIndex(index); // index &gt;= 0 &amp;&amp; index &lt;= size

    if (index == size) // 插入链表的索引在末尾
        linkLast(element);
    else
        linkBefore(element, node(index)); // 通过 index 找到要插入的位置
}
</code></pre><h5 id="remove-1"><a href="#remove-1" class="headerlink" title="remove"></a>remove</h5><p>两种实现方法，一种是直接移除链表头部元素，还一种是移除指定索引的元素</p><pre><code>// 移除链表头部元素
public E remove() {
    return removeFirst();
}

// 移除指定索引元素
public E remove(int index) {
    checkElementIndex(index); // index &gt;= 0 &amp;&amp; index &lt; size
    return unlink(node(index));
}

// 移除第一个出现的指定元素
public boolean remove(Object o) {
    if (o == null) {
        for (Node&lt;E&gt; x = first; x != null; x = x.next) {
            if (x.item == null) {
                unlink(x);
                return true;
            }
        }
    } else {
        for (Node&lt;E&gt; x = first; x != null; x = x.next) {
            if (o.equals(x.item)) {
                unlink(x);
                return true;
            }
        }
    }
    return false;
}
</code></pre><h5 id="addAll-1"><a href="#addAll-1" class="headerlink" title="addAll"></a>addAll</h5><p>直接一次性把一堆元素添加在指定索引位置</p><pre><code>public boolean addAll(Collection&lt;? extends E&gt; c) {
    return addAll(size, c);
}

public boolean addAll(int index, Collection&lt;? extends E&gt; c) {
    checkPositionIndex(index); // index &gt;= 0 &amp;&amp; index &lt;= size

    Object[] a = c.toArray();
    int numNew = a.length;
    if (numNew == 0)
        return false;

    Node&lt;E&gt; pred, succ;
    if (index == size) { // 插入位置在末尾
        succ = null;
        pred = last;
    } else {
        succ = node(index);
        pred = succ.prev;
    }

    for (Object o : a) { // 枚举插入元素
        @SuppressWarnings("unchecked") E e = (E) o;
        Node&lt;E&gt; newNode = new Node&lt;&gt;(pred, e, null);
        if (pred == null)
            first = newNode;
        else
            pred.next = newNode;
        pred = newNode;
    }

    if (succ == null) { // 如果插入位置是末尾
        last = pred;
    } else {
        pred.next = succ;
        succ.prev = pred;
    }

    size += numNew; // 更新大小
    modCount++;
    return true;
}
</code></pre><h5 id="get-1"><a href="#get-1" class="headerlink" title="get"></a>get</h5><pre><code>// 取 index 位置的元素
public E get(int index) {
    checkElementIndex(index); // index &gt;= 0 &amp;&amp; index &lt; size
    return node(index).item;
}
</code></pre><h5 id="set-1"><a href="#set-1" class="headerlink" title="set"></a>set</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public E set(int index, E element) {</span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    Node&lt;E&gt; x = node(index);</span><br><span class="line">    E oldVal = x.item;</span><br><span class="line">    x.item = element;</span><br><span class="line">    return oldVal;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="indexOf-1"><a href="#indexOf-1" class="headerlink" title="indexOf"></a>indexOf</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 从前往后查找第一个与之相等的数</span><br><span class="line">public int indexOf(Object o) {</span><br><span class="line">    int index = 0;</span><br><span class="line">    if (o == null) {</span><br><span class="line">        for (Node&lt;E&gt; x = first; x != null; x = x.next) {</span><br><span class="line">            if (x.item == null)</span><br><span class="line">                return index;</span><br><span class="line">            index++;</span><br><span class="line">        }</span><br><span class="line">    } else {</span><br><span class="line">        for (Node&lt;E&gt; x = first; x != null; x = x.next) {</span><br><span class="line">            if (o.equals(x.item))</span><br><span class="line">                return index;</span><br><span class="line">            index++;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return -1;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="lastIndexOf-1"><a href="#lastIndexOf-1" class="headerlink" title="lastIndexOf"></a>lastIndexOf</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 从后往前查找第一个与之相等的数</span><br><span class="line">public int lastIndexOf(Object o) {</span><br><span class="line">    int index = size;</span><br><span class="line">    if (o == null) {</span><br><span class="line">        for (Node&lt;E&gt; x = last; x != null; x = x.prev) {</span><br><span class="line">            index--;</span><br><span class="line">            if (x.item == null)</span><br><span class="line">                return index;</span><br><span class="line">        }</span><br><span class="line">    } else {</span><br><span class="line">        for (Node&lt;E&gt; x = last; x != null; x = x.prev) {</span><br><span class="line">            index--;</span><br><span class="line">            if (o.equals(x.item))</span><br><span class="line">                return index;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return -1;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="peek"><a href="#peek" class="headerlink" title="peek"></a>peek</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 返回第一个元素</span><br><span class="line">public E peek() {</span><br><span class="line">    final Node&lt;E&gt; f = first;</span><br><span class="line">    return (f == null) ? null : f.item;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="element"><a href="#element" class="headerlink" title="element"></a>element</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 返回第一个元素</span><br><span class="line">public E element() {</span><br><span class="line">    return getFirst();</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="poll"><a href="#poll" class="headerlink" title="poll"></a>poll</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 返回并删除第一个元素</span><br><span class="line">public E poll() {</span><br><span class="line">    final Node&lt;E&gt; f = first;</span><br><span class="line">    return (f == null) ? null : unlinkFirst(f);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="offer"><a href="#offer" class="headerlink" title="offer"></a>offer</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 添加元素</span><br><span class="line">public boolean offer(E e) {</span><br><span class="line">    return add(e);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="offerFirst"><a href="#offerFirst" class="headerlink" title="offerFirst"></a>offerFirst</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 添加元素到链表头部</span><br><span class="line">public boolean offerFirst(E e) {</span><br><span class="line">    addFirst(e);</span><br><span class="line">    return true;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="offerLast"><a href="#offerLast" class="headerlink" title="offerLast"></a>offerLast</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 添加元素到链表尾部</span><br><span class="line">public boolean offerLast(E e) {</span><br><span class="line">    addLast(e);</span><br><span class="line">    return true;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="peekFirst"><a href="#peekFirst" class="headerlink" title="peekFirst"></a>peekFirst</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 返回首元素</span><br><span class="line">public E peekFirst() {</span><br><span class="line">    final Node&lt;E&gt; f = first;</span><br><span class="line">    return (f == null) ? null : f.item;</span><br><span class="line"> }</span><br></pre></td></tr></table></figure></div><h5 id="peekLast"><a href="#peekLast" class="headerlink" title="peekLast"></a>peekLast</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 返回尾元素</span><br><span class="line">public E peekLast() {</span><br><span class="line">    final Node&lt;E&gt; l = last;</span><br><span class="line">    return (l == null) ? null : l.item;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="pollFirst"><a href="#pollFirst" class="headerlink" title="pollFirst"></a>pollFirst</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 删除首元素</span><br><span class="line">public E pollFirst() {</span><br><span class="line">    final Node&lt;E&gt; f = first;</span><br><span class="line">    return (f == null) ? null : unlinkFirst(f);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="pollLast"><a href="#pollLast" class="headerlink" title="pollLast"></a>pollLast</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 删除尾元素</span><br><span class="line">public E pollLast() {</span><br><span class="line">    final Node&lt;E&gt; l = last;</span><br><span class="line">    return (l == null) ? null : unlinkLast(l);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="push"><a href="#push" class="headerlink" title="push"></a>push</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 压入栈顶</span><br><span class="line">public void push(E e) {</span><br><span class="line">    addFirst(e);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="pop"><a href="#pop" class="headerlink" title="pop"></a>pop</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 移除栈顶元素</span><br><span class="line">public E pop() {</span><br><span class="line">    return removeFirst();</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="removeFirstOccurrence"><a href="#removeFirstOccurrence" class="headerlink" title="removeFirstOccurrence"></a>removeFirstOccurrence</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 移除第一个相同的元素</span><br><span class="line">public boolean removeFirstOccurrence(Object o) {</span><br><span class="line">    return remove(o);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="removeLastOccurrence"><a href="#removeLastOccurrence" class="headerlink" title="removeLastOccurrence"></a>removeLastOccurrence</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// 移除最后一个相同的元素</span><br><span class="line">public boolean removeLastOccurrence(Object o) {</span><br><span class="line">    if (o == null) {</span><br><span class="line">        for (Node&lt;E&gt; x = last; x != null; x = x.prev) {</span><br><span class="line">            if (x.item == null) {</span><br><span class="line">                unlink(x);</span><br><span class="line">                return true;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    } else {</span><br><span class="line">        for (Node&lt;E&gt; x = last; x != null; x = x.prev) {</span><br><span class="line">            if (o.equals(x.item)) {</span><br><span class="line">                unlink(x);</span><br><span class="line">                return true;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return false;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a><em>Set</em></h3><h4 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a><em>TreeSet</em></h4><p>基于红黑树实现，支持有序性操作，例如根据一个范围查找元素</p><p>查找效率不如 <em>HashSet</em>，<em>HashSet</em> 查找的时间复杂度为 O(1)，<em>TreeSet</em> 为 O(logN)</p><p><em>TreeSet</em> 的底层实际是 <em>TreeMap</em> 的套壳，使用 <em>TreeMap</em> 的 key 来存储元素</p><h5 id="底层数据结构-2"><a href="#底层数据结构-2" class="headerlink" title="底层数据结构"></a>底层数据结构</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private transient NavigableMap&lt;E,Object&gt; m; // 实则 Map 的套壳</span><br></pre></td></tr></table></figure></div><h5 id="构造器-3"><a href="#构造器-3" class="headerlink" title="构造器"></a>构造器</h5><table><thead><tr><th align="center"><strong>构造器</strong></th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><strong>TreeSet</strong>()</td><td align="center">构造一个新的空树集，根据其元素的自然顺序进行排序。</td></tr><tr><td align="center"><strong>TreeSet</strong>(Collection&lt;? extends E&gt; c)</td><td align="center">构造一个新的树集，其中包含指定集合中的元素，并根据其元素的 <em>自然顺序进行排序</em> 。</td></tr><tr><td align="center"><strong>TreeSet</strong>(Comparator&lt;? super E&gt; comparator)</td><td align="center">构造一个新的空树集，根据指定的比较器进行排序。</td></tr><tr><td align="center"><strong>TreeSet</strong>(SortedSet<e>s)</e></td><td align="center">构造一个包含相同元素并使用与指定有序集相同排序的新树集。</td></tr></tbody></table><pre><code>// 底层 Map
TreeSet(NavigableMap&lt;E,Object&gt; m) {
    this.m = m;
}

// 以自然排序的方式创建一个新的 TreeMap，根据该 TreeMap 创建一个 TreeSet，使用 TreeMap 的 key 来保存 Set 集合中的元素
public TreeSet() {
    this(new TreeMap&lt;&gt;());
}

// 以自定义排序的方式创建一个新的 TreeMap，根据该 TreeMap 创建一个 TreeSet，使用 TreeMap 的 key 来保存 Set 集合中的元素
public TreeSet(Comparator&lt;? super E&gt; comparator) {
    this(new TreeMap&lt;&gt;(comparator));
}

// 先调用无参构造器，以自然排序的方式创建一个 TreeSet，再通过 addAll 方法赋值
public TreeSet(Collection&lt;? extends E&gt; c) {
    this();
    addAll(c);
}

// 先调用自定义排序构造器，以自定义排序的方式创建一个 TreeSet，再通过 addAll 方法赋值
public TreeSet(SortedSet&lt;E&gt; s) {
    this(s.comparator());
    addAll(s);
}
</code></pre><h5 id="方法概要-3"><a href="#方法概要-3" class="headerlink" title="方法概要"></a>方法概要</h5><table><thead><tr><th align="center"><strong>变量和类型</strong></th><th align="center">方法</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">boolean</td><td align="center"><strong>add</strong>(E e)</td><td align="center">如果指定的元素尚不存在，则将其添加到此集合中。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>addAll</strong>(Collection&lt;? extends E&gt; c)</td><td align="center">将指定集合中的所有元素添加到此集合中。</td></tr><tr><td align="center">E</td><td align="center"><strong>ceiling</strong>(E e)</td><td align="center">返回此set中大于或等于给定元素的 <code>null</code>元素，如果没有这样的元素，则 <code>null</code> 。</td></tr><tr><td align="center">void</td><td align="center"><strong>clear</strong>()</td><td align="center">从该集中删除所有元素。</td></tr><tr><td align="center">Object</td><td align="center"><strong>clone</strong>()</td><td align="center">返回此 <code>TreeSet</code>实例的浅表副本。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>contains</strong>(Object o)</td><td align="center">如果此set包含指定的元素，则返回 <code>true</code> 。</td></tr><tr><td align="center">Iterator<e></e></td><td align="center"><strong>descendingIterator</strong>()</td><td align="center">以降序返回此集合中元素的迭代器。</td></tr><tr><td align="center">NavigableSet<e></e></td><td align="center"><strong>descendingSet</strong>()</td><td align="center">返回此set中包含的元素的逆序视图。</td></tr><tr><td align="center">E</td><td align="center"><strong>first</strong>()</td><td align="center">返回此集合中当前的第一个（最低）元素。</td></tr><tr><td align="center">E</td><td align="center"><strong>floor</strong>(E e)</td><td align="center">返回此set中小于或等于给定元素的最大元素，如果没有这样的元素，则 <code>null</code> 。</td></tr><tr><td align="center">SortedSet<e></e></td><td align="center"><strong>headSet</strong>(E toElement)</td><td align="center">返回此set的部分视图，其元素严格小于 <code>toElement</code> 。</td></tr><tr><td align="center">NavigableSet<e></e></td><td align="center"><strong>headSet</strong>(E toElement, boolean inclusive)</td><td align="center">返回此set的部分视图，其元素小于（或等于，如果 <code>inclusive</code>为true） <code>toElement</code> 。</td></tr><tr><td align="center">E</td><td align="center"><strong>higher</strong>(E e)</td><td align="center">返回此集合中的最小元素严格大于给定元素，如果没有这样的元素，则 <code>null</code> 。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>isEmpty</strong>()</td><td align="center">如果此集合不包含任何元素，则返回 <code>true</code> 。</td></tr><tr><td align="center">Iterator<e></e></td><td align="center"><strong>iterator</strong>()</td><td align="center">以升序返回此集合中元素的迭代器。</td></tr><tr><td align="center">E</td><td align="center"><strong>last</strong>()</td><td align="center">返回此集合中当前的最后一个（最高）元素。</td></tr><tr><td align="center">E</td><td align="center"><strong>lower</strong>(E e)</td><td align="center">返回此集合中的最大元素严格小于给定元素，如果没有这样的元素，则 <code>null</code> 。</td></tr><tr><td align="center">E</td><td align="center"><strong>pollFirst</strong>()</td><td align="center">检索并删除第一个（最低）元素，如果此组为空，则返回 <code>null</code> 。</td></tr><tr><td align="center">E</td><td align="center"><strong>pollLast</strong>()</td><td align="center">检索并删除最后一个（最高）元素，如果此集合为空，则返回 <code>null</code> 。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>remove</strong>(Object o)</td><td align="center">如果存在，则从该集合中移除指定的元素。</td></tr><tr><td align="center">int</td><td align="center"><strong>size</strong>()</td><td align="center">返回此集合中的元素数（基数）。</td></tr><tr><td align="center">Spliterator<e></e></td><td align="center"><strong>spliterator</strong>()</td><td align="center">在此集合中的元素上创建 <em>late-binding</em> 和<em>故障快速</em> <code>Spliterator</code> 。</td></tr><tr><td align="center">NavigableSet<e></e></td><td align="center"><strong>subSet</strong>(E fromElement, boolean fromInclusive, E toElement, boolean toInclusive)</td><td align="center">返回此set的部分视图，其元素范围为 <code>fromElement</code>到 <code>toElement</code> 。</td></tr><tr><td align="center">SortedSet<e></e></td><td align="center"><strong>subSet</strong>(E fromElement, E toElement)</td><td align="center">返回此set的部分视图，其元素范围从 <code>fromElement</code> （含）到 <code>toElement</code> （独占）。</td></tr><tr><td align="center">SortedSet<e></e></td><td align="center"><strong>tailSet</strong>(E fromElement)</td><td align="center">返回此set的部分视图，其元素大于或等于 <code>fromElement</code> 。</td></tr><tr><td align="center">NavigableSet<e></e></td><td align="center"><strong>tailSet</strong>(E fromElement, boolean inclusive)</td><td align="center">返回此set的部分视图，其元素大于（或等于，如果 <code>inclusive</code>为true） <code>fromElement</code> 。</td></tr></tbody></table><p>具体方法在后文的 <em>TreeMap</em> 中介绍</p><h4 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a><em>HashSet</em></h4><p>基于哈希表实现，支持快速查找，但不支持有序性操作。</p><p>失去了元素的插入顺序信息，使用 <em>Iterator</em> 遍历 <em>HashSet</em> 得到的结果是不确定的</p><p><em>HashSet</em> 的底层实际是 <em>HashMap</em> 的套壳，使用 <em>HashMap</em> 的 key 来存储元素</p><h5 id="底层数据结构-3"><a href="#底层数据结构-3" class="headerlink" title="底层数据结构"></a>底层数据结构</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private transient HashMap&lt;E,Object&gt; map;</span><br></pre></td></tr></table></figure></div><h5 id="构造器-4"><a href="#构造器-4" class="headerlink" title="构造器"></a>构造器</h5><table><thead><tr><th align="center"><strong>构造器</strong></th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><strong>HashSet</strong>()</td><td align="center">构造一个新的空集; 支持<code>HashMap</code>实例具有默认初始容量（16）和加载因子（0.75）。</td></tr><tr><td align="center"><strong>HashSet</strong>(int initialCapacity)</td><td align="center">构造一个新的空集; 支持<code>HashMap</code>实例具有指定的初始容量和默认加载因子（0.75）。</td></tr><tr><td align="center"><strong>HashSet</strong>(int initialCapacity, float loadFactor)</td><td align="center">构造一个新的空集; 支持<code>HashMap</code>实例具有指定的初始容量和指定的加载因子。</td></tr><tr><td align="center"><strong>HashSet</strong>(Collection&lt;? extends E&gt; c)</td><td align="center">构造一个包含指定集合中元素的新集合。</td></tr></tbody></table><pre><code>// 实例化 HashMap
public HashSet() {
    map = new HashMap&lt;&gt;();
}

// 实例化并赋值
public HashSet(Collection&lt;? extends E&gt; c) {
    map = new HashMap&lt;&gt;(Math.max((int) (c.size()/.75f) + 1, 16));
    addAll(c);
}

// 初始化 HashMap
public HashSet(int initialCapacity, float loadFactor) {
    map = new HashMap&lt;&gt;(initialCapacity, loadFactor);
}

// 初始化 HashMap
public HashSet(int initialCapacity) {
    map = new HashMap&lt;&gt;(initialCapacity);
}

// 初始化 HashMap
//  不对外公开的构造方法，default修饰，实际上是提供给LinkedHashSet使用
//  dummy 参数无实际意义，仅作标识作用（为了和前面第三个构造方法进行区分）
HashSet(int initialCapacity, float loadFactor, boolean dummy) {
    map = new LinkedHashMap&lt;&gt;(initialCapacity, loadFactor);
}
</code></pre><h5 id="方法概要-4"><a href="#方法概要-4" class="headerlink" title="方法概要"></a>方法概要</h5><table><thead><tr><th align="center"><strong>变量和类型</strong></th><th align="center">方法</th><th align="center"><strong>描述</strong></th></tr></thead><tbody><tr><td align="center">boolean</td><td align="center"><strong>add</strong>(E e)</td><td align="center">如果指定的元素尚不存在，则将其添加到此集合中。</td></tr><tr><td align="center">void</td><td align="center"><strong>clear</strong>()</td><td align="center">从该集中删除所有元素。</td></tr><tr><td align="center">Object</td><td align="center"><strong>clone</strong>()</td><td align="center">返回此 <code>HashSet</code>实例的浅表副本：未克隆元素本身。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>contains</strong>(Object o)</td><td align="center">如果此set包含指定的元素，则返回 <code>true</code> 。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>isEmpty</strong>()</td><td align="center">如果此集合不包含任何元素，则返回 <code>true</code> 。</td></tr><tr><td align="center">Iterator<e></e></td><td align="center"><strong>iterator</strong>()</td><td align="center">返回此set中元素的迭代器。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>remove</strong>(Object o)</td><td align="center">如果存在，则从该集合中移除指定的元素。</td></tr><tr><td align="center">int</td><td align="center"><strong>size</strong>()</td><td align="center">返回此集合中的元素数（基数）。</td></tr><tr><td align="center">Spliterator<e></e></td><td align="center"><strong>spliterator</strong>()</td><td align="center">在此集合中的元素上创建 <em>late-binding</em> 和<em>失败快速</em> <code>Spliterator</code> 。</td></tr></tbody></table><p>具体方法在后文的 <em>HashMap</em> 中介绍</p><h4 id="LinkedHashSet"><a href="#LinkedHashSet" class="headerlink" title="LinkedHashSet"></a><em>LinkedHashSet</em></h4><p>基于双向链表实现，只能顺序访问，可以快速地在链表中间插入和删除元素</p><p><em>LinkedList</em> 还可以用作栈、队列和双向队列</p><p><em>LinkedHashSet</em> 的底层实际是 <em>LinkedHashMap</em> 的套壳，使用 <em>LinkedHashMap</em> 的 key 来存储元素</p><h5 id="构造器-5"><a href="#构造器-5" class="headerlink" title="构造器"></a>构造器</h5><table><thead><tr><th align="center"><strong>构造器</strong></th><th align="center"><strong>描述</strong></th></tr></thead><tbody><tr><td align="center"><strong>LinkedHashSet</strong>()</td><td align="center">使用默认初始容量（16）和加载因子（0.75）构造一个新的空链接哈希集。</td></tr><tr><td align="center"><strong>LinkedHashSet</strong>(int initialCapacity)</td><td align="center">使用指定的初始容量和默认加载因子（0.75）构造一个新的空链接哈希集。</td></tr><tr><td align="center"><strong>LinkedHashSet</strong>(int initialCapacity, float loadFactor)</td><td align="center">使用指定的初始容量和加载因子构造一个新的空链接哈希集。</td></tr><tr><td align="center"><strong>LinkedHashSet</strong>(Collection&lt;? extends E&gt; c)</td><td align="center">构造一个新的链接哈希集，其具有与指定集合相同的元素。</td></tr></tbody></table><pre><code>// 构造方法全部都是调用Hashset的构造方法
public LinkedHashSet(int initialCapacity, float loadFactor) {
    super(initialCapacity, loadFactor, true);
}

public LinkedHashSet(int initialCapacity) {
    super(initialCapacity, .75f, true);
}

public LinkedHashSet() {
    super(16, .75f, true);
}

public LinkedHashSet(Collection&lt;? extends E&gt; c) {
    super(Math.max(2*c.size(), 11), .75f, true);
    addAll(c);
}
</code></pre><h5 id="方法概要-5"><a href="#方法概要-5" class="headerlink" title="方法概要"></a>方法概要</h5><table><thead><tr><th align="center"><strong>变量和类型</strong></th><th align="center">方法</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">Spliterator<e></e></td><td align="center"><strong>spliterator</strong>()</td><td align="center">在此集合中的元素上创建 <em>late-binding</em> 和<em>失败快速</em> <code>Spliterator</code> 。</td></tr></tbody></table><p>具体方法在后文的 <em>LinkedHashMap</em> 中介绍</p><h3 id="Stack-amp-amp-Queue"><a href="#Stack-amp-amp-Queue" class="headerlink" title="Stack && Queue"></a><em>Stack</em> &amp;&amp; <em>Queue</em></h3><p><em>Java</em> 中有个叫做 <em>Stack</em> 的类，没有叫做 <em>Queue</em> 的类，只有叫做 <em>Queue</em> 的接口，<em>Stack</em> 类官方已经不推荐使用，所以如果要选择实现栈与队列，优先考虑效率更高的 <em>ArrayDeque</em>（次选是 LinkedList）</p><h4 id="ArrayDeque"><a href="#ArrayDeque" class="headerlink" title="ArrayDeque"></a><em>ArrayDeque</em></h4><p>底层通过数组实现，为了满足同时在数组两端插入或删除，该数组也是循环数组，数组的任何一点都可能被看作头或者尾</p><p><em>ArrayDeque</em> 是非线程安全的（not thread-safe），当多个线程同时使用的时候，需要程序员手动同步</p><p>该容器不允许放入 <code>null</code> 元素。</p><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318d8a20deb.png" alt="ArrayDeque"></p><p>head 指向循环数组的第一个有效元素，tail 指向第一个可以插入元素的空位</p><h5 id="底层数据结构-4"><a href="#底层数据结构-4" class="headerlink" title="底层数据结构"></a>底层数据结构</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">transient Object[] elements;</span><br><span class="line"></span><br><span class="line">transient int head;</span><br><span class="line"></span><br><span class="line">transient int tail;</span><br></pre></td></tr></table></figure></div><h5 id="构造器-6"><a href="#构造器-6" class="headerlink" title="构造器"></a>构造器</h5><table><thead><tr><th align="center"><strong>构造器</strong></th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><strong>ArrayDeque</strong>()</td><td align="center">构造一个空数组deque，其初始容量足以容纳16个元素。</td></tr><tr><td align="center"><strong>ArrayDeque</strong>(int numElements)</td><td align="center">构造一个空数组deque，其初始容量足以容纳指定数量的元素。</td></tr><tr><td align="center"><strong>ArrayDeque</strong>(Collection&lt;? extends E&gt; c)</td><td align="center">按照集合的迭代器返回的顺序构造一个包含指定集合元素的双端队列。</td></tr></tbody></table><pre><code>// 空构造器
public ArrayDeque() {
    elements = new Object[16];
}

// 构造一个指定大小的数组
public ArrayDeque(int numElements) {
    elements =
        new Object[(numElements &lt; 1) ? 1 :
                   (numElements == Integer.MAX_VALUE) ? Integer.MAX_VALUE :
                   numElements + 1];
}

// 构造一个包含 Collection 集合所有元素的数组
public ArrayDeque(Collection&lt;? extends E&gt; c) {
    this(c.size());
    copyElements(c);
}

private void copyElements(Collection&lt;? extends E&gt; c) {
    c.forEach(this::addLast);
}
</code></pre><h5 id="方法概要-6"><a href="#方法概要-6" class="headerlink" title="方法概要"></a>方法概要</h5><table><thead><tr><th align="center"><strong>变量和类型</strong></th><th align="center"><strong>方法</strong></th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">boolean</td><td align="center"><strong>add</strong>(E e)</td><td align="center">在此双端队列的末尾插入指定的元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>addAll</strong>(Collection&lt;? extends E&gt; c)</td><td align="center">在此双端队列的末尾添加指定集合中的所有元素，就好像通过在每个双 <a class="link" target="_blank" rel="noopener" href="https://www.apiref.com/java11-zh/java.base/java/util/ArrayDeque.html#addLast(E)">端子 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>上调用 <a target="_blank" rel="noopener" href="https://www.apiref.com/java11-zh/java.base/java/util/ArrayDeque.html#addLast(E)"><code>addLast(E)</code>一样</a> ，按照集合的迭代器返回它们的顺序。</td></tr><tr><td align="center">void</td><td align="center"><strong>addFirst</strong>(E e)</td><td align="center">在此双端队列的前面插入指定的元素。</td></tr><tr><td align="center">void</td><td align="center"><strong>addLast</strong>(E e)</td><td align="center">在此双端队列的末尾插入指定的元素。</td></tr><tr><td align="center">void</td><td align="center"><strong>clear</strong>()</td><td align="center">从此双端队列中删除所有元素。</td></tr><tr><td align="center">ArrayDeque<e></e></td><td align="center"><strong>clone</strong>()</td><td align="center">返回此双端队列的副本。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>contains</strong>(Object o)</td><td align="center">如果此双端队列包含指定的元素，则返回 <code>true</code> 。</td></tr><tr><td align="center">E</td><td align="center"><strong>element</strong>()</td><td align="center">检索但不删除此双端队列表示的队列的头部。</td></tr><tr><td align="center">void</td><td align="center"><strong>forEach</strong>(Consumer&lt;? super E&gt; action)</td><td align="center">对 <code>Iterable</code>每个元素执行给定操作，直到处理 <code>Iterable</code>所有元素或操作引发异常。</td></tr><tr><td align="center">E</td><td align="center"><strong>getFirst</strong>()</td><td align="center">检索但不删除此双端队列的第一个元素。</td></tr><tr><td align="center">E</td><td align="center"><strong>getLast</strong>()</td><td align="center">检索但不删除此双端队列的最后一个元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>isEmpty</strong>()</td><td align="center">如果此双端队列不包含任何元素，则返回 <code>true</code> 。</td></tr><tr><td align="center">Iterator<e></e></td><td align="center"><strong>iterator</strong>()</td><td align="center">返回此双端队列中元素的迭代器。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>offer</strong>(E e)</td><td align="center">在此双端队列的末尾插入指定的元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>offerFirst</strong>(E e)</td><td align="center">在此双端队列的前面插入指定的元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>offerLast</strong>(E e)</td><td align="center">在此双端队列的末尾插入指定的元素。</td></tr><tr><td align="center">E</td><td align="center"><strong>peek</strong>()</td><td align="center">检索但不删除此双端队列表示的队列的头部，如果此双端队列为空，则返回 <code>null</code> 。</td></tr><tr><td align="center">E</td><td align="center"><strong>poll</strong>()</td><td align="center">检索并删除此双端队列表示的队列的头部（换句话说，此双端队列的第一个元素），如果此双端队列为空，则返回 <code>null</code> 。</td></tr><tr><td align="center">E</td><td align="center"><strong>pop</strong>()</td><td align="center">从此双端队列表示的堆栈中弹出一个元素。</td></tr><tr><td align="center">void</td><td align="center"><strong>push</strong>(E e)</td><td align="center">将元素推送到此双端队列表示的堆栈上。</td></tr><tr><td align="center">E</td><td align="center"><strong>remove</strong>()</td><td align="center">检索并删除此双端队列表示的队列的头部。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>remove</strong>(Object o)</td><td align="center">从此双端队列中删除指定元素的单个实例。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>removeAll</strong>(Collection&lt;?&gt; c)</td><td align="center">删除此集合的所有元素，这些元素也包含在指定的集合中（可选操作）。</td></tr><tr><td align="center">E</td><td align="center"><strong>removeFirst</strong>()</td><td align="center">检索并删除此双端队列的第一个元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>removeFirstOccurrence</strong>(Object o)</td><td align="center">删除此双端队列中第一次出现的指定元素（从头到尾遍历双端队列时）。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>removeIf</strong>(Predicate&lt;? super E&gt; filter)</td><td align="center">删除此集合中满足给定谓词的所有元素。</td></tr><tr><td align="center">E</td><td align="center"><strong>removeLast</strong>()</td><td align="center">检索并删除此双端队列的最后一个元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>removeLastOccurrence</strong>(Object o)</td><td align="center">删除此双端队列中最后一次出现的指定元素（从头到尾遍历双端队列时）。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>retainAll</strong>(Collection&lt;?&gt; c)</td><td align="center">仅保留此集合中包含在指定集合中的元素（可选操作）。</td></tr><tr><td align="center">int</td><td align="center"><strong>size</strong>()</td><td align="center">返回此双端队列中的元素数。</td></tr><tr><td align="center">Spliterator<e></e></td><td align="center"><strong>spliterator</strong>()</td><td align="center">在此双端队列中的元素上创建<em>late-binding</em>和<em>失败快速</em> <code>Spliterator</code> 。</td></tr><tr><td align="center">Object[]</td><td align="center"><strong>toArray</strong>()</td><td align="center">以适当的顺序（从第一个元素到最后一个元素）返回一个包含此双端队列中所有元素的数组。</td></tr><tr><td align="center"><t>T[]</t></td><td align="center"><strong>toArray</strong>(T[] a)</td><td align="center">以适当的顺序（从第一个元素到最后一个元素）返回一个包含此双端队列中所有元素的数组; 返回数组的运行时类型是指定数组的运行时类型。</td></tr></tbody></table><h5 id="扩容函数"><a href="#扩容函数" class="headerlink" title="扩容函数"></a>扩容函数</h5><pre><code>private void grow(int needed) {
    final int oldCapacity = elements.length;
    int newCapacity;
    // 如果容量小于 64，则扩大为双倍 + 2，否则扩大为 1.5 倍
    int jump = (oldCapacity &lt; 64) ? (oldCapacity + 2) : (oldCapacity &gt;&gt; 1);
    if (jump &lt; needed
        || (newCapacity = (oldCapacity + jump)) - MAX_ARRAY_SIZE &gt; 0)
        newCapacity = newCapacity(needed, jump);
    final Object[] es = elements = Arrays.copyOf(elements, newCapacity);
    if (tail &lt; head || (tail == head &amp;&amp; es[head] != null)) {
        int newSpace = newCapacity - oldCapacity;
        // 将头部元素拷贝到数组尾部，并将空间置为 null
        System.arraycopy(es, head,
                         es, head + newSpace,
                         oldCapacity - head);
        for (int i = head, to = (head += newSpace); i &lt; to; i++)
            es[i] = null;
    }
}

private int newCapacity(int needed, int jump) {
    final int oldCapacity = elements.length, minCapacity;
    if ((minCapacity = oldCapacity + needed) - MAX_ARRAY_SIZE &gt; 0) {
        if (minCapacity &lt; 0)
            throw new IllegalStateException("Sorry, deque too big");
        return Integer.MAX_VALUE;
    }
    if (needed &gt; jump)
        return minCapacity;
    return (oldCapacity + jump - MAX_ARRAY_SIZE &lt; 0)
        ? oldCapacity + jump
        : MAX_ARRAY_SIZE;
}
</code></pre><h5 id="dec"><a href="#dec" class="headerlink" title="dec"></a>dec</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 计算循环索引，维持双端数组</span><br><span class="line">static final int dec(int i, int modulus) {</span><br><span class="line">    if (--i &lt; 0) i = modulus - 1;</span><br><span class="line">    return i;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="inc"><a href="#inc" class="headerlink" title="inc"></a>inc</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 计算循环索引，维持双端数组</span><br><span class="line">static final int inc(int i, int modulus) {</span><br><span class="line">    if (++i &gt;= modulus) i = 0;</span><br><span class="line">    return i;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="addFirst-1"><a href="#addFirst-1" class="headerlink" title="addFirst"></a>addFirst</h5><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318d91d31af.png" alt="addFirst"></p><pre><code>// 将元素插入数组头部
public void addFirst(E e) {
    if (e == null)
        throw new NullPointerException();
    final Object[] es = elements;
    es[head = dec(head, es.length)] = e; // 计算循环索引，--head
    if (head == tail)
        grow(1); // 扩容
}
</code></pre><h5 id="addLast-1"><a href="#addLast-1" class="headerlink" title="addLast"></a>addLast</h5><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318d95975be.png" alt="addLast"></p><pre><code>// 将元素插入数组尾部
public void addLast(E e) {
    if (e == null)
        throw new NullPointerException();
    final Object[] es = elements;
    es[tail] = e;
    if (head == (tail = inc(tail, es.length))) // 计算循环索引，++tail
        grow(1);
}
</code></pre><h5 id="addAll-2"><a href="#addAll-2" class="headerlink" title="addAll"></a>addAll</h5><p>将集合中的所有元素插入 <em>ArrayDeque</em> 的尾部</p><pre><code>public boolean addAll(Collection&lt;? extends E&gt; c) {
    final int s, needed;
    if ((needed = (s = size()) + c.size() + 1 - elements.length) &gt; 0)
        grow(needed);
    copyElements(c);
    return size() &gt; s;
}

private void copyElements(Collection&lt;? extends E&gt; c) {
    c.forEach(this::addLast);
}
</code></pre><h5 id="offerFirst-1"><a href="#offerFirst-1" class="headerlink" title="offerFirst"></a>offerFirst</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public boolean offerFirst(E e) {</span><br><span class="line">    addFirst(e);</span><br><span class="line">    return true;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="offerLast-1"><a href="#offerLast-1" class="headerlink" title="offerLast"></a>offerLast</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public boolean offerLast(E e) {</span><br><span class="line">    addLast(e);</span><br><span class="line">    return true;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="removeFirst-1"><a href="#removeFirst-1" class="headerlink" title="removeFirst"></a>removeFirst</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public E removeFirst() {</span><br><span class="line">    E e = pollFirst();</span><br><span class="line">    if (e == null)</span><br><span class="line">        throw new NoSuchElementException();</span><br><span class="line">    return e;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="removeLast-1"><a href="#removeLast-1" class="headerlink" title="removeLast"></a>removeLast</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public E removeLast() {</span><br><span class="line">    E e = pollLast();</span><br><span class="line">    if (e == null)</span><br><span class="line">        throw new NoSuchElementException();</span><br><span class="line">    return e;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="pollFirst-1"><a href="#pollFirst-1" class="headerlink" title="pollFirst"></a>pollFirst</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public E pollFirst() {</span><br><span class="line">    final Object[] es;</span><br><span class="line">    final int h;</span><br><span class="line">    E e = elementAt(es = elements, h = head);</span><br><span class="line">    if (e != null) {</span><br><span class="line">        es[h] = null;</span><br><span class="line">        head = inc(h, es.length);</span><br><span class="line">    }</span><br><span class="line">    return e; // 返回并删除</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="pollLast-1"><a href="#pollLast-1" class="headerlink" title="pollLast"></a>pollLast</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public E pollLast() {</span><br><span class="line">    final Object[] es;</span><br><span class="line">    final int t;</span><br><span class="line">    E e = elementAt(es = elements, t = dec(tail, es.length));</span><br><span class="line">    if (e != null)</span><br><span class="line">        es[tail = t] = null;</span><br><span class="line">    return e;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="getFirst-1"><a href="#getFirst-1" class="headerlink" title="getFirst"></a>getFirst</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public E getFirst() {</span><br><span class="line">    E e = elementAt(elements, head);</span><br><span class="line">    if (e == null)</span><br><span class="line">        throw new NoSuchElementException();</span><br><span class="line">    return e;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">static final &lt;E&gt; E elementAt(Object[] es, int i) {</span><br><span class="line">	return (E) es[i];</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="getLast-1"><a href="#getLast-1" class="headerlink" title="getLast"></a>getLast</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public E getLast() {</span><br><span class="line">    final Object[] es = elements;</span><br><span class="line">    E e = elementAt(es, dec(tail, es.length));</span><br><span class="line">    if (e == null)</span><br><span class="line">        throw new NoSuchElementException();</span><br><span class="line">    return e;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">static final &lt;E&gt; E elementAt(Object[] es, int i) {</span><br><span class="line">	return (E) es[i];</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="peekFirst-1"><a href="#peekFirst-1" class="headerlink" title="peekFirst"></a>peekFirst</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 取队首</span><br><span class="line">public E peekFirst() {</span><br><span class="line">    return elementAt(elements, head);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">static final &lt;E&gt; E elementAt(Object[] es, int i) {</span><br><span class="line">	return (E) es[i];</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="peekLast-1"><a href="#peekLast-1" class="headerlink" title="peekLast"></a>peekLast</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public E peekLast() {</span><br><span class="line">    final Object[] es;</span><br><span class="line">    return elementAt(es = elements, dec(tail, es.length));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">static final &lt;E&gt; E elementAt(Object[] es, int i) {</span><br><span class="line">	return (E) es[i];</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// 数组拷贝进行删除</span><br><span class="line">boolean delete(int i) {</span><br><span class="line">    final Object[] es = elements;</span><br><span class="line">    final int capacity = es.length;</span><br><span class="line">    final int h, t;</span><br><span class="line">    // number of elements before to-be-deleted elt</span><br><span class="line">    final int front = sub(i, h = head, capacity);</span><br><span class="line">    // number of elements after to-be-deleted elt</span><br><span class="line">    final int back = sub(t = tail, i, capacity) - 1;</span><br><span class="line">    if (front &lt; back) {</span><br><span class="line">        // move front elements forwards</span><br><span class="line">        if (h &lt;= i) {</span><br><span class="line">            System.arraycopy(es, h, es, h + 1, front);</span><br><span class="line">        } else { // Wrap around</span><br><span class="line">            System.arraycopy(es, 0, es, 1, i);</span><br><span class="line">            es[0] = es[capacity - 1];</span><br><span class="line">            System.arraycopy(es, h, es, h + 1, front - (i + 1));</span><br><span class="line">        }</span><br><span class="line">        es[h] = null;</span><br><span class="line">        head = inc(h, capacity);</span><br><span class="line">        return false;</span><br><span class="line">    } else {</span><br><span class="line">        // move back elements backwards</span><br><span class="line">        tail = dec(t, capacity);</span><br><span class="line">        if (i &lt;= tail) {</span><br><span class="line">            System.arraycopy(es, i + 1, es, i, back);</span><br><span class="line">        } else { // Wrap around</span><br><span class="line">            System.arraycopy(es, i + 1, es, i, capacity - (i + 1));</span><br><span class="line">            es[capacity - 1] = es[0];</span><br><span class="line">            System.arraycopy(es, 1, es, 0, t - 1);</span><br><span class="line">        }</span><br><span class="line">        es[tail] = null;</span><br><span class="line">        return true;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="removeFirstOccurrence-1"><a href="#removeFirstOccurrence-1" class="headerlink" title="removeFirstOccurrence"></a>removeFirstOccurrence</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public boolean removeFirstOccurrence(Object o) {</span><br><span class="line">    if (o != null) {</span><br><span class="line">        final Object[] es = elements;</span><br><span class="line">        for (int i = head, end = tail, to = (i &lt;= end) ? end : es.length;</span><br><span class="line">             ; i = 0, to = end) {</span><br><span class="line">            for (; i &lt; to; i++)</span><br><span class="line">                if (o.equals(es[i])) {</span><br><span class="line">                    delete(i);</span><br><span class="line">                    return true;</span><br><span class="line">                }</span><br><span class="line">            if (to == end) break;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return false;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="removeLastOccurrence-1"><a href="#removeLastOccurrence-1" class="headerlink" title="removeLastOccurrence"></a>removeLastOccurrence</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public boolean removeLastOccurrence(Object o) {</span><br><span class="line">    if (o != null) {</span><br><span class="line">        final Object[] es = elements;</span><br><span class="line">        for (int i = tail, end = head, to = (i &gt;= end) ? end : 0;</span><br><span class="line">             ; i = es.length, to = end) {</span><br><span class="line">            for (i--; i &gt; to - 1; i--)</span><br><span class="line">                if (o.equals(es[i])) {</span><br><span class="line">                    delete(i);</span><br><span class="line">                    return true;</span><br><span class="line">                }</span><br><span class="line">            if (to == end) break;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return false;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="add-2"><a href="#add-2" class="headerlink" title="add"></a>add</h5><p>将元素插入到 <em>ArrayDeque</em> 的尾部</p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public boolean add(E e) {</span><br><span class="line">    addLast(e);</span><br><span class="line">    return true;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="offer-1"><a href="#offer-1" class="headerlink" title="offer"></a>offer</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public boolean offer(E e) {</span><br><span class="line">    return offerLast(e);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="remove-2"><a href="#remove-2" class="headerlink" title="remove"></a>remove</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public E remove() {</span><br><span class="line">    return removeFirst();</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="poll-1"><a href="#poll-1" class="headerlink" title="poll"></a>poll</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public E poll() {</span><br><span class="line">    return pollFirst();</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="element-1"><a href="#element-1" class="headerlink" title="element"></a>element</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public E element() {</span><br><span class="line">    return getFirst();</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="peek-1"><a href="#peek-1" class="headerlink" title="peek"></a>peek</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public E peek() {</span><br><span class="line">    return peekFirst();</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="push-1"><a href="#push-1" class="headerlink" title="push"></a>push</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public void push(E e) {</span><br><span class="line">    addFirst(e);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="pop-1"><a href="#pop-1" class="headerlink" title="pop"></a>pop</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public E pop() {</span><br><span class="line">    return removeFirst();</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h4 id="PriorityDeque"><a href="#PriorityDeque" class="headerlink" title="PriorityDeque"></a><em>PriorityDeque</em></h4><p>基于堆结构实现，可完成优先队列的操作</p><p><em>Java</em> 中的优先队列保证每次取最小元素，基于小根堆实现，而 <em>C++</em> 则是基于大根堆实现，默认返回最大元素，不过都可以根据需要自定义比较器在构造时传入，按需求进行返回</p><p><em>PriorityDeque</em> 实现了 <em>AbstractQueue</em> 抽象基类，间接实现了 <em>Queue</em> 接口，不允许放入 <code>null</code></p><p>底层通过数组实现的小根堆</p><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318d9e1b1ff.png" alt="PriorityDeque"></p><h5 id="底层数据结构-5"><a href="#底层数据结构-5" class="headerlink" title="底层数据结构"></a>底层数据结构</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transient Object[] queue;</span><br></pre></td></tr></table></figure></div><h5 id="构造器-7"><a href="#构造器-7" class="headerlink" title="构造器"></a>构造器</h5><table><thead><tr><th align="center"><strong>构造器</strong></th><th align="center"><strong>描述</strong></th></tr></thead><tbody><tr><td align="center"><strong>PriorityQueue</strong>()</td><td align="center">使用默认初始容量（11）创建<code>PriorityQueue</code> ，根据其 natural ordering 对其元素进行排序。</td></tr><tr><td align="center"><strong>PriorityQueue</strong>(int initialCapacity)</td><td align="center">创建具有指定初始容量的<code>PriorityQueue</code> ，该容量根据其 natural ordering 对其元素进行排序。</td></tr><tr><td align="center"><strong>PriorityQueue</strong>(int initialCapacity, Comparator&lt;? super E&gt; comparator)</td><td align="center">创建具有指定初始容量的 <code>PriorityQueue</code> ，该容量根据指定的比较器对其元素进行排序。</td></tr><tr><td align="center"><strong>PriorityQueue</strong>(Collection&lt;? extends E&gt; c)</td><td align="center">创建包含指定集合中的元素的 <code>PriorityQueue</code> 。</td></tr><tr><td align="center"><strong>PriorityQueue</strong>(Comparator&lt;? super E&gt; comparator)</td><td align="center">创建具有默认初始容量的 <code>PriorityQueue</code> ，其元素根据指定的比较器进行排序。</td></tr><tr><td align="center"><strong>PriorityQueue</strong>(PriorityQueue&lt;? extends E&gt; c)</td><td align="center">创建包含指定优先级队列中的元素的 <code>PriorityQueue</code> 。</td></tr><tr><td align="center"><strong>PriorityQueue</strong>(SortedSet&lt;? extends E&gt; c)</td><td align="center">创建一个 <code>PriorityQueue</code>其中包含指定有序集合中的元素。</td></tr></tbody></table><pre><code>// 构造默认大小的 PriorityQueue
public PriorityQueue() {
    this(DEFAULT_INITIAL_CAPACITY, null);
}

// 构造指定大小的 PriorityQueue
public PriorityQueue(int initialCapacity) {
    this(initialCapacity, null);
}

// 构造自定义比较器的 PriorityQueue
public PriorityQueue(Comparator&lt;? super E&gt; comparator) {
    this(DEFAULT_INITIAL_CAPACITY, comparator);
}

// 构造指定大小，自定义比较器的 PriorityQueue
public PriorityQueue(int initialCapacity,
                     Comparator&lt;? super E&gt; comparator) {
    // Note: This restriction of at least one is not actually needed,
    // but continues for 1.5 compatibility
    if (initialCapacity &lt; 1)
        throw new IllegalArgumentException();
    this.queue = new Object[initialCapacity];
    this.comparator = comparator;
}

// 构造指定集合元素的 PriorityQueue
public PriorityQueue(Collection&lt;? extends E&gt; c) {
    // 排序集合
    if (c instanceof SortedSet&lt;?&gt;) {
        SortedSet&lt;? extends E&gt; ss = (SortedSet&lt;? extends E&gt;) c;
        this.comparator = (Comparator&lt;? super E&gt;) ss.comparator();
        initElementsFromCollection(ss);
    }
    // 优先队列
    else if (c instanceof PriorityQueue&lt;?&gt;) {
        PriorityQueue&lt;? extends E&gt; pq = (PriorityQueue&lt;? extends E&gt;) c;
        this.comparator = (Comparator&lt;? super E&gt;) pq.comparator();
        initFromPriorityQueue(pq);
    }
    else {
        this.comparator = null;
        initFromCollection(c);
    }
}

// 通过优先队列构造优先队列
public PriorityQueue(PriorityQueue&lt;? extends E&gt; c) {
    this.comparator = (Comparator&lt;? super E&gt;) c.comparator();
    initFromPriorityQueue(c);
}

// 通过排序集合构造优先队列
public PriorityQueue(SortedSet&lt;? extends E&gt; c) {
    this.comparator = (Comparator&lt;? super E&gt;) c.comparator();
    initElementsFromCollection(c);
}

// 初始化
private void initFromPriorityQueue(PriorityQueue&lt;? extends E&gt; c) {
    if (c.getClass() == PriorityQueue.class) {
        this.queue = ensureNonEmpty(c.toArray());
        this.size = c.size();
    } else {
        initFromCollection(c);
    }
}

// 初始化
private void initElementsFromCollection(Collection&lt;? extends E&gt; c) {
    Object[] es = c.toArray();
    int len = es.length;
    if (c.getClass() != ArrayList.class)
        es = Arrays.copyOf(es, len, Object[].class);
    if (len == 1 || this.comparator != null)
        for (Object e : es)
            if (e == null)
                throw new NullPointerException();
    this.queue = ensureNonEmpty(es);
    this.size = len;
}
</code></pre><h5 id="方法概要-7"><a href="#方法概要-7" class="headerlink" title="方法概要"></a>方法概要</h5><table><thead><tr><th align="center"><strong>变量和类型</strong></th><th align="center">方法</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">boolean</td><td align="center"><strong>add</strong>(E e)</td><td align="center">将指定的元素插入此优先级队列。</td></tr><tr><td align="center">void</td><td align="center"><strong>clear</strong>()</td><td align="center">从此优先级队列中删除所有元素。</td></tr><tr><td align="center">Comparator&lt;? super E&gt;</td><td align="center"><strong>comparator</strong>()</td><td align="center">返回用于为了在这个队列中的元素，或比较<code>null</code>如果此队列根据所述排序 natural ordering 的元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>contains</strong>(Object o)</td><td align="center">如果此队列包含指定的元素，则返回 <code>true</code> 。</td></tr><tr><td align="center">void</td><td align="center"><strong>forEach</strong>(Consumer&lt;? super E&gt; action)</td><td align="center">对 <code>Iterable</code>每个元素执行给定操作，直到处理 <code>Iterable</code>所有元素或操作引发异常。</td></tr><tr><td align="center">Iterator<e></e></td><td align="center"><strong>iterator</strong>()</td><td align="center">返回此队列中元素的迭代器。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>offer</strong>(E e)</td><td align="center">将指定的元素插入此优先级队列。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>remove</strong>(Object o)</td><td align="center">从此队列中删除指定元素的单个实例（如果存在）。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>removeAll</strong>(Collection&lt;?&gt; c)</td><td align="center">删除此集合的所有元素，这些元素也包含在指定的集合中（可选操作）。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>removeIf</strong>(Predicate&lt;? super E&gt; filter)</td><td align="center">删除此集合中满足给定谓词的所有元素。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>retainAll</strong>(Collection&lt;?&gt; c)</td><td align="center">仅保留此集合中包含在指定集合中的元素（可选操作）。</td></tr><tr><td align="center">Spliterator<e></e></td><td align="center"><strong>spliterator</strong>()</td><td align="center">在此队列中的元素上创建 <em>late-binding</em> 和<em>故障快速</em> <code>Spliterator</code> 。</td></tr><tr><td align="center">Object[]</td><td align="center"><strong>toArray</strong>()</td><td align="center">返回包含此队列中所有元素的数组。</td></tr><tr><td align="center"><t>T[]</t></td><td align="center"><strong>toArray</strong>(T[] a)</td><td align="center">返回包含此队列中所有元素的数组; 返回数组的运行时类型是指定数组的运行时类型。</td></tr></tbody></table><h5 id="扩容函数-1"><a href="#扩容函数-1" class="headerlink" title="扩容函数"></a>扩容函数</h5><pre><code>// 创建一个更大的数组然后复制
private void grow(int minCapacity) {
    int oldCapacity = queue.length;
    // Double size if small; else grow by 50%
    int newCapacity = oldCapacity + ((oldCapacity &lt; 64) ?
                                     (oldCapacity + 2) :
                                     (oldCapacity &gt;&gt; 1));
    // overflow-conscious code
    if (newCapacity - MAX_ARRAY_SIZE &gt; 0)
        newCapacity = hugeCapacity(minCapacity);
    queue = Arrays.copyOf(queue, newCapacity);
}

private static int hugeCapacity(int minCapacity) {
    if (minCapacity &lt; 0) // overflow
        throw new OutOfMemoryError();
    return (minCapacity &gt; MAX_ARRAY_SIZE) ?
        Integer.MAX_VALUE :
        MAX_ARRAY_SIZE;
}
</code></pre><h5 id="siftUp"><a href="#siftUp" class="headerlink" title="siftUp"></a>siftUp</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">// 上浮函数</span><br><span class="line">// 新插入的元素通过比较器不断比较当前点的 parent 找到相应的位置</span><br><span class="line">private void siftUp(int k, E x) {</span><br><span class="line">    if (comparator != null)</span><br><span class="line">        siftUpUsingComparator(k, x, queue, comparator);</span><br><span class="line">    else</span><br><span class="line">        siftUpComparable(k, x, queue);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// 有自定义比较器</span><br><span class="line">private static &lt;T&gt; void siftUpUsingComparator(</span><br><span class="line">    int k, T x, Object[] es, Comparator&lt;? super T&gt; cmp) {</span><br><span class="line">    while (k &gt; 0) {</span><br><span class="line">        int parent = (k - 1) &gt;&gt;&gt; 1;</span><br><span class="line">        Object e = es[parent];</span><br><span class="line">        if (cmp.compare(x, (T) e) &gt;= 0)</span><br><span class="line">            break;</span><br><span class="line">        es[k] = e;</span><br><span class="line">        k = parent;</span><br><span class="line">    }</span><br><span class="line">    es[k] = x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// 无自定义比较器</span><br><span class="line">private static &lt;T&gt; void siftUpComparable(int k, T x, Object[] es) {</span><br><span class="line">    Comparable&lt;? super T&gt; key = (Comparable&lt;? super T&gt;) x;</span><br><span class="line">    while (k &gt; 0) {</span><br><span class="line">        int parent = (k - 1) &gt;&gt;&gt; 1;</span><br><span class="line">        Object e = es[parent];</span><br><span class="line">        if (key.compareTo((T) e) &gt;= 0)</span><br><span class="line">            break;</span><br><span class="line">        es[k] = e;</span><br><span class="line">        k = parent;</span><br><span class="line">    }</span><br><span class="line">    es[k] = key;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="siftDown"><a href="#siftDown" class="headerlink" title="siftDown"></a>siftDown</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">// 下沉函数</span><br><span class="line">// 返回根元素，末尾元素赋给根元素，数组长度减一，根元素不断下沉直至找到对应位置</span><br><span class="line">private void siftDown(int k, E x) {</span><br><span class="line">    if (comparator != null)</span><br><span class="line">        siftDownUsingComparator(k, x, queue, size, comparator);</span><br><span class="line">    else</span><br><span class="line">        siftDownComparable(k, x, queue, size);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">private static &lt;T&gt; void siftDownUsingComparator(</span><br><span class="line">    int k, T x, Object[] es, int n, Comparator&lt;? super T&gt; cmp) {</span><br><span class="line">    // assert n &gt; 0;</span><br><span class="line">    int half = n &gt;&gt;&gt; 1;</span><br><span class="line">    while (k &lt; half) {</span><br><span class="line">        int child = (k &lt;&lt; 1) + 1;</span><br><span class="line">        Object c = es[child];</span><br><span class="line">        int right = child + 1;</span><br><span class="line">        if (right &lt; n &amp;&amp; cmp.compare((T) c, (T) es[right]) &gt; 0)</span><br><span class="line">            c = es[child = right];</span><br><span class="line">        if (cmp.compare(x, (T) c) &lt;= 0)</span><br><span class="line">            break;</span><br><span class="line">        es[k] = c;</span><br><span class="line">        k = child;</span><br><span class="line">    }</span><br><span class="line">    es[k] = x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">private static &lt;T&gt; void siftDownComparable(int k, T x, Object[] es, int n) {</span><br><span class="line">    // assert n &gt; 0;</span><br><span class="line">    Comparable&lt;? super T&gt; key = (Comparable&lt;? super T&gt;)x;</span><br><span class="line">    int half = n &gt;&gt;&gt; 1;           // loop while a non-leaf</span><br><span class="line">    while (k &lt; half) {</span><br><span class="line">        int child = (k &lt;&lt; 1) + 1; // assume left child is least</span><br><span class="line">        Object c = es[child];</span><br><span class="line">        int right = child + 1;</span><br><span class="line">        if (right &lt; n &amp;&amp;</span><br><span class="line">            ((Comparable&lt;? super T&gt;) c).compareTo((T) es[right]) &gt; 0)</span><br><span class="line">            c = es[child = right];</span><br><span class="line">        if (key.compareTo((T) c) &lt;= 0)</span><br><span class="line">            break;</span><br><span class="line">        es[k] = c;</span><br><span class="line">        k = child;</span><br><span class="line">    }</span><br><span class="line">    es[k] = key;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h5 id="add-3"><a href="#add-3" class="headerlink" title="add"></a>add</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public boolean add(E e) {</span><br><span class="line">    return offer(e);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="offer-2"><a href="#offer-2" class="headerlink" title="offer"></a>offer</h5><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318e2beb2b7.png" alt="offer"></p><pre><code>public boolean offer(E e) {
    if (e == null)
        throw new NullPointerException();
    modCount++;
    int i = size;
    if (i &gt;= queue.length)
        grow(i + 1);
    siftUp(i, e);
    size = i + 1;
    return true;
}
</code></pre><h5 id="peek-2"><a href="#peek-2" class="headerlink" title="peek"></a>peek</h5><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318e34bee5d.png" alt="peek"></p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public E peek() {</span><br><span class="line">    return (E) queue[0];</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="indexOf-2"><a href="#indexOf-2" class="headerlink" title="indexOf"></a>indexOf</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 私有函数</span><br><span class="line">private int indexOf(Object o) {</span><br><span class="line">    if (o != null) {</span><br><span class="line">        final Object[] es = queue;</span><br><span class="line">        for (int i = 0, n = size; i &lt; n; i++)</span><br><span class="line">            if (o.equals(es[i]))</span><br><span class="line">                return i;</span><br><span class="line">    }</span><br><span class="line">    return -1;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="removeAt"><a href="#removeAt" class="headerlink" title="removeAt"></a>removeAt</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 移除相应索引的元素</span><br><span class="line">E removeAt(int i) {</span><br><span class="line">    // assert i &gt;= 0 &amp;&amp; i &lt; size;</span><br><span class="line">    final Object[] es = queue;</span><br><span class="line">    modCount++;</span><br><span class="line">    int s = --size;</span><br><span class="line">    if (s == i) // 移除最后一个元素</span><br><span class="line">        es[i] = null;</span><br><span class="line">    else {</span><br><span class="line">        E moved = (E) es[s];</span><br><span class="line">        es[s] = null;</span><br><span class="line">        siftDown(i, moved);</span><br><span class="line">        if (es[i] == moved) {</span><br><span class="line">            siftUp(i, moved);</span><br><span class="line">            if (es[i] != moved)</span><br><span class="line">                return moved;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return null;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="remove-3"><a href="#remove-3" class="headerlink" title="remove"></a>remove</h5><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318e397cfde.png" alt="remove"></p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public boolean remove(Object o) {</span><br><span class="line">    int i = indexOf(o);</span><br><span class="line">    if (i == -1)</span><br><span class="line">        return false;</span><br><span class="line">    else {</span><br><span class="line">        removeAt(i);</span><br><span class="line">        return true;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="removeEq"><a href="#removeEq" class="headerlink" title="removeEq"></a>removeEq</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">void removeEq(Object o) {</span><br><span class="line">    final Object[] es = queue;</span><br><span class="line">    for (int i = 0, n = size; i &lt; n; i++) {</span><br><span class="line">        if (o == es[i]) {</span><br><span class="line">            removeAt(i);</span><br><span class="line">            break;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="poll-2"><a href="#poll-2" class="headerlink" title="poll"></a>poll</h5><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318e3e77e39.png" alt="poll"></p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public E poll() {</span><br><span class="line">    final Object[] es;</span><br><span class="line">    final E result;</span><br><span class="line"></span><br><span class="line">    if ((result = (E) ((es = queue)[0])) != null) {</span><br><span class="line">        modCount++;</span><br><span class="line">        final int n;</span><br><span class="line">        final E x = (E) es[(n = --size)];</span><br><span class="line">        es[n] = null;</span><br><span class="line">        if (n &gt; 0) {</span><br><span class="line">            final Comparator&lt;? super E&gt; cmp;</span><br><span class="line">            if ((cmp = comparator) == null)</span><br><span class="line">                siftDownComparable(0, x, es, n);</span><br><span class="line">            else</span><br><span class="line">                siftDownUsingComparator(0, x, es, n, cmp);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return result;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h2 id="Map-容器"><a href="#Map-容器" class="headerlink" title="Map 容器"></a><em>Map</em> 容器</h2><h3 id="结构图-1"><a href="#结构图-1" class="headerlink" title="结构图"></a>结构图</h3><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318e4401db9.png" alt="结构图"></p><h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a><em>Map</em></h3><h4 id="TreeMap"><a href="#TreeMap" class="headerlink" title="TreeMap"></a><em>TreeMap</em></h4><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318e48eb39c.png" alt="TreeMap"></p><p>基于红黑树实现，时间复杂度为 <em>O(lgn)</em></p><p>出于性能原因，<em>TreeMap</em> 是非同步的</p><p>实现 <em>AbstractMap</em> 抽象基类，间接实现 <em>Map</em> 接口</p><h5 id="底层数据结构-6"><a href="#底层数据结构-6" class="headerlink" title="底层数据结构"></a>底层数据结构</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">private transient Entry&lt;K,V&gt; root;</span><br><span class="line"></span><br><span class="line">private transient int size = 0;</span><br><span class="line"></span><br><span class="line">private transient int modCount = 0;</span><br></pre></td></tr></table></figure></div><h5 id="构造器-8"><a href="#构造器-8" class="headerlink" title="构造器"></a>构造器</h5><table><thead><tr><th align="center"><strong>构造器</strong></th><th align="center"><strong>描述</strong></th></tr></thead><tbody><tr><td align="center"><strong>TreeMap</strong>()</td><td align="center">使用其键的自然顺序构造一个新的空树图。</td></tr><tr><td align="center"><strong>TreeMap</strong>(Comparator&lt;? super K&gt; comparator)</td><td align="center">构造一个新的空树图，根据给定的比较器排序。</td></tr><tr><td align="center"><strong>TreeMap</strong>(Map&lt;? extends K,? extends V&gt; m)</td><td align="center">构造一个新的树映射，其中包含与给定映射相同的映射，根据其键的 <em>自然顺序排序</em> 。</td></tr><tr><td align="center"><strong>TreeMap</strong>(SortedMap&lt;K,? extends V&gt; m)</td><td align="center">构造一个包含相同映射的新树映射，并使用与指定有序映射相同的顺序。</td></tr></tbody></table><pre><code>public TreeMap() {
    comparator = null;
}

public TreeMap(Comparator&lt;? super K&gt; comparator) {
    this.comparator = comparator;
}

public TreeMap(Map&lt;? extends K, ? extends V&gt; m) {
    comparator = null;
    putAll(m);
}

public TreeMap(SortedMap&lt;K, ? extends V&gt; m) {
    comparator = m.comparator();
    try {
        buildFromSorted(m.size(), m.entrySet().iterator(), null, null);
    } catch (java.io.IOException | ClassNotFoundException cannotHappen) {
    }
}
</code></pre><h5 id="方法概要-8"><a href="#方法概要-8" class="headerlink" title="方法概要"></a>方法概要</h5><table><thead><tr><th align="center"><strong>变量和类型</strong></th><th align="center"><strong>方法</strong></th><th align="center"><strong>描述</strong></th></tr></thead><tbody><tr><td align="center">Map.Entry&lt;K,V&gt;</td><td align="center"><strong>ceilingEntry</strong>(K key)</td><td align="center">返回与大于或等于给定键的最小键关联的键 - 值映射，如果没有此键，则 <code>null</code> 。</td></tr><tr><td align="center">K</td><td align="center"><strong>ceilingKey</strong>(K key)</td><td align="center">返回大于或等于给定键的 <code>null</code>键，如果没有这样的键，则 <code>null</code> 。</td></tr><tr><td align="center">void</td><td align="center"><strong>clear</strong>()</td><td align="center">从此映射中删除所有映射。</td></tr><tr><td align="center">Object</td><td align="center"><strong>clone</strong>()</td><td align="center">返回此 <code>TreeMap</code>实例的浅表副本。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>containsKey</strong>(Object key)</td><td align="center">如果此映射包含指定键的映射，则返回 <code>true</code> 。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>containsValue</strong>(Object value)</td><td align="center">如果此映射将一个或多个键映射到指定值，则返回 <code>true</code> 。</td></tr><tr><td align="center">NavigableSet<k></k></td><td align="center"><strong>descendingKeySet</strong>()</td><td align="center">返回此映射中包含的键的反向顺序 <code>NavigableSet</code> 视图。</td></tr><tr><td align="center">NavigableMap&lt;K,V&gt;</td><td align="center"><strong>descendingMap</strong>()</td><td align="center">返回此映射中包含的映射的逆序视图。</td></tr><tr><td align="center">Set&lt;Map.Entry&lt;K,V&gt;&gt;</td><td align="center"><strong>entrySet</strong>()</td><td align="center">返回此映射中包含的映射的 <code>Set</code> 视图。</td></tr><tr><td align="center">Map.Entry&lt;K,V&gt;</td><td align="center"><strong>firstEntry</strong>()</td><td align="center">返回与此映射中的最小键关联的键 - 值映射，如果映射为空，则 <code>null</code> 。</td></tr><tr><td align="center">K</td><td align="center"><strong>firstKey</strong>()</td><td align="center">返回此映射中当前的第一个（最低）键。</td></tr><tr><td align="center">Map.Entry&lt;K,V&gt;</td><td align="center"><strong>floorEntry</strong>(K key)</td><td align="center">返回与小于或等于给定键的最大键关联的键 - 值映射，如果没有此键，则 <code>null</code> 。</td></tr><tr><td align="center">K</td><td align="center"><strong>floorKey</strong>(K key)</td><td align="center">返回小于或等于给定键的最大键，如果没有这样的键，则 <code>null</code> 。</td></tr><tr><td align="center">V</td><td align="center"><strong>get</strong>(Object key)</td><td align="center">返回指定键映射到的值，如果此映射不包含键的映射，则返回 <code>null</code> 。</td></tr><tr><td align="center">SortedMap&lt;K,V&gt;</td><td align="center"><strong>headMap</strong>(K toKey)</td><td align="center">返回此映射的部分视图，其键严格小于 <code>toKey</code> 。</td></tr><tr><td align="center">NavigableMap&lt;K,V&gt;</td><td align="center"><strong>headMap</strong>(K toKey, boolean inclusive)</td><td align="center">返回此映射的部分视图，其键小于（或等于，如果 <code>inclusive</code>为真） <code>toKey</code> 。</td></tr><tr><td align="center">Map.Entry&lt;K,V&gt;</td><td align="center"><strong>higherEntry</strong>(K key)</td><td align="center">返回与严格大于给定键的最小键关联的键 - 值映射，如果没有此键，则 <code>null</code> 。</td></tr><tr><td align="center">K</td><td align="center"><strong>higherKey</strong>(K key)</td><td align="center">返回严格大于给定键的最小键，如果没有这样的键，则返回 <code>null</code> 。</td></tr><tr><td align="center">Set<k></k></td><td align="center"><strong>keySet</strong>()</td><td align="center">返回此映射中包含的键的 <code>Set</code> 视图。</td></tr><tr><td align="center">Map.Entry&lt;K,V&gt;</td><td align="center"><strong>lastEntry</strong>()</td><td align="center">返回与此映射中的最大键关联的键 - 值映射，如果映射为空，则 <code>null</code> 。</td></tr><tr><td align="center">K</td><td align="center"><strong>lastKey</strong>()</td><td align="center">返回此映射中当前的最后一个（最高）键。</td></tr><tr><td align="center">Map.Entry&lt;K,V&gt;</td><td align="center"><strong>lowerEntry</strong>(K key)</td><td align="center">返回与严格小于给定键的最大键相关联的键 - 值映射，如果没有这样的键，则 <code>null</code> 。</td></tr><tr><td align="center">K</td><td align="center"><strong>lowerKey</strong>(K key)</td><td align="center">返回严格小于给定键的最大键，如果没有这样键，则返回 <code>null</code> 。</td></tr><tr><td align="center">NavigableSet<k></k></td><td align="center"><strong>navigableKeySet</strong>()</td><td align="center">返回此映射中包含的键的 <code>NavigableSet</code>视图。</td></tr><tr><td align="center">Map.Entry&lt;K,V&gt;</td><td align="center"><strong>pollFirstEntry</strong>()</td><td align="center">删除并返回与此映射中的最小键关联的键 - 值映射，如果映射为空，则 <code>null</code> 。</td></tr><tr><td align="center">Map.Entry&lt;K,V&gt;</td><td align="center"><strong>pollLastEntry</strong>()</td><td align="center">删除并返回与此映射中的最大键关联的键 - 值映射，如果映射为空，则 <code>null</code> 。</td></tr><tr><td align="center">V</td><td align="center"><strong>put</strong>(K key, V value)</td><td align="center">将指定的值与此映射中的指定键相关联。</td></tr><tr><td align="center">void</td><td align="center"><strong>putAll</strong>(Map&lt;? extends K,? extends V&gt; map)</td><td align="center">将指定映射中的所有映射复制到此映射。</td></tr><tr><td align="center">V</td><td align="center"><strong>remove</strong>(Object key)</td><td align="center">如果存在，则从此TreeMap中删除此键的映射。</td></tr><tr><td align="center">int</td><td align="center"><strong>size</strong>()</td><td align="center">返回此映射中键 - 值映射的数量。</td></tr><tr><td align="center">NavigableMap&lt;K,V&gt;</td><td align="center"><strong>subMap</strong>(K fromKey, boolean fromInclusive, K toKey, boolean toInclusive)</td><td align="center">返回此映射部分的视图，其键范围为 <code>fromKey</code>至 <code>toKey</code> 。</td></tr><tr><td align="center">SortedMap&lt;K,V&gt;</td><td align="center"><strong>subMap</strong>(K fromKey, K toKey)</td><td align="center">返回此映射部分的视图，其键的范围从 <code>fromKey</code> （包括 <code>toKey</code> ）到 <code>toKey</code> （独占）。</td></tr><tr><td align="center">SortedMap&lt;K,V&gt;</td><td align="center"><strong>tailMap</strong>(K fromKey)</td><td align="center">返回此映射的部分视图，其键大于或等于 <code>fromKey</code> 。</td></tr><tr><td align="center">NavigableMap&lt;K,V&gt;</td><td align="center"><strong>tailMap</strong>(K fromKey, boolean inclusive)</td><td align="center">返回此映射的部分视图，其键大于（或等于，如果 <code>inclusive</code>为真） <code>fromKey</code> 。</td></tr><tr><td align="center">Collection<v></v></td><td align="center"><strong>values</strong>()</td><td align="center">返回此映射中包含的值的 <code>Collection</code> 视图。</td></tr></tbody></table><h5 id="rotateLeft"><a href="#rotateLeft" class="headerlink" title="rotateLeft"></a>rotateLeft</h5><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318e5381772.png" alt="rotateLeft"></p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 左旋</span><br><span class="line">private void rotateLeft(Entry&lt;K,V&gt; p) {</span><br><span class="line">    if (p != null) {</span><br><span class="line">        Entry&lt;K,V&gt; r = p.right;</span><br><span class="line">        p.right = r.left;</span><br><span class="line">        if (r.left != null)</span><br><span class="line">            r.left.parent = p;</span><br><span class="line">        r.parent = p.parent;</span><br><span class="line">        if (p.parent == null)</span><br><span class="line">            root = r;</span><br><span class="line">        else if (p.parent.left == p)</span><br><span class="line">            p.parent.left = r;</span><br><span class="line">        else</span><br><span class="line">            p.parent.right = r;</span><br><span class="line">        r.left = p;</span><br><span class="line">        p.parent = r;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="rotateRight"><a href="#rotateRight" class="headerlink" title="rotateRight"></a>rotateRight</h5><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318e58e4eaa.png" alt="rotateRight"></p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 右旋</span><br><span class="line">private void rotateRight(Entry&lt;K,V&gt; p) {</span><br><span class="line">    if (p != null) {</span><br><span class="line">        Entry&lt;K,V&gt; l = p.left;</span><br><span class="line">        p.left = l.right;</span><br><span class="line">        if (l.right != null) l.right.parent = p;</span><br><span class="line">        l.parent = p.parent;</span><br><span class="line">        if (p.parent == null)</span><br><span class="line">            root = l;</span><br><span class="line">        else if (p.parent.right == p)</span><br><span class="line">            p.parent.right = l;</span><br><span class="line">        else p.parent.left = l;</span><br><span class="line">        l.right = p;</span><br><span class="line">        p.parent = l;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="colorOf"><a href="#colorOf" class="headerlink" title="colorOf"></a>colorOf</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 查看节点颜色</span><br><span class="line">private static &lt;K,V&gt; boolean colorOf(Entry&lt;K,V&gt; p) {</span><br><span class="line">    return (p == null ? BLACK : p.color);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="parentOf"><a href="#parentOf" class="headerlink" title="parentOf"></a>parentOf</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 查看节点双亲</span><br><span class="line">private static &lt;K,V&gt; Entry&lt;K,V&gt; parentOf(Entry&lt;K,V&gt; p) {</span><br><span class="line">    return (p == null ? null: p.parent);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="setColor"><a href="#setColor" class="headerlink" title="setColor"></a>setColor</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 设置节点颜色</span><br><span class="line">private static &lt;K,V&gt; void setColor(Entry&lt;K,V&gt; p, boolean c) {</span><br><span class="line">    if (p != null)</span><br><span class="line">        p.color = c;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="leftOf"><a href="#leftOf" class="headerlink" title="leftOf"></a>leftOf</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 左孩子</span><br><span class="line">private static &lt;K,V&gt; Entry&lt;K,V&gt; leftOf(Entry&lt;K,V&gt; p) {</span><br><span class="line">    return (p == null) ? null: p.left;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="rightOf"><a href="#rightOf" class="headerlink" title="rightOf"></a>rightOf</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 右孩子</span><br><span class="line">private static &lt;K,V&gt; Entry&lt;K,V&gt; rightOf(Entry&lt;K,V&gt; p) {</span><br><span class="line">    return (p == null) ? null: p.right;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="fixAfterInsertion"><a href="#fixAfterInsertion" class="headerlink" title="fixAfterInsertion"></a>fixAfterInsertion</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">// 插入后的调整函数</span><br><span class="line">private void fixAfterInsertion(Entry&lt;K,V&gt; x) {</span><br><span class="line">    x.color = RED;</span><br><span class="line"></span><br><span class="line">    while (x != null &amp;&amp; x != root &amp;&amp; x.parent.color == RED) {</span><br><span class="line">        if (parentOf(x) == leftOf(parentOf(parentOf(x)))) {</span><br><span class="line">            Entry&lt;K,V&gt; y = rightOf(parentOf(parentOf(x)));</span><br><span class="line">            if (colorOf(y) == RED) {</span><br><span class="line">                setColor(parentOf(x), BLACK);</span><br><span class="line">                setColor(y, BLACK);</span><br><span class="line">                setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">                x = parentOf(parentOf(x));</span><br><span class="line">            } else {</span><br><span class="line">                if (x == rightOf(parentOf(x))) {</span><br><span class="line">                    x = parentOf(x);</span><br><span class="line">                    rotateLeft(x);</span><br><span class="line">                }</span><br><span class="line">                setColor(parentOf(x), BLACK);</span><br><span class="line">                setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">                rotateRight(parentOf(parentOf(x)));</span><br><span class="line">            }</span><br><span class="line">        } else {</span><br><span class="line">            Entry&lt;K,V&gt; y = leftOf(parentOf(parentOf(x)));</span><br><span class="line">            if (colorOf(y) == RED) {</span><br><span class="line">                setColor(parentOf(x), BLACK);</span><br><span class="line">                setColor(y, BLACK);</span><br><span class="line">                setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">                x = parentOf(parentOf(x));</span><br><span class="line">            } else {</span><br><span class="line">                if (x == leftOf(parentOf(x))) {</span><br><span class="line">                    x = parentOf(x);</span><br><span class="line">                    rotateRight(x);</span><br><span class="line">                }</span><br><span class="line">                setColor(parentOf(x), BLACK);</span><br><span class="line">                setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">                rotateLeft(parentOf(parentOf(x)));</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    root.color = BLACK;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="fixAfterDeletion"><a href="#fixAfterDeletion" class="headerlink" title="fixAfterDeletion"></a>fixAfterDeletion</h5><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318e600c864.png" alt="fixAfterDeletion"></p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">// 删除后的调整函数</span><br><span class="line">private void fixAfterDeletion(Entry&lt;K,V&gt; x) {</span><br><span class="line">    while (x != root &amp;&amp; colorOf(x) == BLACK) {</span><br><span class="line">        if (x == leftOf(parentOf(x))) {</span><br><span class="line">            Entry&lt;K,V&gt; sib = rightOf(parentOf(x));</span><br><span class="line"></span><br><span class="line">            if (colorOf(sib) == RED) {</span><br><span class="line">                setColor(sib, BLACK);</span><br><span class="line">                setColor(parentOf(x), RED);</span><br><span class="line">                rotateLeft(parentOf(x));</span><br><span class="line">                sib = rightOf(parentOf(x));</span><br><span class="line">            }</span><br><span class="line">    </span><br><span class="line">            if (colorOf(leftOf(sib))  == BLACK &amp;&amp;</span><br><span class="line">                colorOf(rightOf(sib)) == BLACK) {</span><br><span class="line">                setColor(sib, RED);</span><br><span class="line">                x = parentOf(x);</span><br><span class="line">            } else {</span><br><span class="line">                if (colorOf(rightOf(sib)) == BLACK) {</span><br><span class="line">                    setColor(leftOf(sib), BLACK);</span><br><span class="line">                    setColor(sib, RED);</span><br><span class="line">                    rotateRight(sib);</span><br><span class="line">                    sib = rightOf(parentOf(x));</span><br><span class="line">                }</span><br><span class="line">                setColor(sib, colorOf(parentOf(x)));</span><br><span class="line">                setColor(parentOf(x), BLACK);</span><br><span class="line">                setColor(rightOf(sib), BLACK);</span><br><span class="line">                rotateLeft(parentOf(x));</span><br><span class="line">                x = root;</span><br><span class="line">            }</span><br><span class="line">        } else { // symmetric</span><br><span class="line">            Entry&lt;K,V&gt; sib = leftOf(parentOf(x));</span><br><span class="line">    </span><br><span class="line">            if (colorOf(sib) == RED) {</span><br><span class="line">                setColor(sib, BLACK);</span><br><span class="line">                setColor(parentOf(x), RED);</span><br><span class="line">                rotateRight(parentOf(x));</span><br><span class="line">                sib = leftOf(parentOf(x));</span><br><span class="line">            }</span><br><span class="line">    </span><br><span class="line">            if (colorOf(rightOf(sib)) == BLACK &amp;&amp;</span><br><span class="line">                colorOf(leftOf(sib)) == BLACK) {</span><br><span class="line">                setColor(sib, RED);</span><br><span class="line">                x = parentOf(x);</span><br><span class="line">            } else {</span><br><span class="line">                if (colorOf(leftOf(sib)) == BLACK) {</span><br><span class="line">                    setColor(rightOf(sib), BLACK);</span><br><span class="line">                    setColor(sib, RED);</span><br><span class="line">                    rotateLeft(sib);</span><br><span class="line">                    sib = leftOf(parentOf(x));</span><br><span class="line">                }</span><br><span class="line">                setColor(sib, colorOf(parentOf(x)));</span><br><span class="line">                setColor(parentOf(x), BLACK);</span><br><span class="line">                setColor(leftOf(sib), BLACK);</span><br><span class="line">                rotateRight(parentOf(x));</span><br><span class="line">                x = root;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    setColor(x, BLACK);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="getEntry"><a href="#getEntry" class="headerlink" title="getEntry"></a>getEntry</h5><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318e66341c0.png" alt="getEntry"></p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 取节点</span><br><span class="line">final Entry&lt;K,V&gt; getEntry(Object key) {</span><br><span class="line">    // Offload comparator-based version for sake of performance</span><br><span class="line">    if (comparator != null)</span><br><span class="line">        return getEntryUsingComparator(key);</span><br><span class="line">    if (key == null)</span><br><span class="line">        throw new NullPointerException();</span><br><span class="line">    @SuppressWarnings("unchecked")</span><br><span class="line">        Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key;</span><br><span class="line">    Entry&lt;K,V&gt; p = root;</span><br><span class="line">    while (p != null) {</span><br><span class="line">        int cmp = k.compareTo(p.key);</span><br><span class="line">        if (cmp &lt; 0)</span><br><span class="line">            p = p.left;</span><br><span class="line">        else if (cmp &gt; 0)</span><br><span class="line">            p = p.right;</span><br><span class="line">        else</span><br><span class="line">            return p;</span><br><span class="line">    }</span><br><span class="line">    return null;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="getEntryUsingComparator"><a href="#getEntryUsingComparator" class="headerlink" title="getEntryUsingComparator"></a>getEntryUsingComparator</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// 使用比较器取节点</span><br><span class="line">final Entry&lt;K,V&gt; getEntryUsingComparator(Object key) {</span><br><span class="line">    @SuppressWarnings("unchecked")</span><br><span class="line">        K k = (K) key;</span><br><span class="line">    Comparator&lt;? super K&gt; cpr = comparator;</span><br><span class="line">    if (cpr != null) {</span><br><span class="line">        Entry&lt;K,V&gt; p = root;</span><br><span class="line">        while (p != null) {</span><br><span class="line">            int cmp = cpr.compare(k, p.key);</span><br><span class="line">            if (cmp &lt; 0)</span><br><span class="line">                p = p.left;</span><br><span class="line">            else if (cmp &gt; 0)</span><br><span class="line">                p = p.right;</span><br><span class="line">            else</span><br><span class="line">                return p;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return null;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="getFirstEntry"><a href="#getFirstEntry" class="headerlink" title="getFirstEntry"></a>getFirstEntry</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">final Entry&lt;K,V&gt; getFirstEntry() {</span><br><span class="line">    Entry&lt;K,V&gt; p = root;</span><br><span class="line">    if (p != null)</span><br><span class="line">        while (p.left != null)</span><br><span class="line">            p = p.left;</span><br><span class="line">    return p;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="getLastEntry"><a href="#getLastEntry" class="headerlink" title="getLastEntry"></a>getLastEntry</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">final Entry&lt;K,V&gt; getLastEntry() {</span><br><span class="line">    Entry&lt;K,V&gt; p = root;</span><br><span class="line">    if (p != null)</span><br><span class="line">        while (p.right != null)</span><br><span class="line">            p = p.right;</span><br><span class="line">    return p;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="get-2"><a href="#get-2" class="headerlink" title="get"></a>get</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 根据指定的 key 返回相应的 value</span><br><span class="line">public V get(Object key) {</span><br><span class="line">    Entry&lt;K,V&gt; p = getEntry(key);</span><br><span class="line">    return (p==null ? null : p.value);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="firstKey"><a href="#firstKey" class="headerlink" title="firstKey"></a>firstKey</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public K firstKey() {</span><br><span class="line">    return key(getFirstEntry());</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="lastKey"><a href="#lastKey" class="headerlink" title="lastKey"></a>lastKey</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public K lastKey() {</span><br><span class="line">    return key(getLastEntry());</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="buildFromSorted"><a href="#buildFromSorted" class="headerlink" title="buildFromSorted"></a>buildFromSorted</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">private void buildFromSorted(int size, Iterator&lt;?&gt; it,</span><br><span class="line">                             java.io.ObjectInputStream str,</span><br><span class="line">                             V defaultVal)</span><br><span class="line">    throws  java.io.IOException, ClassNotFoundException {</span><br><span class="line">    this.size = size;</span><br><span class="line">    root = buildFromSorted(0, 0, size-1, computeRedLevel(size),</span><br><span class="line">                           it, str, defaultVal);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">private final Entry&lt;K,V&gt; buildFromSorted(int level, int lo, int hi,</span><br><span class="line">                                         int redLevel,</span><br><span class="line">                                         Iterator&lt;?&gt; it,</span><br><span class="line">                                         java.io.ObjectInputStream str,</span><br><span class="line">                                         V defaultVal)</span><br><span class="line">    throws  java.io.IOException, ClassNotFoundException {</span><br><span class="line">    /*</span><br><span class="line">     * Strategy: The root is the middlemost element. To get to it, we</span><br><span class="line">     * have to first recursively construct the entire left subtree,</span><br><span class="line">     * so as to grab all of its elements. We can then proceed with right</span><br><span class="line">     * subtree.</span><br><span class="line">     *</span><br><span class="line">     * The lo and hi arguments are the minimum and maximum</span><br><span class="line">     * indices to pull out of the iterator or stream for current subtree.</span><br><span class="line">     * They are not actually indexed, we just proceed sequentially,</span><br><span class="line">     * ensuring that items are extracted in corresponding order.</span><br><span class="line">     */</span><br><span class="line"></span><br><span class="line">    if (hi &lt; lo) return null;</span><br><span class="line"></span><br><span class="line">    int mid = (lo + hi) &gt;&gt;&gt; 1;</span><br><span class="line"></span><br><span class="line">    Entry&lt;K,V&gt; left  = null;</span><br><span class="line">    if (lo &lt; mid)</span><br><span class="line">        left = buildFromSorted(level+1, lo, mid - 1, redLevel,</span><br><span class="line">                               it, str, defaultVal);</span><br><span class="line"></span><br><span class="line">    // extract key and/or value from iterator or stream</span><br><span class="line">    K key;</span><br><span class="line">    V value;</span><br><span class="line">    if (it != null) {</span><br><span class="line">        if (defaultVal==null) {</span><br><span class="line">            Map.Entry&lt;?,?&gt; entry = (Map.Entry&lt;?,?&gt;)it.next();</span><br><span class="line">            key = (K)entry.getKey();</span><br><span class="line">            value = (V)entry.getValue();</span><br><span class="line">        } else {</span><br><span class="line">            key = (K)it.next();</span><br><span class="line">            value = defaultVal;</span><br><span class="line">        }</span><br><span class="line">    } else { // use stream</span><br><span class="line">        key = (K) str.readObject();</span><br><span class="line">        value = (defaultVal != null ? defaultVal : (V) str.readObject());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    Entry&lt;K,V&gt; middle =  new Entry&lt;&gt;(key, value, null);</span><br><span class="line"></span><br><span class="line">    // color nodes in non-full bottommost level red</span><br><span class="line">    if (level == redLevel)</span><br><span class="line">        middle.color = RED;</span><br><span class="line"></span><br><span class="line">    if (left != null) {</span><br><span class="line">        middle.left = left;</span><br><span class="line">        left.parent = middle;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    if (mid &lt; hi) {</span><br><span class="line">        Entry&lt;K,V&gt; right = buildFromSorted(level+1, mid+1, hi, redLevel,</span><br><span class="line">                                           it, str, defaultVal);</span><br><span class="line">        middle.right = right;</span><br><span class="line">        right.parent = middle;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    return middle;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="putAll"><a href="#putAll" class="headerlink" title="putAll"></a>putAll</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public void putAll(Map&lt;? extends K, ? extends V&gt; map) {</span><br><span class="line">    int mapSize = map.size();</span><br><span class="line">    if (size==0 &amp;&amp; mapSize!=0 &amp;&amp; map instanceof SortedMap) {</span><br><span class="line">        Comparator&lt;?&gt; c = ((SortedMap&lt;?,?&gt;)map).comparator();</span><br><span class="line">        if (c == comparator || (c != null &amp;&amp; c.equals(comparator))) {</span><br><span class="line">            ++modCount;</span><br><span class="line">            try {</span><br><span class="line">                buildFromSorted(mapSize, map.entrySet().iterator(),</span><br><span class="line">                                null, null);</span><br><span class="line">            } catch (java.io.IOException | ClassNotFoundException cannotHappen) {</span><br><span class="line">            }</span><br><span class="line">            return;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    super.putAll(map);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="put"><a href="#put" class="headerlink" title="put"></a>put</h5><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318e6e5c431.png" alt="put"></p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">public V put(K key, V value) {</span><br><span class="line">    Entry&lt;K,V&gt; t = root;</span><br><span class="line">    if (t == null) {</span><br><span class="line">        compare(key, key); // type (and possibly null) check</span><br><span class="line"></span><br><span class="line">        root = new Entry&lt;&gt;(key, value, null);</span><br><span class="line">        size = 1;</span><br><span class="line">        modCount++;</span><br><span class="line">        return null;</span><br><span class="line">    }</span><br><span class="line">    int cmp;</span><br><span class="line">    Entry&lt;K,V&gt; parent;</span><br><span class="line">    // split comparator and comparable paths</span><br><span class="line">    Comparator&lt;? super K&gt; cpr = comparator; // 自定义构造器</span><br><span class="line">    // 进行查找看是否已经存在这一键值对</span><br><span class="line">    if (cpr != null) {</span><br><span class="line">        do {</span><br><span class="line">            parent = t;</span><br><span class="line">            cmp = cpr.compare(key, t.key);</span><br><span class="line">            if (cmp &lt; 0)</span><br><span class="line">                t = t.left; // 向左找</span><br><span class="line">            else if (cmp &gt; 0)</span><br><span class="line">                t = t.right; // 向右找</span><br><span class="line">            else</span><br><span class="line">                return t.setValue(value);</span><br><span class="line">        } while (t != null);</span><br><span class="line">    }</span><br><span class="line">    else {</span><br><span class="line">        if (key == null)</span><br><span class="line">            throw new NullPointerException();</span><br><span class="line">        @SuppressWarnings("unchecked")</span><br><span class="line">            Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key;</span><br><span class="line">        do {</span><br><span class="line">            parent = t;</span><br><span class="line">            cmp = k.compareTo(t.key);</span><br><span class="line">            if (cmp &lt; 0)</span><br><span class="line">                t = t.left;</span><br><span class="line">            else if (cmp &gt; 0)</span><br><span class="line">                t = t.right;</span><br><span class="line">            else</span><br><span class="line">                return t.setValue(value);</span><br><span class="line">        } while (t != null);</span><br><span class="line">    }</span><br><span class="line">    Entry&lt;K,V&gt; e = new Entry&lt;&gt;(key, value, parent); // 创建新键值对</span><br><span class="line">    if (cmp &lt; 0)</span><br><span class="line">        parent.left = e;</span><br><span class="line">    else</span><br><span class="line">        parent.right = e;</span><br><span class="line">    fixAfterInsertion(e); // 调整</span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">    return null;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="deleteEntry"><a href="#deleteEntry" class="headerlink" title="deleteEntry"></a>deleteEntry</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">// 删除节点</span><br><span class="line">private void deleteEntry(Entry&lt;K,V&gt; p) {</span><br><span class="line">    modCount++;</span><br><span class="line">    size--;</span><br><span class="line"></span><br><span class="line">    // If strictly internal, copy successor's element to p and then make p</span><br><span class="line">    // point to successor.</span><br><span class="line">    if (p.left != null &amp;&amp; p.right != null) {</span><br><span class="line">        Entry&lt;K,V&gt; s = successor(p);</span><br><span class="line">        p.key = s.key;</span><br><span class="line">        p.value = s.value;</span><br><span class="line">        p = s;</span><br><span class="line">    } // p has 2 children</span><br><span class="line"></span><br><span class="line">    // Start fixup at replacement node, if it exists.</span><br><span class="line">    Entry&lt;K,V&gt; replacement = (p.left != null ? p.left : p.right);</span><br><span class="line"></span><br><span class="line">    if (replacement != null) {</span><br><span class="line">        // Link replacement to parent</span><br><span class="line">        replacement.parent = p.parent;</span><br><span class="line">        if (p.parent == null)</span><br><span class="line">            root = replacement;</span><br><span class="line">        else if (p == p.parent.left)</span><br><span class="line">            p.parent.left  = replacement;</span><br><span class="line">        else</span><br><span class="line">            p.parent.right = replacement;</span><br><span class="line"></span><br><span class="line">        // Null out links so they are OK to use by fixAfterDeletion.</span><br><span class="line">        p.left = p.right = p.parent = null;</span><br><span class="line"></span><br><span class="line">        // Fix replacement</span><br><span class="line">        if (p.color == BLACK)</span><br><span class="line">            fixAfterDeletion(replacement);</span><br><span class="line">    } else if (p.parent == null) { // return if we are the only node.</span><br><span class="line">        root = null;</span><br><span class="line">    } else { //  No children. Use self as phantom replacement and unlink.</span><br><span class="line">        if (p.color == BLACK)</span><br><span class="line">            fixAfterDeletion(p);</span><br><span class="line"></span><br><span class="line">        if (p.parent != null) {</span><br><span class="line">            if (p == p.parent.left)</span><br><span class="line">                p.parent.left = null;</span><br><span class="line">            else if (p == p.parent.right)</span><br><span class="line">                p.parent.right = null;</span><br><span class="line">            p.parent = null;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="remove-4"><a href="#remove-4" class="headerlink" title="remove"></a>remove</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public V remove(Object key) {</span><br><span class="line">    Entry&lt;K,V&gt; p = getEntry(key);</span><br><span class="line">    if (p == null)</span><br><span class="line">        return null;</span><br><span class="line"></span><br><span class="line">    V oldValue = p.value;</span><br><span class="line">    deleteEntry(p);</span><br><span class="line">    return oldValue;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h4 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a><em>HashMap</em></h4><p>基于哈希表实现，由数组 + 链表 + 红黑树组成</p><h5 id="底层数据结构-7"><a href="#底层数据结构-7" class="headerlink" title="底层数据结构"></a>底层数据结构</h5><pre><code>static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {
    final int hash;
    final K key;
    V value;
    Node&lt;K,V&gt; next;

    Node(int hash, K key, V value, Node&lt;K,V&gt; next) {
        this.hash = hash;
        this.key = key;
        this.value = value;
        this.next = next;
    }

    public final K getKey()        { return key; }
    public final V getValue()      { return value; }
    public final String toString() { return key + "=" + value; }

    public final int hashCode() {
        return Objects.hashCode(key) ^ Objects.hashCode(value);
    }

    public final V setValue(V newValue) {
        V oldValue = value;
        value = newValue;
        return oldValue;
    }

    public final boolean equals(Object o) {
        if (o == this)
            return true;
        if (o instanceof Map.Entry) {
            Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;
            if (Objects.equals(key, e.getKey()) &amp;&amp;
                Objects.equals(value, e.getValue()))
                return true;
        }
        return false;
    }
}

transient Node&lt;K,V&gt;[] table;

transient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;

transient int size;

transient int modCount;
</code></pre><h5 id="构造器-9"><a href="#构造器-9" class="headerlink" title="构造器"></a>构造器</h5><table><thead><tr><th align="center">构造器</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">HashMap()</td><td align="center">使用默认初始容量（16）和默认加载因子（0.75）构造一个空 <code>HashMap</code> 。</td></tr><tr><td align="center">HashMap(int initialCapacity)</td><td align="center">使用指定的初始容量和默认加载因子（0.75）构造一个空 <code>HashMap</code> 。</td></tr><tr><td align="center">HashMap(int initialCapacity, float loadFactor)</td><td align="center">使用指定的初始容量和加载因子构造一个空 <code>HashMap</code> 。</td></tr><tr><td align="center">HashMap(Map&lt;? extends K,? extends V&gt; m)</td><td align="center">构造一个新的 <code>HashMap</code> ，其映射与指定的 <code>Map</code>相同。</td></tr></tbody></table><pre><code>public HashMap(int initialCapacity, float loadFactor) {
    if (initialCapacity &lt; 0)
        throw new IllegalArgumentException("Illegal initial capacity: " +
                                           initialCapacity);
    if (initialCapacity &gt; MAXIMUM_CAPACITY)
        initialCapacity = MAXIMUM_CAPACITY;
    if (loadFactor &lt;= 0 || Float.isNaN(loadFactor))
        throw new IllegalArgumentException("Illegal load factor: " +
                                           loadFactor);
    this.loadFactor = loadFactor;
    this.threshold = tableSizeFor(initialCapacity);
}

public HashMap(int initialCapacity) {
    this(initialCapacity, DEFAULT_LOAD_FACTOR);
}

public HashMap() {
    this.loadFactor = DEFAULT_LOAD_FACTOR; // all other fields defaulted
}

public HashMap(Map&lt;? extends K, ? extends V&gt; m) {
    this.loadFactor = DEFAULT_LOAD_FACTOR;
    putMapEntries(m, false);
}
</code></pre><h5 id="方法概要-9"><a href="#方法概要-9" class="headerlink" title="方法概要"></a>方法概要</h5><table><thead><tr><th align="center">变量和类型</th><th align="center">方法</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">void</td><td align="center"><strong>clear</strong>()</td><td align="center">从此映射中删除所有映射。</td></tr><tr><td align="center">Object</td><td align="center"><strong>clone</strong>()</td><td align="center">返回此 <code>HashMap</code>实例的浅表副本：未克隆键和值本身。</td></tr><tr><td align="center">V</td><td align="center"><strong>compute</strong>(K key, BiFunction&lt;? super K,? super V,? extends V&gt; remappingFunction)</td><td align="center">尝试计算指定键及其当前映射值的映射（如果没有当前映射， <code>null</code> ）。</td></tr><tr><td align="center">V</td><td align="center"><strong>computeIfAbsent</strong>(K key, Function&lt;? super K,? extends V&gt; mappingFunction)</td><td align="center">如果指定的键尚未与值关联（或映射到 <code>null</code> ），则尝试使用给定的映射函数计算其值并将其输入此映射，除非 <code>null</code> 。</td></tr><tr><td align="center">V</td><td align="center"><strong>computeIfPresent</strong>(K key, BiFunction&lt;? super K,? super V,? extends V&gt; remappingFunction)</td><td align="center">如果指定键的值存在且为非null，则尝试在给定键及其当前映射值的情况下计算新映射。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>containsKey</strong>(Object key)</td><td align="center">如果此映射包含指定键的映射，则返回 <code>true</code> 。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>containsValue</strong>(Object value)</td><td align="center">如果此映射将一个或多个键映射到指定值，则返回 <code>true</code> 。</td></tr><tr><td align="center">Set&lt;Map.Entry&lt;K,V&gt;&gt;</td><td align="center"><strong>entrySet</strong>()</td><td align="center">返回此映射中包含的映射的 <code>Set</code> 视图。</td></tr><tr><td align="center">V</td><td align="center"><strong>get</strong>(Object key)</td><td align="center">返回指定键映射到的值，如果此映射不包含键的映射，则返回 <code>null</code> 。</td></tr><tr><td align="center">boolean</td><td align="center"><strong>isEmpty</strong>()</td><td align="center">如果此映射不包含键 - 值映射，则返回 <code>true</code> 。</td></tr><tr><td align="center">Set<k></k></td><td align="center"><strong>keySet</strong>()</td><td align="center">返回此映射中包含的键的 <code>Set</code> 视图。</td></tr><tr><td align="center">V</td><td align="center"><strong>merge</strong>(K key, V value, BiFunction&lt;? super V,? super V,? extends V&gt; remappingFunction)</td><td align="center">如果指定的键尚未与值关联或与null关联，则将其与给定的非空值关联。</td></tr><tr><td align="center">V</td><td align="center"><strong>put</strong>(K key, V value)</td><td align="center">将指定的值与此映射中的指定键相关联。</td></tr><tr><td align="center">void</td><td align="center"><strong>putAll</strong>(Map&lt;? extends K,? extends V&gt; m)</td><td align="center">将指定映射中的所有映射复制到此映射。</td></tr><tr><td align="center">V</td><td align="center"><strong>remove</strong>(Object key)</td><td align="center">从此映射中删除指定键的映射（如果存在）。</td></tr><tr><td align="center">int</td><td align="center"><strong>size</strong>()</td><td align="center">返回此映射中键 - 值映射的数量。</td></tr><tr><td align="center">Collection<v></v></td><td align="center"><strong>values</strong>()</td><td align="center">返回此映射中包含的值的 <code>Collection</code> 视图。</td></tr></tbody></table><h5 id="扩容函数-2"><a href="#扩容函数-2" class="headerlink" title="扩容函数"></a>扩容函数</h5><pre><code>final Node&lt;K,V&gt;[] resize() {
    Node&lt;K,V&gt;[] oldTab = table;
    int oldCap = (oldTab == null) ? 0 : oldTab.length;
    int oldThr = threshold;
    int newCap, newThr = 0;
    if (oldCap &gt; 0) {
        if (oldCap &gt;= MAXIMUM_CAPACITY) {
            threshold = Integer.MAX_VALUE;
            return oldTab;
        }
        else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp;
                 oldCap &gt;= DEFAULT_INITIAL_CAPACITY)
            newThr = oldThr &lt;&lt; 1; // double threshold
    }
    else if (oldThr &gt; 0) // initial capacity was placed in threshold
        newCap = oldThr;
    else {               // zero initial threshold signifies using defaults
        newCap = DEFAULT_INITIAL_CAPACITY;
        newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);
    }
    if (newThr == 0) {
        float ft = (float)newCap * loadFactor;
        newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ?
                  (int)ft : Integer.MAX_VALUE);
    }
    threshold = newThr;
    @SuppressWarnings({"rawtypes","unchecked"})
    Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap];
    table = newTab;
    if (oldTab != null) {
        for (int j = 0; j &lt; oldCap; ++j) {
            Node&lt;K,V&gt; e;
            if ((e = oldTab[j]) != null) {
                oldTab[j] = null;
                if (e.next == null)
                    newTab[e.hash &amp; (newCap - 1)] = e;
                else if (e instanceof TreeNode)
                    ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap);
                else { // preserve order
                    Node&lt;K,V&gt; loHead = null, loTail = null;
                    Node&lt;K,V&gt; hiHead = null, hiTail = null;
                    Node&lt;K,V&gt; next;
                    do {
                        next = e.next;
                        if ((e.hash &amp; oldCap) == 0) {
                            if (loTail == null)
                                loHead = e;
                            else
                                loTail.next = e;
                            loTail = e;
                        }
                        else {
                            if (hiTail == null)
                                hiHead = e;
                            else
                                hiTail.next = e;
                            hiTail = e;
                        }
                    } while ((e = next) != null);
                    if (loTail != null) {
                        loTail.next = null;
                        newTab[j] = loHead;
                    }
                    if (hiTail != null) {
                        hiTail.next = null;
                        newTab[j + oldCap] = hiHead;
                    }
                }
            }
        }
    }
    return newTab;
}
</code></pre><h5 id="getNode"><a href="#getNode" class="headerlink" title="getNode"></a>getNode</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 取节点</span><br><span class="line">final Node&lt;K,V&gt; getNode(int hash, Object key) {</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n; K k;</span><br><span class="line">    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;</span><br><span class="line">        (first = tab[(n - 1) &amp; hash]) != null) {</span><br><span class="line">        if (first.hash == hash &amp;&amp; // always check first node</span><br><span class="line">            ((k = first.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">            return first;</span><br><span class="line">        if ((e = first.next) != null) {</span><br><span class="line">            if (first instanceof TreeNode)</span><br><span class="line">                return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class="line">            do {</span><br><span class="line">                if (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">                    return e;</span><br><span class="line">            } while ((e = e.next) != null);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return null;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="get-3"><a href="#get-3" class="headerlink" title="get"></a>get</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public V get(Object key) {</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    return (e = getNode(hash(key), key)) == null ? null : e.value;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="containsKey"><a href="#containsKey" class="headerlink" title="containsKey"></a>containsKey</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public boolean containsKey(Object key) {</span><br><span class="line">    return getNode(hash(key), key) != null;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="putVal"><a href="#putVal" class="headerlink" title="putVal"></a>putVal</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">final V putVal(int hash, K key, V value, boolean onlyIfAbsent,</span><br><span class="line">               boolean evict) {</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i;</span><br><span class="line">    if ((tab = table) == null || (n = tab.length) == 0)</span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    if ((p = tab[i = (n - 1) &amp; hash]) == null)</span><br><span class="line">        tab[i] = newNode(hash, key, value, null);</span><br><span class="line">    else {</span><br><span class="line">        Node&lt;K,V&gt; e; K k;</span><br><span class="line">        if (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">            e = p;</span><br><span class="line">        else if (p instanceof TreeNode)</span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);</span><br><span class="line">        else {</span><br><span class="line">            for (int binCount = 0; ; ++binCount) {</span><br><span class="line">                if ((e = p.next) == null) {</span><br><span class="line">                    p.next = newNode(hash, key, value, null);</span><br><span class="line">                    if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st</span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    break;</span><br><span class="line">                }</span><br><span class="line">                if (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">                    break;</span><br><span class="line">                p = e;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        if (e != null) { // existing mapping for key</span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            if (!onlyIfAbsent || oldValue == null)</span><br><span class="line">                e.value = value;</span><br><span class="line">            afterNodeAccess(e);</span><br><span class="line">            return oldValue;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    ++modCount;</span><br><span class="line">    if (++size &gt; threshold)</span><br><span class="line">        resize();</span><br><span class="line">    afterNodeInsertion(evict);</span><br><span class="line">    return null;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="putMapEntries"><a href="#putMapEntries" class="headerlink" title="putMapEntries"></a>putMapEntries</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">final void putMapEntries(Map&lt;? extends K, ? extends V&gt; m, boolean evict) {</span><br><span class="line">    int s = m.size();</span><br><span class="line">    if (s &gt; 0) {</span><br><span class="line">        if (table == null) { // pre-size</span><br><span class="line">            float ft = ((float)s / loadFactor) + 1.0F;</span><br><span class="line">            int t = ((ft &lt; (float)MAXIMUM_CAPACITY) ?</span><br><span class="line">                     (int)ft : MAXIMUM_CAPACITY);</span><br><span class="line">            if (t &gt; threshold)</span><br><span class="line">                threshold = tableSizeFor(t);</span><br><span class="line">        }</span><br><span class="line">        else if (s &gt; threshold)</span><br><span class="line">            resize();</span><br><span class="line">        for (Map.Entry&lt;? extends K, ? extends V&gt; e : m.entrySet()) {</span><br><span class="line">            K key = e.getKey();</span><br><span class="line">            V value = e.getValue();</span><br><span class="line">            putVal(hash(key), key, value, false, evict);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="put-1"><a href="#put-1" class="headerlink" title="put"></a>put</h5><pre><code>public V put(K key, V value) {
    return putVal(hash(key), key, value, false, true);
}
</code></pre><h5 id="putAll-1"><a href="#putAll-1" class="headerlink" title="putAll"></a>putAll</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public void putAll(Map&lt;? extends K, ? extends V&gt; m) {</span><br><span class="line">    putMapEntries(m, true);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="removeNode"><a href="#removeNode" class="headerlink" title="removeNode"></a>removeNode</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">final Node&lt;K,V&gt; removeNode(int hash, Object key, Object value,</span><br><span class="line">                           boolean matchValue, boolean movable) {</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, index;</span><br><span class="line">    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;</span><br><span class="line">        (p = tab[index = (n - 1) &amp; hash]) != null) {</span><br><span class="line">        Node&lt;K,V&gt; node = null, e; K k; V v;</span><br><span class="line">        if (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">            node = p;</span><br><span class="line">        else if ((e = p.next) != null) {</span><br><span class="line">            if (p instanceof TreeNode)</span><br><span class="line">                node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key);</span><br><span class="line">            else {</span><br><span class="line">                do {</span><br><span class="line">                    if (e.hash == hash &amp;&amp;</span><br><span class="line">                        ((k = e.key) == key ||</span><br><span class="line">                         (key != null &amp;&amp; key.equals(k)))) {</span><br><span class="line">                        node = e;</span><br><span class="line">                        break;</span><br><span class="line">                    }</span><br><span class="line">                    p = e;</span><br><span class="line">                } while ((e = e.next) != null);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        if (node != null &amp;&amp; (!matchValue || (v = node.value) == value ||</span><br><span class="line">                             (value != null &amp;&amp; value.equals(v)))) {</span><br><span class="line">            if (node instanceof TreeNode)</span><br><span class="line">                ((TreeNode&lt;K,V&gt;)node).removeTreeNode(this, tab, movable);</span><br><span class="line">            else if (node == p)</span><br><span class="line">                tab[index] = node.next;</span><br><span class="line">            else</span><br><span class="line">                p.next = node.next;</span><br><span class="line">            ++modCount;</span><br><span class="line">            --size;</span><br><span class="line">            afterNodeRemoval(node);</span><br><span class="line">            return node;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return null;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="remove-5"><a href="#remove-5" class="headerlink" title="remove"></a>remove</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public V remove(Object key) {</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    return (e = removeNode(hash(key), key, null, false, true)) == null ?</span><br><span class="line">        null : e.value;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="containsValue"><a href="#containsValue" class="headerlink" title="containsValue"></a>containsValue</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public boolean containsValue(Object value) {</span><br><span class="line">    Node&lt;K,V&gt;[] tab; V v;</span><br><span class="line">    if ((tab = table) != null &amp;&amp; size &gt; 0) {</span><br><span class="line">        for (Node&lt;K,V&gt; e : tab) {</span><br><span class="line">            for (; e != null; e = e.next) {</span><br><span class="line">                if ((v = e.value) == value ||</span><br><span class="line">                    (value != null &amp;&amp; value.equals(v)))</span><br><span class="line">                    return true;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return false;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="keySet"><a href="#keySet" class="headerlink" title="keySet"></a>keySet</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">// 返回 key 的集合</span><br><span class="line">public Set&lt;K&gt; keySet() {</span><br><span class="line">    Set&lt;K&gt; ks = keySet;</span><br><span class="line">    if (ks == null) {</span><br><span class="line">        ks = new KeySet();</span><br><span class="line">        keySet = ks;</span><br><span class="line">    }</span><br><span class="line">    return ks;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">final class KeySet extends AbstractSet&lt;K&gt; {</span><br><span class="line">    public final int size()                 { return size; }</span><br><span class="line">    public final void clear()               { HashMap.this.clear(); }</span><br><span class="line">    public final Iterator&lt;K&gt; iterator()     { return new KeyIterator(); }</span><br><span class="line">    public final boolean contains(Object o) { return containsKey(o); }</span><br><span class="line">    public final boolean remove(Object key) {</span><br><span class="line">        return removeNode(hash(key), key, null, false, true) != null;</span><br><span class="line">    }</span><br><span class="line">    public final Spliterator&lt;K&gt; spliterator() {</span><br><span class="line">        return new KeySpliterator&lt;&gt;(HashMap.this, 0, -1, 0, 0);</span><br><span class="line">    }</span><br><span class="line">    public final void forEach(Consumer&lt;? super K&gt; action) {</span><br><span class="line">        Node&lt;K,V&gt;[] tab;</span><br><span class="line">        if (action == null)</span><br><span class="line">            throw new NullPointerException();</span><br><span class="line">        if (size &gt; 0 &amp;&amp; (tab = table) != null) {</span><br><span class="line">            int mc = modCount;</span><br><span class="line">            for (Node&lt;K,V&gt; e : tab) {</span><br><span class="line">                for (; e != null; e = e.next)</span><br><span class="line">                    action.accept(e.key);</span><br><span class="line">            }</span><br><span class="line">            if (modCount != mc)</span><br><span class="line">                throw new ConcurrentModificationException();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="values"><a href="#values" class="headerlink" title="values"></a>values</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">// 返回 value 的集合</span><br><span class="line">public Collection&lt;V&gt; values() {</span><br><span class="line">    Collection&lt;V&gt; vs = values;</span><br><span class="line">    if (vs == null) {</span><br><span class="line">        vs = new Values();</span><br><span class="line">        values = vs;</span><br><span class="line">    }</span><br><span class="line">    return vs;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">final class Values extends AbstractCollection&lt;V&gt; {</span><br><span class="line">    public final int size()                 { return size; }</span><br><span class="line">    public final void clear()               { HashMap.this.clear(); }</span><br><span class="line">    public final Iterator&lt;V&gt; iterator()     { return new ValueIterator(); }</span><br><span class="line">    public final boolean contains(Object o) { return containsValue(o); }</span><br><span class="line">    public final Spliterator&lt;V&gt; spliterator() {</span><br><span class="line">        return new ValueSpliterator&lt;&gt;(HashMap.this, 0, -1, 0, 0);</span><br><span class="line">    }</span><br><span class="line">    public final void forEach(Consumer&lt;? super V&gt; action) {</span><br><span class="line">        Node&lt;K,V&gt;[] tab;</span><br><span class="line">        if (action == null)</span><br><span class="line">            throw new NullPointerException();</span><br><span class="line">        if (size &gt; 0 &amp;&amp; (tab = table) != null) {</span><br><span class="line">            int mc = modCount;</span><br><span class="line">            for (Node&lt;K,V&gt; e : tab) {</span><br><span class="line">                for (; e != null; e = e.next)</span><br><span class="line">                    action.accept(e.value);</span><br><span class="line">            }</span><br><span class="line">            if (modCount != mc)</span><br><span class="line">                throw new ConcurrentModificationException();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="entrySet"><a href="#entrySet" class="headerlink" title="entrySet"></a>entrySet</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">// 返回节点的 set 集合</span><br><span class="line">public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() {</span><br><span class="line">    Set&lt;Map.Entry&lt;K,V&gt;&gt; es;</span><br><span class="line">    return (es = entrySet) == null ? (entrySet = new EntrySet()) : es;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">final class EntrySet extends AbstractSet&lt;Map.Entry&lt;K,V&gt;&gt; {</span><br><span class="line">    public final int size()                 { return size; }</span><br><span class="line">    public final void clear()               { HashMap.this.clear(); }</span><br><span class="line">    public final Iterator&lt;Map.Entry&lt;K,V&gt;&gt; iterator() {</span><br><span class="line">        return new EntryIterator();</span><br><span class="line">    }</span><br><span class="line">    public final boolean contains(Object o) {</span><br><span class="line">        if (!(o instanceof Map.Entry))</span><br><span class="line">            return false;</span><br><span class="line">        Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;) o;</span><br><span class="line">        Object key = e.getKey();</span><br><span class="line">        Node&lt;K,V&gt; candidate = getNode(hash(key), key);</span><br><span class="line">        return candidate != null &amp;&amp; candidate.equals(e);</span><br><span class="line">    }</span><br><span class="line">    public final boolean remove(Object o) {</span><br><span class="line">        if (o instanceof Map.Entry) {</span><br><span class="line">            Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;) o;</span><br><span class="line">            Object key = e.getKey();</span><br><span class="line">            Object value = e.getValue();</span><br><span class="line">            return removeNode(hash(key), key, value, true, true) != null;</span><br><span class="line">        }</span><br><span class="line">        return false;</span><br><span class="line">    }</span><br><span class="line">    public final Spliterator&lt;Map.Entry&lt;K,V&gt;&gt; spliterator() {</span><br><span class="line">        return new EntrySpliterator&lt;&gt;(HashMap.this, 0, -1, 0, 0);</span><br><span class="line">    }</span><br><span class="line">    public final void forEach(Consumer&lt;? super Map.Entry&lt;K,V&gt;&gt; action) {</span><br><span class="line">        Node&lt;K,V&gt;[] tab;</span><br><span class="line">        if (action == null)</span><br><span class="line">            throw new NullPointerException();</span><br><span class="line">        if (size &gt; 0 &amp;&amp; (tab = table) != null) {</span><br><span class="line">            int mc = modCount;</span><br><span class="line">            for (Node&lt;K,V&gt; e : tab) {</span><br><span class="line">                for (; e != null; e = e.next)</span><br><span class="line">                    action.accept(e);</span><br><span class="line">            }</span><br><span class="line">            if (modCount != mc)</span><br><span class="line">                throw new ConcurrentModificationException();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h4 id="LinkedHashMap"><a href="#LinkedHashMap" class="headerlink" title="LinkedHashMap"></a><em>LinkedHashMap</em></h4><p>使用双向链表来维护元素的顺序</p><p>继承了 <em>HashMap</em>， 实现了 <em>Map</em> 接口，允许放入 <code>null</code>，也允许插入 value 为 <code>null</code> 的元素</p><p>可以将 <em>LinkedHashMap</em> 看作是采用 <em>LinkedList</em> 增强的 <em>HashMap</em></p><p><img lazyload="" src="/images/loading.svg" data-src="https://image.lsilencej.top/i/2022/03/16/62318e7ca4ae8.png" alt="LinkedHashMap"></p><h5 id="底层数据结构-8"><a href="#底层数据结构-8" class="headerlink" title="底层数据结构"></a>底层数据结构</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">transient LinkedHashMap.Entry&lt;K,V&gt; head;</span><br><span class="line"></span><br><span class="line">transient LinkedHashMap.Entry&lt;K,V&gt; tail;</span><br></pre></td></tr></table></figure></div><h5 id="构造器-10"><a href="#构造器-10" class="headerlink" title="构造器"></a>构造器</h5><table><thead><tr><th align="center">构造器</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">LinkedHashMap()</td><td align="center">使用默认初始容量（16）和加载因子（0.75）构造一个空的插入排序 <code>LinkedHashMap</code>实例。</td></tr><tr><td align="center">LinkedHashMap(int initialCapacity)</td><td align="center">构造一个具有指定初始容量和默认加载因子（0.75）的空插入排序 <code>LinkedHashMap</code>实例。</td></tr><tr><td align="center">LinkedHashMap(int initialCapacity, float loadFactor)</td><td align="center">使用指定的初始容量和加载因子构造一个空的插入排序 <code>LinkedHashMap</code>实例。</td></tr><tr><td align="center">LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder)</td><td align="center">使用指定的初始容量，加载因子和排序模式构造一个空的 <code>LinkedHashMap</code>实例。</td></tr><tr><td align="center">LinkedHashMap(Map&lt;? extends K,? extends V&gt; m)</td><td align="center">构造一个插入有序的 <code>LinkedHashMap</code>实例，其实例与指定的映射相同。</td></tr></tbody></table><pre><code>public LinkedHashMap(int initialCapacity, float loadFactor) {
    super(initialCapacity, loadFactor);
    accessOrder = false;
}

public LinkedHashMap(int initialCapacity) {
    super(initialCapacity);
    accessOrder = false;
}

public LinkedHashMap() {
    super();
    accessOrder = false;
}

public LinkedHashMap(Map&lt;? extends K, ? extends V&gt; m) {
    super();
    accessOrder = false;
    putMapEntries(m, false);
}

public LinkedHashMap(int initialCapacity,
                     float loadFactor,
                     boolean accessOrder) {
    super(initialCapacity, loadFactor);
    this.accessOrder = accessOrder;
}
</code></pre><h5 id="方法概要-10"><a href="#方法概要-10" class="headerlink" title="方法概要"></a>方法概要</h5><table><thead><tr><th align="center">变量和类型</th><th align="center">方法</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">boolean</td><td align="center"><strong>containsValue</strong>(Object value)</td><td align="center">如果此映射将一个或多个键映射到指定值，则返回 <code>true</code> 。</td></tr><tr><td align="center">Set&lt;Map.Entry&lt;K,V&gt;&gt;</td><td align="center"><strong>entrySet</strong>()</td><td align="center">返回此映射中包含的映射的<code>Set</code>视图。</td></tr><tr><td align="center">V</td><td align="center"><strong>get</strong>(Object key)</td><td align="center">返回指定键映射到的值，如果此映射不包含键的映射，则返回 <code>null</code> 。</td></tr><tr><td align="center">Set<k></k></td><td align="center"><strong>keySet</strong>()</td><td align="center">返回此映射中包含的键的<code>Set</code>视图。</td></tr><tr><td align="center">protected boolean</td><td align="center"><strong>removeEldestEntry</strong>(Map.Entry&lt;K,V&gt; eldest)</td><td align="center">如果此地图应删除其最 <code>true</code>则返回 <code>true</code> 。</td></tr><tr><td align="center">Collection<v></v></td><td align="center"><strong>values</strong>()</td><td align="center">返回此映射中包含的值的 <code>Collection</code> 视图。</td></tr></tbody></table><h5 id="containsValue-1"><a href="#containsValue-1" class="headerlink" title="containsValue"></a>containsValue</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public boolean containsValue(Object value) {</span><br><span class="line">    for (LinkedHashMap.Entry&lt;K,V&gt; e = head; e != null; e = e.after) {</span><br><span class="line">        V v = e.value;</span><br><span class="line">        if (v == value || (value != null &amp;&amp; value.equals(v)))</span><br><span class="line">            return true;</span><br><span class="line">    }</span><br><span class="line">    return false;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="get-4"><a href="#get-4" class="headerlink" title="get"></a>get</h5><pre><code>public V get(Object key) {
    Node&lt;K,V&gt; e;
    if ((e = getNode(hash(key), key)) == null)
        return null;
    if (accessOrder)
        afterNodeAccess(e);
    return e.value;
}
</code></pre><h5 id="afterNodeAccess"><a href="#afterNodeAccess" class="headerlink" title="afterNodeAccess"></a>afterNodeAccess</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// 插入节点</span><br><span class="line">void afterNodeAccess(Node&lt;K,V&gt; e) { // move node to last</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; last;</span><br><span class="line">    if (accessOrder &amp;&amp; (last = tail) != e) {</span><br><span class="line">        LinkedHashMap.Entry&lt;K,V&gt; p =</span><br><span class="line">            (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after;</span><br><span class="line">        p.after = null;</span><br><span class="line">        if (b == null)</span><br><span class="line">            head = a;</span><br><span class="line">        else</span><br><span class="line">            b.after = a;</span><br><span class="line">        if (a != null)</span><br><span class="line">            a.before = b;</span><br><span class="line">        else</span><br><span class="line">            last = b;</span><br><span class="line">        if (last == null)</span><br><span class="line">            head = p;</span><br><span class="line">        else {</span><br><span class="line">            p.before = last;</span><br><span class="line">            last.after = p;</span><br><span class="line">        }</span><br><span class="line">        tail = p;</span><br><span class="line">        ++modCount;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="keySet-1"><a href="#keySet-1" class="headerlink" title="keySet"></a>keySet</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">public Set&lt;K&gt; keySet() {</span><br><span class="line">    Set&lt;K&gt; ks = keySet;</span><br><span class="line">    if (ks == null) {</span><br><span class="line">        ks = new LinkedKeySet();</span><br><span class="line">        keySet = ks;</span><br><span class="line">    }</span><br><span class="line">    return ks;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">final class LinkedKeySet extends AbstractSet&lt;K&gt; {</span><br><span class="line">    public final int size()                 { return size; }</span><br><span class="line">    public final void clear()               { LinkedHashMap.this.clear(); }</span><br><span class="line">    public final Iterator&lt;K&gt; iterator() {</span><br><span class="line">        return new LinkedKeyIterator();</span><br><span class="line">    }</span><br><span class="line">    public final boolean contains(Object o) { return containsKey(o); }</span><br><span class="line">    public final boolean remove(Object key) {</span><br><span class="line">        return removeNode(hash(key), key, null, false, true) != null;</span><br><span class="line">    }</span><br><span class="line">    public final Spliterator&lt;K&gt; spliterator()  {</span><br><span class="line">        return Spliterators.spliterator(this, Spliterator.SIZED |</span><br><span class="line">                                        Spliterator.ORDERED |</span><br><span class="line">                                        Spliterator.DISTINCT);</span><br><span class="line">    }</span><br><span class="line">    public final void forEach(Consumer&lt;? super K&gt; action) {</span><br><span class="line">        if (action == null)</span><br><span class="line">            throw new NullPointerException();</span><br><span class="line">        int mc = modCount;</span><br><span class="line">        for (LinkedHashMap.Entry&lt;K,V&gt; e = head; e != null; e = e.after)</span><br><span class="line">            action.accept(e.key);</span><br><span class="line">        if (modCount != mc)</span><br><span class="line">            throw new ConcurrentModificationException();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="values-1"><a href="#values-1" class="headerlink" title="values"></a>values</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">public Collection&lt;V&gt; values() {</span><br><span class="line">    Collection&lt;V&gt; vs = values;</span><br><span class="line">    if (vs == null) {</span><br><span class="line">        vs = new LinkedValues();</span><br><span class="line">        values = vs;</span><br><span class="line">    }</span><br><span class="line">    return vs;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">final class LinkedValues extends AbstractCollection&lt;V&gt; {</span><br><span class="line">    public final int size()                 { return size; }</span><br><span class="line">    public final void clear()               { LinkedHashMap.this.clear(); }</span><br><span class="line">    public final Iterator&lt;V&gt; iterator() {</span><br><span class="line">        return new LinkedValueIterator();</span><br><span class="line">    }</span><br><span class="line">    public final boolean contains(Object o) { return containsValue(o); }</span><br><span class="line">    public final Spliterator&lt;V&gt; spliterator() {</span><br><span class="line">        return Spliterators.spliterator(this, Spliterator.SIZED |</span><br><span class="line">                                        Spliterator.ORDERED);</span><br><span class="line">    }</span><br><span class="line">    public final void forEach(Consumer&lt;? super V&gt; action) {</span><br><span class="line">        if (action == null)</span><br><span class="line">            throw new NullPointerException();</span><br><span class="line">        int mc = modCount;</span><br><span class="line">        for (LinkedHashMap.Entry&lt;K,V&gt; e = head; e != null; e = e.after)</span><br><span class="line">            action.accept(e.value);</span><br><span class="line">        if (modCount != mc)</span><br><span class="line">            throw new ConcurrentModificationException();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div><h5 id="entrySet-1"><a href="#entrySet-1" class="headerlink" title="entrySet"></a>entrySet</h5><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() {</span><br><span class="line">    Set&lt;Map.Entry&lt;K,V&gt;&gt; es;</span><br><span class="line">    return (es = entrySet) == null ? (entrySet = new LinkedEntrySet()) : es;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">final class LinkedEntrySet extends AbstractSet&lt;Map.Entry&lt;K,V&gt;&gt; {</span><br><span class="line">    public final int size()                 { return size; }</span><br><span class="line">    public final void clear()               { LinkedHashMap.this.clear(); }</span><br><span class="line">    public final Iterator&lt;Map.Entry&lt;K,V&gt;&gt; iterator() {</span><br><span class="line">        return new LinkedEntryIterator();</span><br><span class="line">    }</span><br><span class="line">    public final boolean contains(Object o) {</span><br><span class="line">        if (!(o instanceof Map.Entry))</span><br><span class="line">            return false;</span><br><span class="line">        Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;) o;</span><br><span class="line">        Object key = e.getKey();</span><br><span class="line">        Node&lt;K,V&gt; candidate = getNode(hash(key), key);</span><br><span class="line">        return candidate != null &amp;&amp; candidate.equals(e);</span><br><span class="line">    }</span><br><span class="line">    public final boolean remove(Object o) {</span><br><span class="line">        if (o instanceof Map.Entry) {</span><br><span class="line">            Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;) o;</span><br><span class="line">            Object key = e.getKey();</span><br><span class="line">            Object value = e.getValue();</span><br><span class="line">            return removeNode(hash(key), key, value, true, true) != null;</span><br><span class="line">        }</span><br><span class="line">        return false;</span><br><span class="line">    }</span><br><span class="line">    public final Spliterator&lt;Map.Entry&lt;K,V&gt;&gt; spliterator() {</span><br><span class="line">        return Spliterators.spliterator(this, Spliterator.SIZED |</span><br><span class="line">                                        Spliterator.ORDERED |</span><br><span class="line">                                        Spliterator.DISTINCT);</span><br><span class="line">    }</span><br><span class="line">    public final void forEach(Consumer&lt;? super Map.Entry&lt;K,V&gt;&gt; action) {</span><br><span class="line">        if (action == null)</span><br><span class="line">            throw new NullPointerException();</span><br><span class="line">        int mc = modCount;</span><br><span class="line">        for (LinkedHashMap.Entry&lt;K,V&gt; e = head; e != null; e = e.after)</span><br><span class="line">            action.accept(e);</span><br><span class="line">        if (modCount != mc)</span><br><span class="line">            throw new ConcurrentModificationException();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div></div><div class="post-copyright-info"><div class="article-copyright-info-container"><ul><li><strong>Title:</strong> Java 集合框架源码解析</li><li><strong>Author:</strong> lsilencej</li><li><strong>Created at:</strong> 2021-11-15 20:52:59</li><li><strong>Updated at:</strong> 2022-05-02 15:53:41</li><li><strong>Link:</strong> https://lsilencej.github.io/hexo-blog/2021/11/15/Java 集合框架源码解析-java-collections-framework/</li><li><strong>License:</strong> This work is licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a>.</li></ul></div></div><ul class="post-tags-box"><li class="tag-item"><a href="/tags/Java/">#Java</a>&nbsp;</li></ul><div class="recommended-article"><div class="recommended-desktop"><div class="recommended-article-header"><i aria-hidden="true"></i><span>推荐阅读</span></div><div class="recommended-article-group"><a class="recommended-article-item" href="/2021/11/09/Java 中的泛型、异常、反射机制-java-study-note-2/" title="Java 中的泛型、异常、反射机制" rel="bookmark"><img src="https://image.lsilencej.top/i/2022/03/17/623219db0a055.png" alt="Java 中的泛型、异常、反射机制"> <span class="title">Java 中的泛型、异常、反射机制</span> </a><a class="recommended-article-item" href="/2021/07/14/Hexo博客美化（持续更新）-hexo-beauty/" title="Hexo博客美化（持续更新）" rel="bookmark"><img src="https://image.lsilencej.top/i/2022/03/17/6232192f98e01.jpg" alt="Hexo博客美化（持续更新）"> <span class="title">Hexo博客美化（持续更新）</span> </a><a class="recommended-article-item" href="/2021/11/07/Java 学习笔记（基础）-java-study-note/" title="Java 学习笔记（基础）" rel="bookmark"><img src="https://image.lsilencej.top/i/2022/03/17/623219b65c93f.png" alt="Java 学习笔记（基础）"> <span class="title">Java 学习笔记（基础）</span></a></div></div><div class="recommended-mobile"><div class="recommended-article-header"><i aria-hidden="true"></i><span>推荐阅读</span></div><div class="recommended-article-group"><a class="recommended-article-item" href="/2021/11/09/Java 中的泛型、异常、反射机制-java-study-note-2/" title="Java 中的泛型、异常、反射机制" rel="bookmark"><img src="https://image.lsilencej.top/i/2022/03/17/623219db0a055.png" alt="Java 中的泛型、异常、反射机制"> <span class="title">Java 中的泛型、异常、反射机制</span> </a><a class="recommended-article-item" href="/2021/07/14/Hexo博客美化（持续更新）-hexo-beauty/" title="Hexo博客美化（持续更新）" rel="bookmark"><img src="https://image.lsilencej.top/i/2022/03/17/6232192f98e01.jpg" alt="Hexo博客美化（持续更新）"> <span class="title">Hexo博客美化（持续更新）</span></a></div></div></div><div class="article-nav"><div class="article-prev"><a class="prev" rel="prev" href="/2021/11/16/%E7%BA%A2%E9%BB%91%E6%A0%91%E8%AF%A6%E8%A7%A3-red-black-tree/"><span class="left arrow-icon flex-center"><i class="fa-solid fa-chevron-left"></i> </span><span class="title flex-center"><span class="post-nav-title-item">红黑树详解</span> <span class="post-nav-item">Prev posts</span></span></a></div><div class="article-next"><a class="next" rel="next" href="/2021/11/09/Java%20%E4%B8%AD%E7%9A%84%E6%B3%9B%E5%9E%8B%E3%80%81%E5%BC%82%E5%B8%B8%E3%80%81%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6-java-study-note-2/"><span class="title flex-center"><span class="post-nav-title-item">Java 中的泛型、异常、反射机制</span> <span class="post-nav-item">Next posts</span> </span><span class="right arrow-icon flex-center"><i class="fa-solid fa-chevron-right"></i></span></a></div></div><div class="comment-container"><div class="comments-container"><div id="comment-anchor"></div><div class="comment-area-title"><i class="fa-solid fa-comments"></i>&nbsp;Comments</div><div id="waline"></div><script type="module" data-pjax>import{init}from"https://evan.beee.top/js/waline.mjs";function loadWaline(){init({el:"#waline",serverURL:"https://comment.lsilencej.top",lang:"zh-CN",dark:'body[class~="dark-mode"]',requiredMeta:["nick","mail"]})}{const e=setTimeout(()=>{loadWaline(),clearTimeout(e)},1e3)}</script></div></div></div><div class="toc-content-container"><div class="post-toc-wrap"><div class="post-toc"><div class="toc-title">On this page</div><div class="page-title">Java 集合框架源码解析</div><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="nav-text">知识体系结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Collection-%E5%AE%B9%E5%99%A8"><span class="nav-text">Collection 容器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E5%9B%BE"><span class="nav-text">结构图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#List"><span class="nav-text">List</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ArrayList"><span class="nav-text">ArrayList</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="nav-text">底层数据结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8"><span class="nav-text">构造器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E6%A6%82%E8%A6%81"><span class="nav-text">方法概要</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E6%89%A9%E5%AE%B9"><span class="nav-text">自动扩容</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#trimToSize"><span class="nav-text">trimToSize</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#indexOf"><span class="nav-text">indexOf</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#lastIndexOf"><span class="nav-text">lastIndexOf</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#elementData"><span class="nav-text">elementData</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#get"><span class="nav-text">get</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#set"><span class="nav-text">set</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#add"><span class="nav-text">add</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#fastRemove"><span class="nav-text">fastRemove</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#remove"><span class="nav-text">remove</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#addAll"><span class="nav-text">addAll</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#removeAll"><span class="nav-text">removeAll</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vector"><span class="nav-text">Vector</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8-1"><span class="nav-text">构造器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E6%A6%82%E8%A6%81-1"><span class="nav-text">方法概要</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#LinkedList"><span class="nav-text">LinkedList</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-1"><span class="nav-text">底层数据结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8-2"><span class="nav-text">构造器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E6%A6%82%E8%A6%81-2"><span class="nav-text">方法概要</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#getFirst"><span class="nav-text">getFirst</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#getLast"><span class="nav-text">getLast</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#unlinkFirst"><span class="nav-text">unlinkFirst</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#unlinkLast"><span class="nav-text">unlinkLast</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#unlink"><span class="nav-text">unlink</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#removeFirst"><span class="nav-text">removeFirst</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#removeLast"><span class="nav-text">removeLast</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#linkFirst"><span class="nav-text">linkFirst</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#linkLast"><span class="nav-text">linkLast</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#linkBefore"><span class="nav-text">linkBefore</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#node"><span class="nav-text">node</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#addFirst"><span class="nav-text">addFirst</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#addLast"><span class="nav-text">addLast</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#add-1"><span class="nav-text">add</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#remove-1"><span class="nav-text">remove</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#addAll-1"><span class="nav-text">addAll</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#get-1"><span class="nav-text">get</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#set-1"><span class="nav-text">set</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#indexOf-1"><span class="nav-text">indexOf</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#lastIndexOf-1"><span class="nav-text">lastIndexOf</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#peek"><span class="nav-text">peek</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#element"><span class="nav-text">element</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#poll"><span class="nav-text">poll</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#offer"><span class="nav-text">offer</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#offerFirst"><span class="nav-text">offerFirst</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#offerLast"><span class="nav-text">offerLast</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#peekFirst"><span class="nav-text">peekFirst</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#peekLast"><span class="nav-text">peekLast</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pollFirst"><span class="nav-text">pollFirst</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pollLast"><span class="nav-text">pollLast</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#push"><span class="nav-text">push</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pop"><span class="nav-text">pop</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#removeFirstOccurrence"><span class="nav-text">removeFirstOccurrence</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#removeLastOccurrence"><span class="nav-text">removeLastOccurrence</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Set"><span class="nav-text">Set</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#TreeSet"><span class="nav-text">TreeSet</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-2"><span class="nav-text">底层数据结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8-3"><span class="nav-text">构造器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E6%A6%82%E8%A6%81-3"><span class="nav-text">方法概要</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HashSet"><span class="nav-text">HashSet</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-3"><span class="nav-text">底层数据结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8-4"><span class="nav-text">构造器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E6%A6%82%E8%A6%81-4"><span class="nav-text">方法概要</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#LinkedHashSet"><span class="nav-text">LinkedHashSet</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8-5"><span class="nav-text">构造器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E6%A6%82%E8%A6%81-5"><span class="nav-text">方法概要</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Stack-amp-amp-Queue"><span class="nav-text">Stack &amp;&amp; Queue</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ArrayDeque"><span class="nav-text">ArrayDeque</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-4"><span class="nav-text">底层数据结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8-6"><span class="nav-text">构造器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E6%A6%82%E8%A6%81-6"><span class="nav-text">方法概要</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%89%A9%E5%AE%B9%E5%87%BD%E6%95%B0"><span class="nav-text">扩容函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#dec"><span class="nav-text">dec</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#inc"><span class="nav-text">inc</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#addFirst-1"><span class="nav-text">addFirst</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#addLast-1"><span class="nav-text">addLast</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#addAll-2"><span class="nav-text">addAll</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#offerFirst-1"><span class="nav-text">offerFirst</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#offerLast-1"><span class="nav-text">offerLast</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#removeFirst-1"><span class="nav-text">removeFirst</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#removeLast-1"><span class="nav-text">removeLast</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pollFirst-1"><span class="nav-text">pollFirst</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pollLast-1"><span class="nav-text">pollLast</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#getFirst-1"><span class="nav-text">getFirst</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#getLast-1"><span class="nav-text">getLast</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#peekFirst-1"><span class="nav-text">peekFirst</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#peekLast-1"><span class="nav-text">peekLast</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#delete"><span class="nav-text">delete</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#removeFirstOccurrence-1"><span class="nav-text">removeFirstOccurrence</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#removeLastOccurrence-1"><span class="nav-text">removeLastOccurrence</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#add-2"><span class="nav-text">add</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#offer-1"><span class="nav-text">offer</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#remove-2"><span class="nav-text">remove</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#poll-1"><span class="nav-text">poll</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#element-1"><span class="nav-text">element</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#peek-1"><span class="nav-text">peek</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#push-1"><span class="nav-text">push</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pop-1"><span class="nav-text">pop</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PriorityDeque"><span class="nav-text">PriorityDeque</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-5"><span class="nav-text">底层数据结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8-7"><span class="nav-text">构造器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E6%A6%82%E8%A6%81-7"><span class="nav-text">方法概要</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%89%A9%E5%AE%B9%E5%87%BD%E6%95%B0-1"><span class="nav-text">扩容函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#siftUp"><span class="nav-text">siftUp</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#siftDown"><span class="nav-text">siftDown</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#add-3"><span class="nav-text">add</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#offer-2"><span class="nav-text">offer</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#peek-2"><span class="nav-text">peek</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#indexOf-2"><span class="nav-text">indexOf</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#removeAt"><span class="nav-text">removeAt</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#remove-3"><span class="nav-text">remove</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#removeEq"><span class="nav-text">removeEq</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#poll-2"><span class="nav-text">poll</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Map-%E5%AE%B9%E5%99%A8"><span class="nav-text">Map 容器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E5%9B%BE-1"><span class="nav-text">结构图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Map"><span class="nav-text">Map</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#TreeMap"><span class="nav-text">TreeMap</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-6"><span class="nav-text">底层数据结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8-8"><span class="nav-text">构造器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E6%A6%82%E8%A6%81-8"><span class="nav-text">方法概要</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#rotateLeft"><span class="nav-text">rotateLeft</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#rotateRight"><span class="nav-text">rotateRight</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#colorOf"><span class="nav-text">colorOf</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#parentOf"><span class="nav-text">parentOf</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#setColor"><span class="nav-text">setColor</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#leftOf"><span class="nav-text">leftOf</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#rightOf"><span class="nav-text">rightOf</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#fixAfterInsertion"><span class="nav-text">fixAfterInsertion</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#fixAfterDeletion"><span class="nav-text">fixAfterDeletion</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#getEntry"><span class="nav-text">getEntry</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#getEntryUsingComparator"><span class="nav-text">getEntryUsingComparator</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#getFirstEntry"><span class="nav-text">getFirstEntry</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#getLastEntry"><span class="nav-text">getLastEntry</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#get-2"><span class="nav-text">get</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#firstKey"><span class="nav-text">firstKey</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#lastKey"><span class="nav-text">lastKey</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#buildFromSorted"><span class="nav-text">buildFromSorted</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#putAll"><span class="nav-text">putAll</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#put"><span class="nav-text">put</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#deleteEntry"><span class="nav-text">deleteEntry</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#remove-4"><span class="nav-text">remove</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HashMap"><span class="nav-text">HashMap</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-7"><span class="nav-text">底层数据结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8-9"><span class="nav-text">构造器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E6%A6%82%E8%A6%81-9"><span class="nav-text">方法概要</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%89%A9%E5%AE%B9%E5%87%BD%E6%95%B0-2"><span class="nav-text">扩容函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#getNode"><span class="nav-text">getNode</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#get-3"><span class="nav-text">get</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#containsKey"><span class="nav-text">containsKey</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#putVal"><span class="nav-text">putVal</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#putMapEntries"><span class="nav-text">putMapEntries</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#put-1"><span class="nav-text">put</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#putAll-1"><span class="nav-text">putAll</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#removeNode"><span class="nav-text">removeNode</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#remove-5"><span class="nav-text">remove</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#containsValue"><span class="nav-text">containsValue</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#keySet"><span class="nav-text">keySet</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#values"><span class="nav-text">values</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#entrySet"><span class="nav-text">entrySet</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#LinkedHashMap"><span class="nav-text">LinkedHashMap</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-8"><span class="nav-text">底层数据结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8-10"><span class="nav-text">构造器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E6%A6%82%E8%A6%81-10"><span class="nav-text">方法概要</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#containsValue-1"><span class="nav-text">containsValue</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#get-4"><span class="nav-text">get</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#afterNodeAccess"><span class="nav-text">afterNodeAccess</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#keySet-1"><span class="nav-text">keySet</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#values-1"><span class="nav-text">values</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#entrySet-1"><span class="nav-text">entrySet</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></div></div></div><div class="main-content-footer"><footer class="footer"><div class="info-container"><div class="copyright-info">&copy; <span>2018</span> - 2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration:0.5s;color:#f54545"></i>&nbsp;&nbsp;<a href="/">lsilencej</a></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="website-count info-item"><span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">VISITOR COUNT&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span> </span><span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">TOTAL PAGE VIEWS&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span></span></div><div class="theme-info info-item"><span class="powered-by-container">POWERED BY <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a></span><br><span class="theme-version-container">THEME&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.2.1</a></span></div><div class="icp-info info-item"><a target="_blank" rel="nofollow" href="https://icp.gov.moe/?keyword=20220922">萌ICP备20220922号</a></div><div>Blog up for <span class="odometer" id="runtime_days"></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec</div><script async data-pjax>try{function odometer_init(){document.querySelectorAll(".odometer").forEach(e=>{new Odometer({el:e,format:"( ddd).dd",duration:200})})}odometer_init()}catch(e){}</script></div></footer></div></div><div class="post-tools"><div class="post-tools-container"><ul class="article-tools-list"><li class="right-bottom-tools page-aside-toggle"><i class="fa-regular fa-outdent"></i></li><li class="go-comment"><i class="fa-regular fa-comments"></i></li></ul></div></div><div class="right-side-tools-container"><div class="side-tools-container"><ul class="hidden-tools-list"><li class="right-bottom-tools tool-font-adjust-plus flex-center"><i class="fa-regular fa-magnifying-glass-plus"></i></li><li class="right-bottom-tools tool-font-adjust-minus flex-center"><i class="fa-regular fa-magnifying-glass-minus"></i></li><li class="right-bottom-tools tool-expand-width flex-center"><i class="fa-regular fa-expand"></i></li><li class="right-bottom-tools tool-dark-light-toggle flex-center"><i class="fa-regular fa-moon"></i></li><li class="right-bottom-tools rss flex-center"><a class="flex-center" href="/atom.xml" target="_blank"><i class="fa-regular fa-rss"></i></a></li><li class="right-bottom-tools tool-scroll-to-bottom flex-center"><i class="fa-regular fa-arrow-down"></i></li></ul><ul class="visible-tools-list"><li class="right-bottom-tools toggle-tools-list flex-center"><i class="fa-regular fa-cog fa-spin"></i></li><li class="right-bottom-tools tool-scroll-to-top flex-center"><i class="arrow-up fas fa-arrow-up"></i> <span class="percent"></span></li><li class="right-bottom-tools tool-aplayer flex-center"></li></ul></div></div><div class="image-viewer-container"><img src=""></div><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-input-field-pre"><i class="fa-solid fa-keyboard"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="Search..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa-solid fa-times"></i></span></div><div id="search-result"><div id="no-result"><i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i></div></div></div></div></main><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/utils.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/main.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/layouts/navbarShrink.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/tools/scrollTopBottom.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/tools/lightDarkSwitch.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/tools/localSearch.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/tools/codeBlock.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/layouts/lazyload.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/tools/runtime.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/libs/odometer.min.js"></script><link rel="stylesheet" href="//npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/assets/odometer-theme-minimal.css"><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/libs/Typed.min.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/plugins/typed.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/libs/mermaid.min.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/plugins/mermaid.js"></script><div class="post-scripts pjax"><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/tools/tocToggle.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/libs/anime.min.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/layouts/toc.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/plugins/tabs.js"></script></div><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/libs/pjax.min.js"></script><script>window.addEventListener("DOMContentLoaded",()=>{window.pjax=new Pjax({selectors:["head title",".page-container",".pjax"],history:!0,debug:!1,cacheBust:!1,timeout:0,analytics:!1,currentUrlFullReload:!1,scrollRestoration:!1}),document.addEventListener("pjax:send",()=>{Global.utils.pjaxProgressBarStart()}),document.addEventListener("pjax:complete",()=>{Global.utils.pjaxProgressBarEnd(),window.pjax.executeScripts(document.querySelectorAll("script[data-pjax], .pjax script")),Global.refresh()})})</script><div id="aplayer"></div><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/libs/APlayer.min.js"></script><script src="https://npm.elemecdn.com/hexo-theme-redefine@2.2.1/source/js/plugins/aplayer.js"></script></body></html>